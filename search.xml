<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>åç«¯ä¼˜åŒ–</title>
    <url>/2019/10/29/VINs-Mono%E2%80%94%E2%80%94%E5%90%8E%E7%AB%AF%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="çŠ¶æ€å‘é‡"><a href="#çŠ¶æ€å‘é‡" class="headerlink" title="çŠ¶æ€å‘é‡"></a>çŠ¶æ€å‘é‡</h1><p>VIO ç´§è€¦åˆæ–¹æ¡ˆçš„ä¸»è¦æ€è·¯å°±æ˜¯é€šè¿‡å°†åŸºäºè§†è§‰æ„é€ çš„æ®‹å·®é¡¹å’ŒåŸºäº IMU æ„é€ çš„æ®‹å·®é¡¹æ”¾åœ¨ä¸€èµ·æ„é€ æˆä¸€ä¸ªè”åˆä¼˜åŒ–çš„é—®é¢˜ï¼Œæ•´ä¸ªä¼˜åŒ–é—®é¢˜çš„æœ€ä¼˜è§£å³å¯è®¤ä¸ºæ˜¯æ¯”è¾ƒå‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029192151582.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>ä¸ºäº†é™åˆ¶ä¼˜åŒ–å˜é‡çš„æ•°ç›®ï¼Œ VINS-Mono é‡‡ç”¨äº†æ»‘åŠ¨çª—å£çš„å½¢å¼ï¼Œ æ»‘åŠ¨çª—å£ä¸­çš„å…¨çŠ¶æ€é‡åŒ…æ‹¬æ»‘åŠ¨çª—å£å†…çš„n+1ä¸ªå…³é”®å¸§æ—¶åˆ» IMU åæ ‡ç³»çš„ä½ç½®ã€å§¿æ€ã€å§¿æ€ï¼ˆæ—‹è½¬ï¼‰ã€åŠ é€Ÿåº¦è®¡åç½®ã€é™€èºä»ªåç½®ï¼Œ Camera åˆ° IMU çš„å¤–å‚ï¼Œ m +1ä¸ª 3D è·¯æ ‡ç‚¹çš„é€†æ·±åº¦ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029192802133.png#pic_center"><br>ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„è¯¯å·®çŠ¶æ€é‡ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029192821349.png#pic_center"></p><a id="more"></a>
<h1 id="ä»£ä»·å‡½æ•°ï¼ˆMinimize-residuals-from-all-sensorsï¼‰"><a href="#ä»£ä»·å‡½æ•°ï¼ˆMinimize-residuals-from-all-sensorsï¼‰" class="headerlink" title="ä»£ä»·å‡½æ•°ï¼ˆMinimize residuals from all sensorsï¼‰"></a>ä»£ä»·å‡½æ•°ï¼ˆMinimize residuals from all sensorsï¼‰</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029192917433.png#pic_center"></p>
<p>å…¶ä¸­$P^{b<em>k}</em>{b<em>{k+1}}$ä¸º IMU é¢„ç§¯åˆ†å™ªå£°é¡¹çš„åæ–¹å·®çŸ©é˜µï¼Œ $P^{c_j}_l$ä¸ºè§†è§‰è§‚æµ‹å™ªå£°çš„åæ–¹å·®çŸ©é˜µã€‚<br>ä¸‰ä¸ªæ®‹å·®é¡¹å³è¯¯å·®é¡¹åˆ†åˆ«ä¸ºè¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯ã€ IMU æµ‹é‡æ®‹å·®ã€è§†è§‰çš„é‡æŠ•å½±æ®‹å·®ã€‚ä¸‰ç§æ®‹å·®éƒ½æ˜¯ç”¨é©¬æ°è·ç¦»è¡¨ç¤ºã€‚<br>æ ¹æ®é«˜æ–¯ç‰›é¡¿æ³•æ±‚ä¼˜åŒ–è¿‡ç¨‹ä¸­æœ€ä¸ºæ ¸å¿ƒçš„å¢é‡æ–¹ç¨‹ï¼Œä»¥ IMU æµ‹é‡æ®‹å·®ä¸ºä¾‹ï¼Œå…ˆå°†$r</em>{b}(\hat z^{b<em>k}</em>{b_{k+1}},\chi )$è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029194020513.png#pic_center"></p>
<p>å…¶ä¸­$H^{b<em>k}</em>{b_{k+1}}$æ˜¯é›…å¯æ¯”çŸ©é˜µ</p>
<p>ç­‰å·å³è¾¹å…³äº$\delta x$çš„å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ä¸º 0ï¼Œå¾—åˆ°å¢é‡æ–¹ç¨‹ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029194351591.png#pic_center"></p>
<p>é‚£ä¹ˆå¯ä»¥å†™å‡ºå‡½æ•°å¯¹åº”çš„å¢é‡æ–¹ç¨‹ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029195011958.png#pic_center"></p>
<p>å¢é‡æ–¹ç¨‹å¯è¿›ä¸€æ­¥ç®€åŒ–ä¸ºï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029195045773.png#pic_center"></p>
<p>å…¶ä¸­$\wedge _p$ï¼Œ$\wedge _B$ï¼Œ$\wedge _C$ä¸ºï¼ˆè¿‘ä¼¼çš„ï¼‰ Hessian çŸ©é˜µï¼Œä¸Šè¿°æ–¹ç¨‹ç§°ä¹‹ä¸ºå¢é‡æ–¹ç¨‹ã€‚</p>
<h1 id="IMU-æµ‹é‡çº¦æŸ"><a href="#IMU-æµ‹é‡çº¦æŸ" class="headerlink" title="IMU æµ‹é‡çº¦æŸ"></a>IMU æµ‹é‡çº¦æŸ</h1><h2 id="IMU-æµ‹é‡æ®‹å·®"><a href="#IMU-æµ‹é‡æ®‹å·®" class="headerlink" title="IMU æµ‹é‡æ®‹å·®"></a>IMU æµ‹é‡æ®‹å·®</h2><p>æ ¹æ®ä¸Šé¢çš„ IMU é¢„ç§¯åˆ†ï¼Œå¾—åˆ° IMU <strong>é¢„ç§¯åˆ†æ®‹å·®ï¼ˆä¼°è®¡å€¼ - æµ‹é‡å€¼ï¼‰</strong><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029195522934.png#pic_center"></p>
<p>å…¶ä¸­$[q]<em>{xyz}$è¡¨ç¤ºæå–å››å…ƒæ•°qçš„è™šéƒ¨ï¼Œ$[\hat \alpha^{b_k}</em>{b<em>{k+1}},\hat \beta ^{b_k}</em>{b<em>{k+1}},\hat \gamma ^{b_k}</em>{b<em>{k+1}}]^T$ä¸ºå…³é”®å¸§$b_k$å’Œå…³é”®å¸§$b</em>{k+1}$æ—¶é—´é—´éš”å†…ï¼Œä»…ä»…ä½¿ç”¨å«æœ‰å™ªå£°çš„åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªæ•°æ®è®¡ç®—çš„é¢„ç§¯åˆ† IMU æµ‹é‡é¡¹ï¼Œ$\delta \theta^{b<em>k}</em>{b_{k+1}}$æ˜¯å››å…ƒæ•°è¯¯å·®çš„ä¸‰ç»´è¡¨ç¤ºã€‚</p>
<h2 id="ä¼˜åŒ–å˜é‡"><a href="#ä¼˜åŒ–å˜é‡" class="headerlink" title="ä¼˜åŒ–å˜é‡"></a>ä¼˜åŒ–å˜é‡</h2><p>å¯¹äºä¸¤å¸§ä¹‹é—´çš„ IMU æµ‹é‡æ®‹å·®ï¼Œå¾…ä¼˜åŒ–å˜é‡ä¸ºï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029200304722.png#pic_center"></p>
<h2 id="é›…å…‹æ¯”çŸ©é˜µ"><a href="#é›…å…‹æ¯”çŸ©é˜µ" class="headerlink" title="é›…å…‹æ¯”çŸ©é˜µ"></a>é›…å…‹æ¯”çŸ©é˜µ</h2><p>é«˜æ–¯è¿­ä»£ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¼šç”¨åˆ° IMU æµ‹é‡æ®‹å·®å¯¹çŠ¶æ€é‡çš„é›…å…‹æ¯”çŸ©é˜µï¼Œä½†æ­¤å¤„æˆ‘ä»¬æ˜¯å¯¹è¯¯å·®çŠ¶<br>æ€é‡æ±‚åå¯¼</p>
<ul>
<li>å¯¹kæ—¶åˆ»$[\delta p^w<em>{b_k},\delta \theta^w</em>{b_k}]$æ±‚åå¯¼æ•°</li>
</ul>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029201345442.png#pic_center"></p>
<ul>
<li>å¯¹kæ—¶åˆ»$[\delta v^w<em>{b_k},\delta b</em>{a<em>k},\delta \theta b</em>{w_{k}}]$æ±‚åå¯¼æ•°</li>
</ul>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029201641707.png#pic_center"></p>
<ul>
<li>å¯¹kæ—¶åˆ»$[\delta p^w<em>{b</em>{k+1}},\delta \theta^w<em>{b</em>{k+1}}]$æ±‚åå¯¼æ•°</li>
</ul>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029201652448.png#pic_center"></p>
<ul>
<li>å¯¹kæ—¶åˆ»$[\delta v^w<em>{b</em>{k+1}},\delta b<em>{a</em>{k+1}},\delta \theta b<em>{w</em>{k+1}}]$æ±‚åå¯¼æ•°</li>
</ul>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029201704647.png#pic_center"></p>
<p>ä¸Šé¢å…¬å¼åœ¨ä»£ç ä¸­å¯¹åº”ï¼š class IMUFactor : public ceres::SizedCostFunction<15, 9 7, 9,>å¯¹äº Evaluate è¾“å…¥ double const <em>const </em>parameters, parameters[0], parameters[1], parameters[2],parameters[3]åˆ†åˆ«å¯¹åº” 4 ä¸ªè¾“å…¥å‚æ•°, å®ƒä»¬çš„é•¿åº¦ä¾æ¬¡æ˜¯ 7,9,7,9ï¼Œ åˆ†åˆ«å¯¹åº” 4 ä¸ªä¼˜åŒ–å˜é‡çš„å‚æ•°å—ã€‚<br>ä»£ç  IMUFactor::Evaluate()ä¸­ residual è¿˜ä¹˜ä»¥ä¸€ä¸ªä¿¡æ¯çŸ©é˜µ sqrt_infoï¼Œ è¿™æ˜¯å› ä¸ºçœŸæ­£çš„ä¼˜åŒ–é¡¹å…¶å®æ˜¯ Mahalanobis è·ç¦»ï¼š $d=r^TP^{âˆ’1}r$ï¼ŒP æ˜¯åæ–¹å·®ï¼Œåˆå› ä¸º Ceres åªæ¥å—æœ€å°äºŒä¹˜ä¼˜åŒ–ï¼Œ ä¹Ÿå°±æ˜¯$min(e^Te)$æ‰€ä»¥æŠŠğ‘ƒâˆ’1åš LLT åˆ†è§£ï¼Œ å³$LL^T=P^{-1}$, åˆ™æœ‰ï¼š</15,></p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029202424429.png#pic_center"></p>
<p>ä»¤$râ€™=L^Tr$ä½œä¸ºæ–°çš„ä¼˜åŒ–è¯¯å·®, è¿™æ ·å°±èƒ½ç”¨ Ceres æ±‚è§£äº†ã€‚ Mahalanobis è·ç¦»å…¶å®ç›¸å½“äºä¸€ä¸ªæ®‹å·®åŠ æƒ, åæ–¹å·®å¤§çš„åŠ æƒå°, åæ–¹å·®å°çš„åŠ æƒå¤§, ç€é‡ä¼˜åŒ–é‚£äº›æ¯”è¾ƒç¡®å®šçš„æ®‹å·®ã€‚è‹¥å†™æˆâ€œsqrt_info.setIdentity()â€ç›¸å½“äºä¸åŠ æƒ</p>
<h2 id="åæ–¹å·®çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h2><p>IMU åæ–¹å·® P ä¸ºå‰é¢æ¨å¯¼çš„ IMU é¢„ç§¯åˆ†ä¸­è¿­ä»£å‡ºæ¥çš„ IMU å¢é‡è¯¯å·®çš„åæ–¹å·®ã€‚</p>
<h1 id="è§†è§‰æµ‹é‡æ®‹å·®"><a href="#è§†è§‰æµ‹é‡æ®‹å·®" class="headerlink" title="è§†è§‰æµ‹é‡æ®‹å·®"></a>è§†è§‰æµ‹é‡æ®‹å·®</h1><p>è§†è§‰æµ‹é‡æ®‹å·®å³ ç‰¹å¾ç‚¹çš„é‡æŠ•å½±è¯¯å·®ï¼Œè§†è§‰æ®‹å·®å’Œé›…å…‹æ¯”çŸ©é˜µè®¡ç®—çš„å¯¹åº”ä»£ç åœ¨ProjectionFactor::E<br>å‡½æ•°ä¸­ã€‚</p>
<h2 id="é‡æŠ•å½±è¯¯å·®ï¼ˆè§†è§‰æµ‹é‡æ®‹å·®ï¼‰"><a href="#é‡æŠ•å½±è¯¯å·®ï¼ˆè§†è§‰æµ‹é‡æ®‹å·®ï¼‰" class="headerlink" title="é‡æŠ•å½±è¯¯å·®ï¼ˆè§†è§‰æµ‹é‡æ®‹å·®ï¼‰"></a>é‡æŠ•å½±è¯¯å·®ï¼ˆè§†è§‰æµ‹é‡æ®‹å·®ï¼‰</h2><p>å¯¹äºç¬¬ i å¸§ä¸­çš„ç‰¹å¾ç‚¹, å®ƒæŠ•å½±åˆ°ç¬¬ j å¸§ç›¸æœºåæ ‡ç³»ä¸‹çš„å€¼ä¸ºï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029202633785.png#pic_center"></p>
<p>æ‹†å†™æˆä¸‰ç»´å½¢å¼ä¸ºï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029202722447.png"></p>
<p>å…¶ä¸­ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029202739798.png#pic_center"></p>
<p>ä¸ºäº†åé¢æ–¹ä¾¿æ±‚å¯¼Jacobianï¼Œå¯¹$P_{c_j}$æ‹†è§£ï¼Œå®šä¹‰å¦‚ä¸‹å˜é‡</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029202916771.png"></p>
<p>è§†è§‰æµ‹é‡æ®‹å·®ä¸º</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029203023784.png#pic_center"></p>
<h2 id="ä¼˜åŒ–å˜é‡-1"><a href="#ä¼˜åŒ–å˜é‡-1" class="headerlink" title="ä¼˜åŒ–å˜é‡"></a>ä¼˜åŒ–å˜é‡</h2><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029203801125.png#pic_center"></p>
<h2 id="é›…å…‹æ¯”çŸ©é˜µ-1"><a href="#é›…å…‹æ¯”çŸ©é˜µ-1" class="headerlink" title="é›…å…‹æ¯”çŸ©é˜µ"></a>é›…å…‹æ¯”çŸ©é˜µ</h2><p>æ ¹æ®è§†è§‰æ®‹å·®å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç›¸å¯¹äºå„ä¼˜åŒ–å˜é‡çš„ Jacobian</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029203923600.png"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029203934216.png"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029203946932.png"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102920400339.png"></p>
<h2 id="åæ–¹å·®çŸ©é˜µ-1"><a href="#åæ–¹å·®çŸ©é˜µ-1" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h2><p>è§†è§‰çº¦æŸçš„å™ªå£°åæ–¹å·®ä¸æ ‡å®šç›¸æœºå†…å‚æ—¶çš„é‡æŠ•å½±è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯åç¦»å‡ ä¸ªåƒç´ æœ‰å…³ï¼Œ ä»£<br>ç å¯¹åº”ä¸º ProjectionTdFactor::sqrt_infoï¼Œ è¿™é‡Œå–çš„ 1.5 ä¸ªåƒç´ ï¼Œä¿¡æ¯çŸ©é˜µå–æ ¹å·åä¸º</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191029204041242.png#pic_center"></p>
<p><a href="https://blog.csdn.net/weixin_44580210/article/details/95748091" target="_blank" rel="noopener">VINS-Monoå…³é”®çŸ¥è¯†ç‚¹æ€»ç»“â€”â€”è¾¹ç¼˜åŒ–marginalizationç†è®ºå’Œä»£ç è¯¦è§£</a><br><a href="https://blog.csdn.net/weixin_44580210/article/details/93377806" target="_blank" rel="noopener">VINS-Monoå…³é”®çŸ¥è¯†ç‚¹æ€»ç»“â€”â€”é¢„ç§¯åˆ†å’Œåç«¯ä¼˜åŒ–IMUéƒ¨åˆ†</a></p>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
      <tags>
        <tag>VINS</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Monoâ€”â€”åˆå§‹åŒ–</title>
    <url>/2019/10/29/VINS-Mono%E2%80%94%E2%80%94%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä¼°è®¡å™¨åˆå§‹åŒ–"><a href="#ä¼°è®¡å™¨åˆå§‹åŒ–" class="headerlink" title="ä¼°è®¡å™¨åˆå§‹åŒ–"></a>ä¼°è®¡å™¨åˆå§‹åŒ–</h1><ul>
<li>åˆå§‹åŒ–çš„åŸå› æ˜¯å•ç›®æƒ¯æ€§ç´§è€¦åˆç³»ç»Ÿæ˜¯ä¸€ä¸ªéçº¿æ€§ç¨‹åº¦å¾ˆé«˜çš„ç³»ç»Ÿï¼Œé¦–å…ˆå•ç›®æ˜¯æ— æ³•è·å¾—ç©ºé—´ä¸­çš„ç»å¯¹å°ºåº¦ï¼Œè€ŒIMUåˆå¿…ç„¶å­˜åœ¨åç½®ï¼Œåœ¨åé¢è¿›è¡Œæ±‚è§£çš„æ—¶å€™è¿˜éœ€è¦ç”¨åˆ°é‡åŠ›åŠ é€Ÿåº¦ï¼ˆåŒ…æ‹¬å¤§å°å’Œæ–¹å‘ï¼‰ï¼Œå¯¹äºé€Ÿåº¦æ¯”è¾ƒæ•æ„Ÿçš„æ¡ä»¶ä¸‹ï¼Œæ¯”å¦‚è¯´æ— äººæœºï¼Œåˆè¦ç²¾ç¡®çš„é€Ÿåº¦ä¿¡æ¯ï¼Œå› æ­¤ï¼Œå¦‚ä½•æœ‰æ•ˆçš„åœ¨ç´§è€¦åˆç³»ç»Ÿå¤„ç†ä¹‹å‰è®¡ç®—å‡ºè¿™äº›é‡ï¼Œå¯¹æ•´ä¸ªç´§è€¦åˆç³»ç»Ÿçš„é²æ£’æ€§æœ‰ç€é‡å¤§çš„æ„ä¹‰</li>
<li>åˆå§‹åŒ–è¦åšçš„äº‹å…¶å®è¯´èµ·æ¥å¾ˆç®€å•ï¼Œå°±æ˜¯è®¡ç®—å‡ºç»å¯¹å°ºåº¦sã€é™€èºä»ªåç½®bgã€åŠ é€Ÿåº¦åç½®baã€é‡åŠ›åŠ é€Ÿåº¦Gå’Œæ¯ä¸ªIMUæ—¶åˆ»çš„é€Ÿåº¦v</li>
<li>VINS-Mono çš„åˆå§‹åŒ–é‡‡ç”¨æ¾ç»„åˆï¼ˆloosely coupledï¼‰çš„æ–¹å¼è·å–åˆå§‹å€¼ã€‚ é¦–å…ˆç”¨ SFMæ±‚è§£æ»‘åŠ¨çª—å£å†…æ‰€æœ‰å¸§çš„ä½å§¿ï¼ˆä»¥ç¬¬ä¸€å¸§ä½œä¸ºå‚è€ƒåæ ‡ç³»ï¼‰å’Œæ‰€æœ‰è·¯æ ‡ç‚¹çš„ 3D ä½ç½®ã€‚ç„¶åå°† SFM çš„ç»“æœä¸ IMU é¢„ç§¯åˆ†çš„å€¼è¿›è¡Œå¯¹é½ï¼Œå®ç°å¯¹é™€èºä»ªåç½®çš„æ ¡æ­£ï¼Œå†æ±‚è§£æ¯ä¸€å¸§å¯¹åº”çš„é€Ÿåº¦ï¼Œæ±‚è§£é‡åŠ›å‘é‡æ–¹å‘ï¼Œæ¢å¤å•ç›®ç›¸æœºçš„å°ºåº¦å› å­ã€‚</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹åŠ é€Ÿåº¦è®¡çš„åç½®è¿›è¡Œæ ¡æ­£ï¼Œè¿™æ˜¯å› ä¸ºé‡åŠ›æ˜¯åˆå§‹åŒ–è¿‡ç¨‹ä¸­å¾…æ±‚çš„é‡ï¼Œè€ŒåŠ é€Ÿåº¦è®¡åç½®ä¸é‡åŠ›è€¦åˆï¼Œè€Œä¸”ç³»ç»Ÿçš„åŠ é€Ÿåº¦ç›¸å¯¹äºé‡åŠ›åŠ é€Ÿåº¦å¾ˆå°ï¼Œæ‰€ä»¥åŠ é€Ÿåº¦è®¡åç½®åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å¾ˆéš¾è§‚æµ‹ï¼Œå› æ­¤åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸è€ƒè™‘åŠ é€Ÿåº¦è®¡åç½®çš„æ ¡æ­£ã€‚</li>
</ul><a id="more"></a>
<h2 id="æ»‘åŠ¨çª—å£-Sliding-Window-çº¯è§†è§‰SfM"><a href="#æ»‘åŠ¨çª—å£-Sliding-Window-çº¯è§†è§‰SfM" class="headerlink" title="æ»‘åŠ¨çª—å£(Sliding Window)çº¯è§†è§‰SfM"></a>æ»‘åŠ¨çª—å£(Sliding Window)çº¯è§†è§‰SfM</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥äº†æœ€æ–°å¸§ä¸ä¹‹å‰æ‰€æœ‰å¸§ä¹‹é—´çš„ç‰¹å¾å¯¹åº”ã€‚å¦‚æœæˆ‘ä»¬èƒ½åœ¨æ»‘åŠ¨çª—å£ä¸­çš„æœ€æ–°å¸§å’Œä»»ä½•å…¶ä»–å¸§ä¹‹é—´ï¼Œæ‰¾åˆ°ç¨³å®šçš„ç‰¹å¾è·Ÿè¸ª(è¶…è¿‡30ä¸ªè·Ÿè¸ªç‰¹å¾)å’Œè¶³å¤Ÿçš„è§†å·®(è¶…è¿‡20ä¸ªçš„æ—‹è½¬è¡¥å¿åƒç´ )ï¼Œä½¿ç”¨äº”ç‚¹æ³•æ¢å¤è¿™ä¸¤ä¸ªå¸§ä¹‹é—´çš„ç›¸å¯¹æ—‹è½¬å’Œå°ºåº¦å¹³ç§»ã€‚å¦åˆ™ï¼Œå°†æœ€æ–°çš„å¸§ä¿å­˜åœ¨çª—å£ä¸­ï¼Œå¹¶ç­‰å¾…æ–°çš„å¸§ã€‚å¦‚æœäº”ç‚¹ç®—æ³•æˆåŠŸçš„è¯ï¼Œä»»æ„è®¾ç½®å°ºåº¦ï¼Œå¹¶å¯¹è¿™ä¸¤ä¸ªå¸§ä¸­è§‚å¯Ÿåˆ°çš„æ‰€æœ‰ç‰¹å¾è¿›è¡Œä¸‰è§’åŒ–ã€‚åŸºäºè¿™äº›ä¸‰è§’ç‰¹å¾ï¼Œé‡‡ç”¨PnPæ¥ä¼°è®¡çª—å£ä¸­æ‰€æœ‰å…¶ä»–å¸§çš„å§¿æ€ã€‚æœ€åï¼Œåº”ç”¨å…¨å±€å…‰æŸå¹³å·®æ³•(BA)æœ€å°åŒ–æ‰€æœ‰ç‰¹å¾è§‚æµ‹çš„é‡æŠ•å½±è¯¯å·®ã€‚ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•ä¸–ç•Œåæ ‡ç³»çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªç›¸æœºåæ ‡ç³»$(Â·)^{c<em>0}$è®¾ç½®ä¸ºSfMçš„å‚è€ƒåæ ‡ç³»ã€‚æ‰€æœ‰å¸§çš„ä½å§¿$(\bar p^{c0}</em>{c<em>k}ï¼Œq^{c0}</em>{c_k})$å’Œç‰¹å¾ä½ç½®è¡¨ç¤ºç›¸å¯¹äº$(Â·)^{c_0}$ã€‚å‡è®¾æ‘„åƒæœºå’ŒIMUä¹‹é—´æœ‰ä¸€ä¸ªç²—ç•¥æµ‹é‡çš„å¤–éƒ¨å‚æ•°$(p^b_c,q^b_c)$ï¼Œæˆ‘ä»¬å¯ä»¥å°†å§¿æ€ä»ç›¸æœºåæ ‡ç³»è½¬æ¢åˆ°ç‰©ä½“(IMU)åæ ‡ç³»ã€‚</p>
<p>çº¯è§†è§‰åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬é‡‡ç”¨ç¬¬ä¸€å¸§ c0 ä½œä¸ºåŸºå‡†åæ ‡ç³»ï¼Œè‹¥è¦è½¬åŒ–ä¸ºä» body åæ ‡ç³»åˆ° c0åæ ‡ç³»ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹å˜æ¢ï¼Œå…¶ä¸­sæ˜¯åŒ¹é…è§†è§‰ç»“æ„ä¸è·ç¦»å°ºåº¦çš„å°ºåº¦å‚æ•°ï¼Œè§£å‡ºå°ºåº¦å‚æ•°æ˜¯å®ç°æˆåŠŸåˆå§‹åŒ–çš„å…³é”®ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/201910192045598.png#pic_center"><br>ä¸Šå¼æ¨å¯¼å¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028185549508.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028185607797.png#pic_center"></p>
<h2 id="B-è§†è§‰æƒ¯æ€§æ ¡å‡†ï¼ˆVisual-Inertial-Alignment"><a href="#B-è§†è§‰æƒ¯æ€§æ ¡å‡†ï¼ˆVisual-Inertial-Alignment" class="headerlink" title="B. è§†è§‰æƒ¯æ€§æ ¡å‡†ï¼ˆVisual-Inertial Alignment)"></a>B. è§†è§‰æƒ¯æ€§æ ¡å‡†ï¼ˆVisual-Inertial Alignment)</h2><h3 id="é™€èºä»ªåç½®æ ‡å®š"><a href="#é™€èºä»ªåç½®æ ‡å®š" class="headerlink" title="é™€èºä»ªåç½®æ ‡å®š"></a>é™€èºä»ªåç½®æ ‡å®š</h3><p>è¿™ ä¸€ éƒ¨ åˆ† çš„ å†… å®¹ å¯¹ åº” äº VINS-Mono ä»£ ç  initial<em>aligment.cpp ä¸­ çš„<br>solveGyroscopeBias()å‡½æ•°ã€‚<br>è€ƒè™‘æ»‘åŠ¨çª—å£ä¸­è¿ç»­ä¸¤å¸§$b_k$å’Œ$b</em>{k+1}$ï¼Œæˆ‘ä»¬ä»è§†è§‰sfMä¸­å¾—åˆ°æ—‹è½¬$q^{c0}<em>{b_k}$å’Œ$q^{c0}</em>{b<em>{k+1}}$ï¼Œä»IMUé¢„ç§¯åˆ†å¾—åˆ°çš„ç›¸å¯¹çº¦æŸ$Î³^{b_k}</em>{b<em>{k+1}}$ã€‚<br>é™€èºä»ªçš„è¯¯å·®æœ‰ä¸¤éƒ¨åˆ†æµ‹é‡å™ªå£°å’Œé™€èºä»ªåç½®ï¼Œå™ªå£°æš‚æ—¶å¯ä»¥å¿½ç•¥ï¼ˆæ¯•ç«Ÿå¤ªå°ï¼‰ï¼Œè€Œè§†è§‰çš„è¯¯å·®å°±åªæœ‰è§‚æµ‹å™ªå£°ï¼ˆä¹Ÿå¯ä»¥å¿½ç•¥ä¸ç®¡ï¼‰ï¼Œå› æ­¤ä¸¤è€…å·®å€¼çš„ç»å¯¹å€¼å°±æ˜¯é™€èºä»ªåç½®ï¼Œå°†æ•´ä¸ªæ»‘åŠ¨çª—å£çš„æ‰€æœ‰çš„æ—‹è½¬åšå·®æ„æˆäº†ä¸€ä¸ªæœ€å°åŒ–è¯¯å·®æ¨¡å‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204702396.png#pic_center"><br>å…¶ä¸­Bä»£è¡¨çª—å£çš„æ‰€æœ‰å¸§ã€‚<br>$q^{c0}</em>{b<em>k}$$q^{c0}</em>{b<em>{k+1}}$ï¼šç›¸æœºä»$b_k$åˆ°$b</em>{k+1}$ä¸‹çš„ç›¸å¯¹æ—‹è½¬<br>$Î³^{b<em>k}</em>{b<em>{k+1}}$ï¼šé™€èºä»ªä»$b</em>{k+1}$åˆ°$b<em>k$ä¸‹çš„ç›¸å¯¹æ—‹è½¬<br>ç¬¬äºŒä¸ªå¼å­ç»™å‡ºäº†$Î³^{b_k}</em>{b_{k+1}}$å¯¹é™€èºä»ªåç½®çš„ä¸€é˜¶è¿‘ä¼¼ã€‚</p>
<p>å› ä¸ºå››å…ƒæ•°æœ€å°å€¼ä¸ºå•ä½å››å…ƒæ•° [1; 0v]Tï¼Œæ‰€ä»¥<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028171134242.png#pic_center"><br>åªè€ƒè™‘è™šéƒ¨ï¼Œåˆ™æœ‰ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028171213618.png#pic_center"></p>
<p>ç„¶åå–æœ€å°äºŒä¹˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨SVDåˆ†è§£ç­‰æ–¹æ³•æ±‚è§£ï¼Œå¾—åˆ°äº†é™€èºä»ªåç½®$b<em>w$çš„åˆå§‹æ ¡å‡†ã€‚ç„¶åæˆ‘ä»¬ç”¨æ–°çš„é™€èºä»ªåç½®é‡æ–°ä¼ é€’æ‰€æœ‰çš„IMUé¢„ç§¯åˆ†é¡¹$\hat Î±^{b_k}</em>{b<em>{k+1}}ã€\hat Î²^{b_k}</em>{b<em>{k+1}}ã€\hat Î³^{b_k}</em>{b_{k+1}}$ ã€‚</p>
<h3 id="é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦åˆå§‹åŒ–ï¼š"><a href="#é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦åˆå§‹åŒ–ï¼š" class="headerlink" title="é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦åˆå§‹åŒ–ï¼š"></a>é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦åˆå§‹åŒ–ï¼š</h3><p>è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹å¯¹åº”äº VINS-Mono ä»£ç  initial<em>aligment.cpp ä¸­çš„ LinearAlignment()<br>å‡½æ•°<br>åœ¨é™€èºä»ªåç½®åˆå§‹åŒ–åï¼Œæˆ‘ä»¬ç»§ç»­åˆå§‹åŒ–å¯¼èˆªçš„å…¶ä»–åŸºæœ¬çŠ¶æ€ï¼Œå³é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204809433.png#pic_center"><br>å…¶ä¸­ï¼Œ$v^{b_k}</em>{b<em>k}$æ˜¯ç¬¬kå¸§å›¾åƒæœ¬ä½“åæ ‡ç³»çš„é€Ÿåº¦ï¼Œ$g^{c_0}$æ˜¯$c_0$åæ ‡ç³»ä¸­çš„é‡åŠ›å‘é‡ï¼Œsæ˜¯å•ç›®SfMåˆ°å…¬åˆ¶å•ä½çš„å°ºåº¦ã€‚<br>åœ¨$c_0$åæ ‡ç³»çš„é¢„ç§¯åˆ†ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028180200742.png#pic_center"><br>$p^{c_0}</em>{b<em>{k+1}}$å’Œ$p^{c_0}</em>{b<em>{k}}$å¯ç”±è§†è§‰ SFM è·å¾—ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028180301129.png#pic_center"><br>å°†æ­¤å¼å¸¦å…¥ä¸Šå¼å¾—ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028180458901.png#pic_center"><br>å°†ç­‰å¼ä¸­é€Ÿåº¦éƒ½è½¬æ¢åˆ°$c_0$ åæ ‡ç³»ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028181635823.png#pic_center"><br>å°†ä¸Šå¼è½¬æ¢æˆ$Hx=b$ çš„å½¢å¼ï¼Œè¿™æ ·ä¾¿äºåˆ©ç”¨ cholesky è¿›è¡Œæ±‚è§£ï¼Œç”±$s\bar p^{c_0}</em>{b<em>k}=p^{c_0}</em>{c<em>k}-R^{c_0}</em>{c_k}p_c^b$ï¼Œå¸¦å…¥ä¸Šå¼å¾—ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028181106531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>è”åŠ›ç­‰å¼ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028181609102.png#pic_center"><br>å³ï¼š $H^{6Ã—10}X_I^{\ 10Ã—1} = b^{6Ã—1}$<br>HçŸ©é˜µä¸€å®šæ˜¯ä¸€ä¸ªæ­£å®šå¯¹ç§°çŸ©é˜µï¼Œä»¥é‡‡ç”¨å¿«é€Ÿçš„ Cholosky åˆ†è§£ä¸‹é¢æ–¹ç¨‹æ±‚è§£$X_I$ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028182207166.png#pic_center"><br>å¯ä»¥å¾—åˆ°æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å…³é”®å¸§çš„æœ¬ä½“åæ ‡ç³»é€Ÿåº¦ï¼Œè§†è§‰å‚ç…§ç³»$(Â·)^{c_0}$çš„é‡åŠ›å‘é‡ï¼Œä»¥åŠå•ç›®å°ºåº¦å› å­ s ã€‚</p>
<h3 id="ä¿®æ­£é‡åŠ›çŸ¢é‡"><a href="#ä¿®æ­£é‡åŠ›çŸ¢é‡" class="headerlink" title="ä¿®æ­£é‡åŠ›çŸ¢é‡"></a>ä¿®æ­£é‡åŠ›çŸ¢é‡</h3><p>è¿™é‡Œè®¡ç®—çš„é‡åŠ›å¸æ”¶äº†é‡åŠ›åŠ é€Ÿåº¦è®¡çš„åç½®ï¼Œè™½ç„¶ä¸éœ€è¦è®¡ç®—é‡åŠ›åŠ é€Ÿåº¦è®¡çš„åç½®ï¼Œä½†é‡åŠ›è¿˜æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼Œè¯´åˆ°ä¼˜åŒ–é‡åŠ›åŠ é€Ÿåº¦ï¼Œè‚¯å®šåŒ…å«ä¸¤ä¸ªé‡ï¼Œå¤§å°å’Œæ–¹å‘ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªç»´åº¦ï¼Œä½†æ˜¯ä¸€èˆ¬æ¥è¯´å¤§å°æ˜¯ç¡®å®šå·²çŸ¥çš„ï¼ˆè¿™é‡Œè®¾ä¸º9.8ï¼‰ï¼Œå› æ­¤å…¶å®æˆ‘ä»¬è¦åšçš„å°±æ˜¯ä¼˜åŒ–æ–¹å‘ï¼Œæ˜¯ä¸€ä¸ªä¸¤ç»´çš„å‘é‡ï¼Œä¸‹å›¾æ˜¯ä¼˜åŒ–é‡åŠ›çš„æ–¹æ³•ä»¥åŠb1,b2å•ä½å‘é‡çš„æ–¹å‘ç¡®å®šæ¨¡å‹ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205318309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center">å°†é‡åŠ›å‘é‡é‡æ–°å‚æ•°åŒ–ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028183144674.png#pic_center"><br>å…¶ä¸­gæ˜¯å·²çŸ¥çš„é‡åŠ›å¤§å°ï¼Œ$\bar {\hat g}$æ˜¯è¡¨ç¤ºé‡åŠ›æ–¹å‘çš„å•ä½å‘é‡ï¼Œb1ã€ b2ä¸ºé‡åŠ›å‘é‡æ­£åˆ‡ç©ºé—´çš„ä¸€å¯¹<br>æ­£äº¤åŸº ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œw1å’Œw2åˆ†åˆ«æ˜¯åœ¨b1å’Œb2ä¸Šçš„å¯¹åº”ä½ç§»ã€‚<br>å°†ä¸Šå¼ä»£å…¥å‰é¢å¼å­ä¸­ï¼Œé‡æ–°æ•´ç†å¯å¾—ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028183424735.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028183439415.png"><br>è¿™æ ·ï¼Œå¯ä»¥ç”¨ Cholosky åˆ†è§£ä¸‹é¢æ–¹ç¨‹æ±‚è§£$X_I$ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028183526590.png#pic_center"></p>
<p>å®Œæˆåˆå§‹åŒ–ï¼šç»è¿‡å¯¹é‡åŠ›å‘é‡çš„ç»†åŒ–ï¼Œé€šè¿‡å°†é‡åŠ›æ—‹è½¬åˆ°zè½´ä¸Šï¼Œå¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸æ‘„åƒæœºåæ ‡ç³»c0ä¹‹é—´çš„æ—‹è½¬$q^w_{c_0}$ã€‚ç„¶åæˆ‘ä»¬å°†æ‰€æœ‰å˜é‡ä»å‚è€ƒåæ ‡ç³»$(Â·)^{c_0}$ æ—‹è½¬åˆ°ä¸–ç•Œåæ ‡ç³»$(Â·)^w$ã€‚æœ¬ä½“åæ ‡ç³»çš„é€Ÿåº¦ä¹Ÿå°†è¢«æ—‹è½¬åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚è§†è§‰SfMçš„å˜æ¢çŸ©é˜µå°†è¢«ç¼©æ”¾åˆ°åº¦é‡å•ä½ã€‚æ­¤æ—¶ï¼Œåˆå§‹åŒ–è¿‡ç¨‹å·²ç»å®Œæˆï¼Œæ‰€æœ‰è¿™äº›åº¦é‡å€¼éƒ½å°†è¢«è¾“å…¥åˆ°ä¸€ä¸ªç´§è€¦åˆçš„å•ç›®VIOä¸­ã€‚</p>
<h1 id="ä»£ç è§£æ"><a href="#ä»£ç è§£æ" class="headerlink" title="ä»£ç è§£æ"></a>ä»£ç è§£æ</h1><h2 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h2><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028160032562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p>
<h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>ç›´æ¥ä»estimator.cppä¸­çš„ if (solver_flag == INITIAL) å¼€å§‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (solver_flag == INITIAL) &#123;</span><br><span class="line">    <span class="comment">// æ»‘çª—ä¸­çš„Keyframeè¾¾åˆ°æŒ‡å®šå¤§å°çš„æ—¶å€™ï¼Œæ‰å¼€å§‹ä¼˜åŒ–</span></span><br><span class="line">    <span class="keyword">if</span> (frame_count == WINDOW_SIZE) &#123;</span><br><span class="line">        <span class="keyword">bool</span> result = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (ESTIMATE_EXTRINSIC != <span class="number">2</span> &amp;&amp; (header.stamp.toSec() - initial_timestamp) &gt; <span class="number">0.1</span>) &#123;</span><br><span class="line">            result = initialStructure(); <span class="comment">//! åˆå§‹åŒ–</span></span><br><span class="line">            initial_timestamp = header.stamp.toSec();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (result) &#123;</span><br><span class="line">            solver_flag = NON_LINEAR;</span><br><span class="line">            solveOdometry();</span><br><span class="line">            slideWindow();</span><br><span class="line">            f_manager.removeFailures();</span><br><span class="line">            ROS_INFO(<span class="string">"Initialization finish!"</span>);</span><br><span class="line">            last_R = Rs[WINDOW_SIZE];</span><br><span class="line">            last_P = Ps[WINDOW_SIZE];</span><br><span class="line">            last_R0 = Rs[<span class="number">0</span>];</span><br><span class="line">            last_P0 = Ps[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span></span><br><span class="line">            slideWindow();</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        frame_count++;</span><br></pre></td></tr></table></figure>
<h3 id="initialStructure-è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–"><a href="#initialStructure-è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–" class="headerlink" title="initialStructure() è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–"></a>initialStructure() è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–</h3><ul>
<li>1.é€šè¿‡è®¡ç®—çº¿åŠ é€Ÿåº¦çš„æ ‡å‡†å·®ï¼Œæ£€æµ‹IMUçš„å¯è§‚æ€§ï¼Œä»¥è¿›è¡Œåˆå§‹åŒ–<br>æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰ç®—ä¸Šall_image_frameçš„ç¬¬ä¸€å¸§ï¼Œæ‰€ä»¥æ±‚å‡å€¼å’Œæ ‡å‡†å·®çš„æ—¶å€™è¦å‡ä¸€</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! é€šè¿‡è®¡ç®—é¢„ç§¯åˆ†åŠ é€Ÿåº¦çš„æ ‡å‡†å·®ï¼Œæ£€æµ‹IMUçš„å¯è§‚æ€§</span></span><br><span class="line"><span class="comment">//check imu observibility</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—å‡å€¼</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">double</span>, ImageFrame&gt;::iterator frame_it;</span><br><span class="line">    Vector3d sum_g;</span><br><span class="line">    <span class="keyword">for</span> (frame_it = all_image_frame.begin(), frame_it++; frame_it != all_image_frame.end(); frame_it++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> sum_dt  = frame_it-&gt;second.pre_integration-&gt;sum_dt;</span><br><span class="line">        Vector3d tmp_g = frame_it-&gt;second.pre_integration-&gt;delta_v / sum_dt;</span><br><span class="line">        sum_g += tmp_g;</span><br><span class="line">    &#125;</span><br><span class="line">    Vector3d aver_g = sum_g * <span class="number">1.0</span> / ((<span class="keyword">int</span>)all_image_frame.size() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—æ–¹å·®</span></span><br><span class="line">    <span class="keyword">double</span> var = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (frame_it = all_image_frame.begin(), frame_it++; frame_it != all_image_frame.end(); frame_it++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> sum_dt  = frame_it-&gt;second.pre_integration-&gt;sum_dt;</span><br><span class="line">        Vector3d tmp_g = frame_it-&gt;second.pre_integration-&gt;delta_v / sum_dt;</span><br><span class="line">        var += (tmp_g - aver_g).transpose() * (tmp_g - aver_g);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—æ ‡å‡†å·®</span></span><br><span class="line">    var = <span class="built_in">sqrt</span>(var / ((<span class="keyword">int</span>)all_image_frame.size() - <span class="number">1</span>));</span><br><span class="line">    <span class="comment">//ROS_WARN("IMU variation %f!", var);</span></span><br><span class="line">    <span class="keyword">if</span>(var &lt; <span class="number">0.25</span>) <span class="comment">//! ä»¥æ ‡å‡†å·®åˆ¤æ–­å¯è§‚æ€§</span></span><br><span class="line">    &#123;</span><br><span class="line">        ROS_INFO(<span class="string">"IMU excitation not enouth!"</span>);</span><br><span class="line">        <span class="comment">//return false;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>2.å°†f_managerä¸­çš„æ‰€æœ‰featureä¿å­˜åˆ°vector<sfmfeature> sfm_fä¸­ï¼ŒSFMFeatureæ•°ç»„ä¸­åŒ…å«äº†ç‰¹å¾ç‚¹çŠ¶æ€ï¼ˆæ˜¯å¦è¢«ä¸‰è§’åŒ–ï¼‰ï¼Œidï¼Œ2dç‚¹ï¼Œ3dåæ ‡ä»¥åŠæ·±åº¦ï¼Œå°†ç‰¹å¾ç®¡ç†å™¨ä¸­çš„ç‰¹å¾ä¿¡æ¯ä¿å­˜åˆ°SFMFeatureå¯¹è±¡sfm_fä¸­sfm_f.push_back(tmp_feature)ã€‚<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SFMFeature</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">bool</span> state;<span class="comment">//çŠ¶æ€ï¼ˆæ˜¯å¦è¢«ä¸‰è§’åŒ–ï¼‰</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>,Vector2d&gt;&gt; observation;<span class="comment">//æ‰€æœ‰è§‚æµ‹åˆ°è¯¥ç‰¹å¾ç‚¹çš„å›¾åƒå¸§IDå’Œå›¾åƒåæ ‡</span></span><br><span class="line">    <span class="keyword">double</span> position[<span class="number">3</span>];<span class="comment">//3dåæ ‡</span></span><br><span class="line">    <span class="keyword">double</span> depth;<span class="comment">//æ·±åº¦</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// éå†æ»‘çª—å†…æ‰€æœ‰çš„Featuresï¼Œä»¥vector&lt;SFMFeature&gt;å½¢å¼ä¿å­˜æ»‘çª—å†…æ‰€æœ‰ç‰¹å¾ç‚¹</span></span><br><span class="line"><span class="built_in">vector</span>&lt;SFMFeature&gt; sfm_f;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it_per_id : f_manager.feature)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> imu_j = it_per_id.start_frame - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    SFMFeature tmp_feature;</span><br><span class="line">    tmp_feature.state = <span class="literal">false</span>;</span><br><span class="line">    tmp_feature.id = it_per_id.feature_id;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it_per_frame : it_per_id.feature_per_frame)</span><br><span class="line">    &#123;</span><br><span class="line">        imu_j++;</span><br><span class="line">        Vector3d pts_j = it_per_frame.point;</span><br><span class="line">        tmp_feature.observation.push_back(make_pair(imu_j, Eigen::Vector2d&#123;pts_j.x(), pts_j.y()&#125;));</span><br><span class="line">    &#125;</span><br><span class="line">    sfm_f.push_back(tmp_feature);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></sfmfeature></li>
<li>3.relativePose()æ¢å¤å‡ºRã€t</li>
</ul>
<blockquote>
<p> 1.å…ˆé€šè¿‡ FeatureManager::getCorresponding()è·å–æ»‘åŠ¨çª—å£ä¸­ç¬¬iå¸§å’Œæœ€åä¸€å¸§çš„ç‰¹å¾åŒ¹é…corres<br> 2.å¦‚æœç¬¬iå¸§å’Œæœ€åä¸€å¸§çš„ç‰¹å¾åŒ¹é…æ•°correså¤§äº20ï¼Œä¸”æ‰€æœ‰åŒ¹é…çš„ç‰¹å¾ç‚¹çš„å¹³å‡è§†å·®å¤§äºä¸€å®šé˜ˆå€¼ï¼Œé€šè¿‡solveRelativeRTï¼ˆå®šä¹‰åœ¨solv_5pts.cppç±»ä¸­ï¼‰ç”¨äº”ç‚¹æ³•æ±‚æœ¬è´¨çŸ©é˜µcv::findFundamentalMat è®¡ç®—å‡ºå½“å‰å¸§åˆ°å‚è€ƒå¸§çš„ T</p>
<p> å€¼å¾—æ³¨æ„ï¼šrelativePoseå¾—åˆ°çš„ä½å§¿æ˜¯ç¬¬lå¸§çš„ï¼Œç¬¬lå¸§çš„ç­›é€‰æ˜¯ä»ç¬¬ä¸€å¸§å¼€å§‹åˆ°æ»‘åŠ¨çª—å£æ‰€æœ‰å¸§ä¸­ä¸€å¼€å§‹æ»¡è¶³å¹³å‡è§†å·®è¶³å¤Ÿå¤§çš„å¸§ï¼Œè¿™é‡Œçš„ç¬¬lå¸§ä¼šä½œä¸ºå‚è€ƒå¸§åˆ°ä¸‹é¢çš„å…¨å±€SFMä½¿ç”¨ã€‚è¿™æ ·å¾—åˆ°å›¾åƒçš„ç‰¹å¾ç‚¹2dåæ ‡çš„æå–ï¼Œç›¸æœºç¬¬lå¸§å’Œæœ€åä¸€å¸§ä¹‹é—´çš„æ—‹è½¬å’Œå¹³ç§»</p>
</blockquote>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!relativePose(relative_R, relative_T, l))</span><br><span class="line">&#123;</span><br><span class="line">    ROS_INFO(<span class="string">"Not enough features or parallax; Move device around"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <strong>bool relativePose(relative_R, relative_T, l)</strong><br>   è¯¥å‡½æ•°åˆ¤æ–­æ¯å¸§åˆ°çª—å£æœ€åä¸€å¸§å¯¹åº”ç‰¹å¾ç‚¹çš„å¹³å‡è§†å·®å¤§äº30ï¼Œä¸”å†…ç‚¹æ•°ç›®å¤§äº12åˆ™å¯è¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒæ—¶è¿”å›å½“å‰å¸§åˆ°ç¬¬lå¸§çš„åæ ‡ç³»å˜æ¢Rå’ŒT<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> Estimator::relativePose(Matrix3d &amp;relative_R, Vector3d &amp;relative_T, <span class="keyword">int</span> &amp;l) &#123;</span><br><span class="line">    <span class="comment">// find previous frame which contians enough correspondance and parallex with newest frame</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨æ»‘çª—å†…å¯»æ‰¾ä¸æœ€æ–°çš„å…³é”®å¸§å…±è§†ç‚¹è¶…è¿‡20(åƒç´ ç‚¹)çš„å…³é”®å¸§</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; WINDOW_SIZE; i++) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;Vector3d, Vector3d&gt;&gt; corres;</span><br><span class="line">        <span class="comment">//è·å–ç¬¬iå¸§å’Œæœ€åä¸€å¸§çš„ç‰¹å¾åŒ¹é…corres</span></span><br><span class="line">        corres = f_manager.getCorresponding(i, WINDOW_SIZE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…±è§†çš„Featuresåº”è¯¥å¤§äº20</span></span><br><span class="line">        <span class="keyword">if</span> (corres.size() &gt; <span class="number">20</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ±‚å–åŒ¹é…çš„ç‰¹å¾ç‚¹åœ¨å›¾åƒä¸Šçš„è§†å·®å’Œ(å½’ä¸€åŒ–å¹³é¢ä¸Š)</span></span><br><span class="line">            <span class="keyword">double</span> sum_parallax = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="keyword">int</span>(corres.size()); j++) &#123;</span><br><span class="line">                <span class="function">Vector2d <span class="title">pts_0</span><span class="params">(corres[j].first(<span class="number">0</span>), corres[j].first(<span class="number">1</span>))</span></span>;</span><br><span class="line">                <span class="function">Vector2d <span class="title">pts_1</span><span class="params">(corres[j].second(<span class="number">0</span>), corres[j].second(<span class="number">1</span>))</span></span>;</span><br><span class="line">                <span class="keyword">double</span> parallax = (pts_0 - pts_1).norm();</span><br><span class="line">                sum_parallax = sum_parallax + parallax;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ±‚å–æ‰€æœ‰åŒ¹é…çš„ç‰¹å¾ç‚¹çš„å¹³å‡è§†å·®</span></span><br><span class="line">            <span class="keyword">double</span> average_parallax = <span class="number">1.0</span> * sum_parallax / <span class="keyword">int</span>(corres.size());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è§†å·®å¤§äºä¸€å®šé˜ˆå€¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿæœ‰æ•ˆåœ°æ±‚è§£å‡ºå˜æ¢çŸ©é˜µ</span></span><br><span class="line">            <span class="keyword">if</span> (average_parallax * <span class="number">460</span> &gt; <span class="number">30</span> &amp;&amp; m_estimator.solveRelativeRT(corres, relative_R, relative_T)) &#123;</span><br><span class="line">                l = i;</span><br><span class="line">                ROS_DEBUG(<span class="string">"average_parallax %f choose l %d and newest frame to triangulate the whole structure"</span>,</span><br><span class="line">                          average_parallax * <span class="number">460</span>, l);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>FeatureManager::getCorresponding()</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;pair&lt;Vector3d, Vector3d&gt;&gt; FeatureManager::getCorresponding(<span class="keyword">int</span> frame_count_l, <span class="keyword">int</span> frame_count_r) &#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;pair&lt;Vector3d, Vector3d&gt;&gt; corres;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it : feature) &#123;</span><br><span class="line">        <span class="comment">// ä¿è¯ä¸¤å¸§çš„idå¤§äºå½“å‰ç‰¹å¾ç‚¹çš„èµ·å§‹idå°äºå½“å‰ç‰¹å¾ç‚¹çš„ç»ˆæ­¢id</span></span><br><span class="line">        <span class="keyword">if</span> (it.start_frame &lt;= frame_count_l &amp;&amp; it.endFrame() &gt;= frame_count_r) &#123;</span><br><span class="line">            <span class="keyword">int</span> idx_l = frame_count_l - it.start_frame;</span><br><span class="line">            <span class="keyword">int</span> idx_r = frame_count_r - it.start_frame;</span><br><span class="line"></span><br><span class="line">            Vector3d a = it.feature_per_frame[idx_l].point;</span><br><span class="line">            Vector3d b = it.feature_per_frame[idx_r].point;</span><br><span class="line"></span><br><span class="line">            corres.push_back(make_pair(a, b));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> corres;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>solveRelativeRT()</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> MotionEstimator::solveRelativeRT(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;pair&lt;Vector3d, Vector3d&gt;&gt; &amp;corres, Matrix3d &amp;Rotation, Vector3d &amp;Translation)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (corres.size() &gt;= <span class="number">15</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//! Step1ï¼šæå–åŒ¹é…å®Œçš„Features</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;cv::Point2f&gt; ll, rr;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">int</span>(corres.size()); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            ll.push_back(cv::Point2f(corres[i].first(<span class="number">0</span>), corres[i].first(<span class="number">1</span>)));</span><br><span class="line">            rr.push_back(cv::Point2f(corres[i].second(<span class="number">0</span>), corres[i].second(<span class="number">1</span>)));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cv::Mat mask;</span><br><span class="line">        <span class="comment">//! Step2ï¼šåˆ©ç”¨Ransacç®—æ³•è®¡ç®—æœ¬è´¨çŸ©é˜µï¼Œå†…å¤–ç‚¹çš„é˜ˆå€¼è·ç¦»è®¾å®šä¸º0.3 / 460</span></span><br><span class="line">        cv::Mat E = cv::findFundamentalMat(ll, rr, cv::FM_RANSAC, <span class="number">0.3</span> / <span class="number">460</span>, <span class="number">0.99</span>, mask);</span><br><span class="line"></span><br><span class="line">        cv::Mat cameraMatrix = (cv::Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//! Step3ï¼šè®¡ç®—å˜æ¢çŸ©é˜µå¹¶å¾—åˆ°å†…ç‚¹ä¸ªæ•°</span></span><br><span class="line">        cv::Mat rot, trans;</span><br><span class="line">        <span class="keyword">int</span> inlier_cnt = cv::recoverPose(E, ll, rr, cameraMatrix, rot, trans, mask);</span><br><span class="line">        <span class="comment">//cout &lt;&lt; "inlier_cnt " &lt;&lt; inlier_cnt &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//! å¾—åˆ°å˜æ¢çŸ©é˜µ ll ==&gt; rr</span></span><br><span class="line">        Eigen::Matrix3d R;</span><br><span class="line">        Eigen::Vector3d T;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">        &#123;   </span><br><span class="line">            T(i) = trans.at&lt;<span class="keyword">double</span>&gt;(i, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">                R(i, j) = rot.at&lt;<span class="keyword">double</span>&gt;(i, j);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//! Step4ï¼šå¾—åˆ°æ—‹è½¬çŸ©é˜µå’Œå¹³ç§»é‡ rr ==&gt; ll</span></span><br><span class="line">        Rotation    =  R.transpose();</span><br><span class="line">        Translation = -R.transpose() * T;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//! åˆ¤æ–­æ±‚å–çš„å†…ç‚¹ä¸ªæ•°æ˜¯å¦æ»¡è¶³è¦æ±‚</span></span><br><span class="line">        <span class="keyword">if</span>(inlier_cnt &gt; <span class="number">12</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>4.å¯¹çª—å£ä¸­æ¯ä¸ªå›¾åƒå¸§æ±‚è§£sfmé—®é¢˜ï¼Œè°ƒç”¨sfm.construct(frame_count + 1, Q, T,l,relative_R, relative_T,sfm_f, sfm_tracked_points)ä¼°è®¡slidingwindowä¸­æ‰€æœ‰å›¾åƒå¸§ç›¸å¯¹äºå‚è€ƒå¸§ï¼ˆè¿™é‡Œä»¥ç¬¬lå¸§ä½œä¸ºå‚è€ƒå¸§ï¼‰çš„æ—‹è½¬å››å…ƒæ•°Qã€å¹³ç§»å‘é‡Tå’Œç‰¹å¾ç‚¹åæ ‡sfm_tracked_pointsã€‚</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸‰è§’åŒ–æ¢å¤æ»‘çª—å†…çš„Features</span></span><br><span class="line">GlobalSFM sfm;</span><br><span class="line">Quaterniond Q[frame_count + <span class="number">1</span>];</span><br><span class="line">Vector3d    T[frame_count + <span class="number">1</span>];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, Vector3d&gt; sfm_tracked_points;</span><br><span class="line"><span class="keyword">if</span>(!sfm.construct(frame_count + <span class="number">1</span>, Q, T, l, relative_R, relative_T, sfm_f, sfm_tracked_points))</span><br><span class="line">&#123;</span><br><span class="line">    ROS_DEBUG(<span class="string">"global SFM failed!"</span>);</span><br><span class="line">    marginalization_flag = MARGIN_OLD;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>bool GlobalSFM::construct()</strong><br>å‡½æ•°ä½äºinital_sfm.cppæ–‡ä»¶ä¸­<br>çº¯è§†è§‰sfmï¼Œæ±‚è§£çª—å£ä¸­æ‰€æœ‰å›¾åƒå¸§çš„ä½å§¿QTï¼ˆç›¸å¯¹äºç¬¬lå¸§ï¼‰å’Œç‰¹å¾ç‚¹åæ ‡sfm_tracked_points<br>frame_num=frame_count + 1=11ï¼Œframe_num-1è¡¨ç¤ºå½“å‰å¸§</p>
<blockquote>
<p>1.æŠŠç¬¬lå¸§çœ‹ä½œå‚è€ƒåæ ‡ç³»ï¼Œæ ¹æ®å½“å‰å¸§åˆ°ç¬¬lå¸§çš„relative_Rï¼Œrelative_Tï¼Œå¾—åˆ°å½“å‰å¸§åœ¨å‚è€ƒåæ ‡ç³»ä¸‹çš„ä½å§¿ï¼Œä¹‹åçš„pose[i]è¡¨ç¤ºç¬¬lå¸§åˆ°ç¬¬iå¸§çš„å˜æ¢çŸ©é˜µ[R|T]<br>2.ä¸‰è§’åŒ–ç¬¬lå¸§ï¼ˆå‚è€ƒå¸§ï¼‰ä¸ç¬¬frame_num-1å¸§ï¼ˆå½“å‰å¸§ï¼‰çš„è·¯æ ‡ç‚¹<br>3.pnpæ±‚è§£å‚è€ƒåæ ‡ç³»åˆ°ç¬¬l+1å¼€å§‹çš„æ¯ä¸€å¸§çš„å˜æ¢çŸ©é˜µR_initial, P_initialï¼Œä¿å­˜åœ¨Poseä¸­ï¼Œå¹¶ä¸å½“å‰å¸§è¿›è¡Œä¸‰è§’åŒ–<br>4.å¯¹ç¬¬lå¸§ä¸ä»ç¬¬l+1åˆ°frame_num-2çš„æ¯ä¸€å¸§å†è¿›è¡Œä¸‰è§’åŒ–<br>5.PNPæ±‚è§£å‚è€ƒåæ ‡ç³»åˆ°ä»ç¬¬l-1åˆ°ç¬¬0å¸§çš„æ¯ä¸€å¸§ä¹‹é—´çš„å˜æ¢çŸ©é˜µï¼Œå¹¶è¿›è¡Œä¸‰è§’åŒ–<br>6.ä¸‰è§’åŒ–å…¶ä»–æœªæ¢å¤çš„ç‰¹å¾ç‚¹ã€‚è‡³æ­¤å¾—åˆ°äº†æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å›¾åƒå¸§çš„ä½å§¿ä»¥åŠç‰¹å¾ç‚¹çš„3dåæ ‡<br>7.ä½¿ç”¨caresè¿›è¡Œå…¨å±€BAä¼˜åŒ–<br>8.å¾—åˆ°çš„æ˜¯ç¬¬lå¸§åæ ‡ç³»åˆ°å„å¸§çš„å˜æ¢çŸ©é˜µï¼Œå°†å…¶è½¬å˜ä¸ºæ¯ä¸€å¸§åœ¨ç¬¬lå¸§åæ ‡ç³»ä¸Šçš„ä½å§¿<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> GlobalSFM::construct(<span class="keyword">int</span> frame_num, Quaterniond* q, Vector3d* T, <span class="keyword">int</span> l,</span><br><span class="line">			  <span class="keyword">const</span> Matrix3d relative_R, <span class="keyword">const</span> Vector3d relative_T,</span><br><span class="line">			  <span class="built_in">vector</span>&lt;SFMFeature&gt; &amp;sfm_f, <span class="built_in">map</span>&lt;<span class="keyword">int</span>, Vector3d&gt; &amp;sfm_tracked_points)</span><br><span class="line">&#123;</span><br><span class="line">	feature_num = sfm_f.size();</span><br><span class="line">	<span class="comment">//cout &lt;&lt; "set 0 and " &lt;&lt; l &lt;&lt; " as known " &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">// have relative_r relative_t</span></span><br><span class="line">	<span class="comment">// intial two view</span></span><br><span class="line">	q[l].w() = <span class="number">1</span>;</span><br><span class="line">	q[l].x() = <span class="number">0</span>;</span><br><span class="line">	q[l].y() = <span class="number">0</span>;</span><br><span class="line">	q[l].z() = <span class="number">0</span>;</span><br><span class="line">	T[l].setZero();</span><br><span class="line">	q[frame_num - <span class="number">1</span>] = q[l] * Quaterniond(relative_R);</span><br><span class="line">	T[frame_num - <span class="number">1</span>] = relative_T;</span><br><span class="line">	<span class="comment">//cout &lt;&lt; "init q_l " &lt;&lt; q[l].w() &lt;&lt; " " &lt;&lt; q[l].vec().transpose() &lt;&lt; endl;</span></span><br><span class="line">	<span class="comment">//cout &lt;&lt; "init t_l " &lt;&lt; T[l].transpose() &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//rotate to cam frame</span></span><br><span class="line">	Matrix3d c_Rotation[frame_num];</span><br><span class="line">	Vector3d c_Translation[frame_num];</span><br><span class="line">	Quaterniond c_Quat[frame_num];</span><br><span class="line">	<span class="keyword">double</span> c_rotation[frame_num][<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">double</span> c_translation[frame_num][<span class="number">3</span>];</span><br><span class="line">	Eigen::Matrix&lt;<span class="keyword">double</span>, <span class="number">3</span>, <span class="number">4</span>&gt; Pose[frame_num];</span><br><span class="line"></span><br><span class="line">	c_Quat[l] = q[l].inverse();</span><br><span class="line">	c_Rotation[l] = c_Quat[l].toRotationMatrix();</span><br><span class="line">	c_Translation[l] = <span class="number">-1</span> * (c_Rotation[l] * T[l]);</span><br><span class="line">	Pose[l].block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) = c_Rotation[l];</span><br><span class="line">	Pose[l].block&lt;<span class="number">3</span>, <span class="number">1</span>&gt;(<span class="number">0</span>, <span class="number">3</span>) = c_Translation[l];</span><br><span class="line"></span><br><span class="line">	c_Quat[frame_num - <span class="number">1</span>] = q[frame_num - <span class="number">1</span>].inverse();</span><br><span class="line">	c_Rotation[frame_num - <span class="number">1</span>] = c_Quat[frame_num - <span class="number">1</span>].toRotationMatrix();</span><br><span class="line">	c_Translation[frame_num - <span class="number">1</span>] = <span class="number">-1</span> * (c_Rotation[frame_num - <span class="number">1</span>] * T[frame_num - <span class="number">1</span>]);</span><br><span class="line">	Pose[frame_num - <span class="number">1</span>].block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) = c_Rotation[frame_num - <span class="number">1</span>];</span><br><span class="line">	Pose[frame_num - <span class="number">1</span>].block&lt;<span class="number">3</span>, <span class="number">1</span>&gt;(<span class="number">0</span>, <span class="number">3</span>) = c_Translation[frame_num - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//1: trangulate between l ----- frame_num - 1</span></span><br><span class="line">	<span class="comment">//2: solve pnp l + 1; trangulate l + 1 ------- frame_num - 1; </span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt; frame_num - <span class="number">1</span> ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// solve pnp</span></span><br><span class="line">		<span class="comment">//pnpæ±‚è§£å‚è€ƒåæ ‡ç³»åˆ°ç¬¬l+1å¼€å§‹çš„æ¯ä¸€å¸§çš„å˜æ¢çŸ©é˜µR_initial, P_initialï¼Œä¿å­˜åœ¨Poseä¸­</span></span><br><span class="line">		<span class="keyword">if</span> (i &gt; l)</span><br><span class="line">		&#123;</span><br><span class="line">			Matrix3d R_initial = c_Rotation[i - <span class="number">1</span>];</span><br><span class="line">			Vector3d P_initial = c_Translation[i - <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">if</span>(!solveFrameByPnP(R_initial, P_initial, i, sfm_f))</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			c_Rotation[i] = R_initial;</span><br><span class="line">			c_Translation[i] = P_initial;</span><br><span class="line">			c_Quat[i] = c_Rotation[i];</span><br><span class="line">			Pose[i].block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) = c_Rotation[i];</span><br><span class="line">			Pose[i].block&lt;<span class="number">3</span>, <span class="number">1</span>&gt;(<span class="number">0</span>, <span class="number">3</span>) = c_Translation[i];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// triangulate point based on the solve pnp result</span></span><br><span class="line">		triangulateTwoFrames(i, Pose[i], frame_num - <span class="number">1</span>, Pose[frame_num - <span class="number">1</span>], sfm_f);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//3: triangulate l-----l+1 l+2 ... frame_num -2</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt; frame_num - <span class="number">1</span>; i++)</span><br><span class="line">		triangulateTwoFrames(l, Pose[l], i, Pose[i], sfm_f);</span><br><span class="line">	<span class="comment">//4: solve pnp l-1; triangulate l-1 ----- l</span></span><br><span class="line">	<span class="comment">//             l-2              l-2 ----- l</span></span><br><span class="line">	<span class="comment">//PNPæ±‚è§£å‚è€ƒåæ ‡ç³»åˆ°ä»ç¬¬l-1åˆ°ç¬¬0å¸§çš„æ¯ä¸€å¸§ä¹‹é—´çš„å˜æ¢çŸ©é˜µï¼Œå¹¶è¿›è¡Œä¸‰è§’åŒ–</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = l - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//solve pnp</span></span><br><span class="line">		Matrix3d R_initial = c_Rotation[i + <span class="number">1</span>];</span><br><span class="line">		Vector3d P_initial = c_Translation[i + <span class="number">1</span>];</span><br><span class="line">		<span class="keyword">if</span>(!solveFrameByPnP(R_initial, P_initial, i, sfm_f))</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		c_Rotation[i] = R_initial;</span><br><span class="line">		c_Translation[i] = P_initial;</span><br><span class="line">		c_Quat[i] = c_Rotation[i];</span><br><span class="line">		Pose[i].block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) = c_Rotation[i];</span><br><span class="line">		Pose[i].block&lt;<span class="number">3</span>, <span class="number">1</span>&gt;(<span class="number">0</span>, <span class="number">3</span>) = c_Translation[i];</span><br><span class="line">		<span class="comment">//triangulate</span></span><br><span class="line">		triangulateTwoFrames(i, Pose[i], l, Pose[l], sfm_f);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//5: triangulate all other points</span></span><br><span class="line">	<span class="comment">//ä¸‰è§’åŒ–å…¶ä»–æœªæ¢å¤çš„ç‰¹å¾ç‚¹ã€‚è‡³æ­¤å¾—åˆ°äº†æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å›¾åƒå¸§çš„ä½å§¿ä»¥åŠç‰¹å¾ç‚¹çš„3dåæ ‡</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; feature_num; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (sfm_f[j].state == <span class="literal">true</span>)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> ((<span class="keyword">int</span>)sfm_f[j].observation.size() &gt;= <span class="number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Vector2d point0, point1;</span><br><span class="line">			<span class="keyword">int</span> frame_0 = sfm_f[j].observation[<span class="number">0</span>].first;</span><br><span class="line">			point0 = sfm_f[j].observation[<span class="number">0</span>].second;</span><br><span class="line">			<span class="keyword">int</span> frame_1 = sfm_f[j].observation.back().first;</span><br><span class="line">			point1 = sfm_f[j].observation.back().second;</span><br><span class="line">			Vector3d point_3d;</span><br><span class="line">			triangulatePoint(Pose[frame_0], Pose[frame_1], point0, point1, point_3d);</span><br><span class="line">			sfm_f[j].state = <span class="literal">true</span>;</span><br><span class="line">			sfm_f[j].position[<span class="number">0</span>] = point_3d(<span class="number">0</span>);</span><br><span class="line">			sfm_f[j].position[<span class="number">1</span>] = point_3d(<span class="number">1</span>);</span><br><span class="line">			sfm_f[j].position[<span class="number">2</span>] = point_3d(<span class="number">2</span>);</span><br><span class="line">			<span class="comment">//cout &lt;&lt; "trangulated : " &lt;&lt; frame_0 &lt;&lt; " " &lt;&lt; frame_1 &lt;&lt; "  3d point : "  &lt;&lt; j &lt;&lt; "  " &lt;&lt; point_3d.transpose() &lt;&lt; endl;</span></span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	for (int i = 0; i &lt; frame_num; i++)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		q[i] = c_Rotation[i].transpose(); </span></span><br><span class="line"><span class="comment">		cout &lt;&lt; "solvePnP  q" &lt;&lt; " i " &lt;&lt; i &lt;&lt;"  " &lt;&lt;q[i].w() &lt;&lt; "  " &lt;&lt; q[i].vec().transpose() &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	for (int i = 0; i &lt; frame_num; i++)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		Vector3d t_tmp;</span></span><br><span class="line"><span class="comment">		t_tmp = -1 * (q[i] * c_Translation[i]);</span></span><br><span class="line"><span class="comment">		cout &lt;&lt; "solvePnP  t" &lt;&lt; " i " &lt;&lt; i &lt;&lt;"  " &lt;&lt; t_tmp.x() &lt;&lt;"  "&lt;&lt; t_tmp.y() &lt;&lt;"  "&lt;&lt; t_tmp.z() &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	<span class="comment">//full BA</span></span><br><span class="line">	<span class="comment">//ä½¿ç”¨caresè¿›è¡Œå…¨å±€BAä¼˜åŒ–</span></span><br><span class="line">	ceres::Problem problem;</span><br><span class="line">	ceres::LocalParameterization* local_parameterization = <span class="keyword">new</span> ceres::QuaternionParameterization();</span><br><span class="line">	<span class="comment">//cout &lt;&lt; " begin full BA " &lt;&lt; endl;</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; frame_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//double array for ceres</span></span><br><span class="line">		c_translation[i][<span class="number">0</span>] = c_Translation[i].x();</span><br><span class="line">		c_translation[i][<span class="number">1</span>] = c_Translation[i].y();</span><br><span class="line">		c_translation[i][<span class="number">2</span>] = c_Translation[i].z();</span><br><span class="line">		c_rotation[i][<span class="number">0</span>] = c_Quat[i].w();</span><br><span class="line">		c_rotation[i][<span class="number">1</span>] = c_Quat[i].x();</span><br><span class="line">		c_rotation[i][<span class="number">2</span>] = c_Quat[i].y();</span><br><span class="line">		c_rotation[i][<span class="number">3</span>] = c_Quat[i].z();</span><br><span class="line">		problem.AddParameterBlock(c_rotation[i], <span class="number">4</span>, local_parameterization);</span><br><span class="line">		problem.AddParameterBlock(c_translation[i], <span class="number">3</span>);</span><br><span class="line">		<span class="keyword">if</span> (i == l)</span><br><span class="line">		&#123;</span><br><span class="line">			problem.SetParameterBlockConstant(c_rotation[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (i == l || i == frame_num - <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			problem.SetParameterBlockConstant(c_translation[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; feature_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (sfm_f[i].state != <span class="literal">true</span>)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="keyword">int</span>(sfm_f[i].observation.size()); j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> l = sfm_f[i].observation[j].first;</span><br><span class="line">			ceres::CostFunction* cost_function = ReprojectionError3D::Create(</span><br><span class="line">												sfm_f[i].observation[j].second.x(),</span><br><span class="line">												sfm_f[i].observation[j].second.y());</span><br><span class="line"></span><br><span class="line">    		problem.AddResidualBlock(cost_function, <span class="literal">NULL</span>, c_rotation[l], c_translation[l], </span><br><span class="line">    								sfm_f[i].position);	 </span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	ceres::Solver::Options options;</span><br><span class="line">	options.linear_solver_type = ceres::DENSE_SCHUR;</span><br><span class="line">	<span class="comment">//options.minimizer_progress_to_stdout = true;</span></span><br><span class="line">	options.max_solver_time_in_seconds = <span class="number">0.2</span>;</span><br><span class="line">	ceres::Solver::Summary summary;</span><br><span class="line">	ceres::Solve(options, &amp;problem, &amp;summary);</span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; summary.BriefReport() &lt;&lt; "\n";</span></span><br><span class="line">	<span class="keyword">if</span> (summary.termination_type == ceres::CONVERGENCE || summary.final_cost &lt; <span class="number">5e-03</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//cout &lt;&lt; "vision only BA converge" &lt;&lt; endl;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//cout &lt;&lt; "vision only BA not converge " &lt;&lt; endl;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; frame_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		q[i].w() = c_rotation[i][<span class="number">0</span>]; </span><br><span class="line">		q[i].x() = c_rotation[i][<span class="number">1</span>]; </span><br><span class="line">		q[i].y() = c_rotation[i][<span class="number">2</span>]; </span><br><span class="line">		q[i].z() = c_rotation[i][<span class="number">3</span>]; </span><br><span class="line">		q[i] = q[i].inverse();</span><br><span class="line">		<span class="comment">//cout &lt;&lt; "final  q" &lt;&lt; " i " &lt;&lt; i &lt;&lt;"  " &lt;&lt;q[i].w() &lt;&lt; "  " &lt;&lt; q[i].vec().transpose() &lt;&lt; endl;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ç¬¬lå¸§åæ ‡ç³»åˆ°å„å¸§çš„å˜æ¢çŸ©é˜µï¼Œåº”å°†å…¶è½¬å˜ä¸ºæ¯ä¸€å¸§åœ¨ç¬¬lå¸§åæ ‡ç³»ä¸Šçš„ä½å§¿</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; frame_num; i++)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		T[i] = <span class="number">-1</span> * (q[i] * Vector3d(c_translation[i][<span class="number">0</span>], c_translation[i][<span class="number">1</span>], c_translation[i][<span class="number">2</span>]));</span><br><span class="line">		<span class="comment">//cout &lt;&lt; "final  t" &lt;&lt; " i " &lt;&lt; i &lt;&lt;"  " &lt;&lt; T[i](0) &lt;&lt;"  "&lt;&lt; T[i](1) &lt;&lt;"  "&lt;&lt; T[i](2) &lt;&lt; endl;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)sfm_f.size(); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(sfm_f[i].state)</span><br><span class="line">			sfm_tracked_points[sfm_f[i].id] = Vector3d(sfm_f[i].position[<span class="number">0</span>], sfm_f[i].position[<span class="number">1</span>], sfm_f[i].position[<span class="number">2</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>å¯¹äºæ‰€æœ‰çš„å›¾åƒå¸§ï¼ŒåŒ…æ‹¬ä¸åœ¨æ»‘åŠ¨çª—å£ä¸­çš„ï¼Œæä¾›åˆå§‹çš„RTä¼°è®¡ï¼Œç„¶åsolvePnPè¿›è¡Œä¼˜åŒ–</li>
</ol>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// solve pnp for all frame</span></span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, Vector3d&gt;::iterator it;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">double</span>, ImageFrame&gt;::iterator frame_it = all_image_frame.begin( );</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; frame_it != all_image_frame.end( ); frame_it++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// provide initial guess</span></span><br><span class="line">    <span class="keyword">if</span>((frame_it-&gt;first) == Headers[i].stamp.toSec())</span><br><span class="line">    &#123;</span><br><span class="line">        frame_it-&gt;second.is_key_frame = <span class="literal">true</span>;</span><br><span class="line">        frame_it-&gt;second.R = Q[i].toRotationMatrix() * RIC[<span class="number">0</span>].transpose();</span><br><span class="line">        frame_it-&gt;second.T = T[i];</span><br><span class="line">        i++;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((frame_it-&gt;first) &gt; Headers[i].stamp.toSec())</span><br><span class="line">    &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ»‘çª—å†…ç¬¬iå¸§çš„å˜æ¢çŸ©é˜µå½“åšåˆå§‹å€¼</span></span><br><span class="line">    Matrix3d R_inital = (Q[i].inverse()).toRotationMatrix();</span><br><span class="line">    Vector3d P_inital = - R_inital * T[i];</span><br><span class="line">    cv::Mat rvec, t, tmp_r;</span><br><span class="line">    cv::eigen2cv(R_inital, tmp_r);</span><br><span class="line">    cv::Rodrigues(tmp_r, rvec);</span><br><span class="line">    cv::eigen2cv(P_inital, t);</span><br><span class="line"></span><br><span class="line">    frame_it-&gt;second.is_key_frame = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;cv::Point3f&gt; pts_3_vector;</span><br><span class="line">    <span class="built_in">vector</span>&lt;cv::Point2f&gt; pts_2_vector;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;id_pts : frame_it-&gt;second.points)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> feature_id = id_pts.first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i_p : id_pts.second)</span><br><span class="line">        &#123;</span><br><span class="line">            it = sfm_tracked_points.find(feature_id);</span><br><span class="line">            <span class="keyword">if</span>(it != sfm_tracked_points.end())</span><br><span class="line">            &#123;</span><br><span class="line">                Vector3d world_pts = it-&gt;second;</span><br><span class="line">                cv::<span class="function">Point3f <span class="title">pts_3</span><span class="params">(world_pts(<span class="number">0</span>), world_pts(<span class="number">1</span>), world_pts(<span class="number">2</span>))</span></span>;</span><br><span class="line">                pts_3_vector.push_back(pts_3);</span><br><span class="line"></span><br><span class="line">                Vector2d img_pts = i_p.second.head&lt;<span class="number">2</span>&gt;();</span><br><span class="line">                cv::<span class="function">Point2f <span class="title">pts_2</span><span class="params">(img_pts(<span class="number">0</span>), img_pts(<span class="number">1</span>))</span></span>;</span><br><span class="line">                pts_2_vector.push_back(pts_2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pts_3_vector.size() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"pts_3_vector size "</span> &lt;&lt; pts_3_vector.size() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        ROS_DEBUG(<span class="string">"Not enough points for solve pnp !"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cv::Mat K = (cv::Mat_&lt;<span class="keyword">double</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    cv::Mat D;</span><br><span class="line">    <span class="keyword">if</span> (! cv::solvePnP(pts_3_vector, pts_2_vector, K, D, rvec, t, <span class="literal">true</span>)) &#123;</span><br><span class="line">        ROS_DEBUG(<span class="string">"solve pnp fail!"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// PnPæ±‚è§£å‡ºçš„ä½å§¿è¦å–é€†</span></span><br><span class="line">    MatrixXd R_pnp;</span><br><span class="line">    MatrixXd T_pnp;</span><br><span class="line">    &#123;</span><br><span class="line">        cv::Mat r;</span><br><span class="line">        cv::Rodrigues(rvec, r);</span><br><span class="line">        MatrixXd tmp_R_pnp;</span><br><span class="line">        cv::cv2eigen(r, tmp_R_pnp);</span><br><span class="line">        R_pnp = tmp_R_pnp.transpose();</span><br><span class="line"></span><br><span class="line">        cv::cv2eigen(t, T_pnp);</span><br><span class="line">        T_pnp = R_pnp * (-T_pnp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è½¬æ¢åˆ°IMUåæ ‡ç³»ä¸‹</span></span><br><span class="line">    frame_it-&gt;second.R = R_pnp * RIC[<span class="number">0</span>].transpose();</span><br><span class="line">    frame_it-&gt;second.T = T_pnp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>6.è¿›è¡Œè§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–ï¼Œimuä¸è§†è§‰å¯¹é½ï¼Œè·å–ç»å¯¹å°ºåº¦sã€é™€èºä»ªåç½®bgã€åŠ é€Ÿåº¦åç½®baã€é‡åŠ›åŠ é€Ÿåº¦Gå’Œæ¯ä¸ªIMUæ—¶åˆ»çš„é€Ÿåº¦v</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è§†è§‰ä¸IMUå¯¹é½</span></span><br><span class="line"><span class="keyword">if</span> (visualInitialAlign())</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    ROS_INFO(<span class="string">"misalign visual structure with IMU"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>bool Estimator::visualInitialAlign()</strong><br>è¯¥å‡½æ•°ä¸»è¦å®ç°äº†é™€èºä»ªçš„åç½®æ ¡å‡†(åŠ é€Ÿåº¦åç½®æ²¡æœ‰å¤„ç†)ï¼Œè®¡ç®—é€Ÿåº¦V[0:n]ã€é‡åŠ›gã€å°ºåº¦sã€‚<br>åŒæ—¶æ›´æ–°äº†Bgsåï¼ŒIMUæµ‹é‡é‡éœ€è¦repropagateï¼›å¾—åˆ°å°ºåº¦så’Œé‡åŠ›gçš„æ–¹å‘åï¼Œéœ€æ›´æ–°æ‰€æœ‰å›¾åƒå¸§åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„Psã€Rsã€Vsã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> Estimator::visualInitialAlign()</span><br><span class="line">&#123;</span><br><span class="line">    TicToc t_g;</span><br><span class="line"></span><br><span class="line">    VectorXd x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//solve scale</span></span><br><span class="line">    <span class="comment">// è¦æ³¨æ„è¿™ä¸ªåœ°æ–¹æ±‚è§£å‡ºçš„gæ˜¯åœ¨C0åæ ‡ç³»ä¸‹</span></span><br><span class="line">    <span class="comment">//1.è®¡ç®—é™€èºä»ªåç½®ï¼Œå°ºåº¦ï¼Œé‡åŠ›åŠ é€Ÿåº¦å’Œé€Ÿåº¦</span></span><br><span class="line">    <span class="keyword">bool</span> result = VisualIMUAlignment(all_image_frame, Bgs, g, x);</span><br><span class="line">    <span class="keyword">if</span>(!result) &#123;</span><br><span class="line">        ROS_DEBUG(<span class="string">"solve g failed!"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// change state</span></span><br><span class="line">    <span class="comment">//2.è·å–æ‰€æœ‰å›¾åƒå¸§çš„ä½å§¿Psã€Rsï¼Œå¹¶å°†å…¶ç½®ä¸ºå…³é”®å¸§</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= frame_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Matrix3d Ri = all_image_frame[Headers[i].stamp.toSec()].R;</span><br><span class="line">        Vector3d Pi = all_image_frame[Headers[i].stamp.toSec()].T;</span><br><span class="line">        Ps[i] = Pi;</span><br><span class="line">        Rs[i] = Ri;</span><br><span class="line">        all_image_frame[Headers[i].stamp.toSec()].is_key_frame = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ‰€æœ‰ç‰¹å¾ç‚¹çš„æ·±åº¦ç½®ä¸º-1</span></span><br><span class="line">    VectorXd dep = f_manager.getDepthVector();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; dep.size(); i++)</span><br><span class="line">        dep[i] = <span class="number">-1</span>;</span><br><span class="line">    f_manager.clearDepth(dep);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//triangulat on cam pose , no tic</span></span><br><span class="line">    <span class="comment">//3.é‡æ–°è®¡ç®—ç‰¹å¾ç‚¹çš„æ·±åº¦</span></span><br><span class="line">    Vector3d TIC_TMP[NUM_OF_CAM];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_OF_CAM; i++)</span><br><span class="line">        TIC_TMP[i].setZero();</span><br><span class="line">    ric[<span class="number">0</span>] = RIC[<span class="number">0</span>];</span><br><span class="line">    f_manager.setRic(ric);</span><br><span class="line">    f_manager.triangulate(Ps, &amp;(TIC_TMP[<span class="number">0</span>]), &amp;(RIC[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> s = (x.tail&lt;<span class="number">1</span>&gt;())(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//4.é™€èºä»ªçš„åç½®bgsæ”¹å˜ï¼Œé‡æ–°è®¡ç®—é¢„ç§¯åˆ†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= WINDOW_SIZE; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        pre_integrations[i]-&gt;repropagate(Vector3d::Zero(), Bgs[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5.å°†Psã€Vsã€depthå°ºåº¦sç¼©æ”¾åè½¬å˜ä¸ºç›¸å¯¹äºç¬¬0å¸§å›¾åƒåæ ‡ç³»ä¸‹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = frame_count; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        Ps[i] = s * Ps[i] - Rs[i] * TIC[<span class="number">0</span>] - (s * Ps[<span class="number">0</span>] - Rs[<span class="number">0</span>] * TIC[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> kv = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">double</span>, ImageFrame&gt;::iterator frame_i;</span><br><span class="line">    <span class="keyword">for</span> (frame_i = all_image_frame.begin(); frame_i != all_image_frame.end(); frame_i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(frame_i-&gt;second.is_key_frame)</span><br><span class="line">        &#123;</span><br><span class="line">            kv++;</span><br><span class="line">            Vs[kv] = frame_i-&gt;second.R * x.segment&lt;<span class="number">3</span>&gt;(kv * <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;it_per_id : f_manager.feature)</span><br><span class="line">    &#123;</span><br><span class="line">        it_per_id.used_num = it_per_id.feature_per_frame.size();</span><br><span class="line">        <span class="keyword">if</span> (!(it_per_id.used_num &gt;= <span class="number">2</span> &amp;&amp; it_per_id.start_frame &lt; WINDOW_SIZE - <span class="number">2</span>))</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        it_per_id.estimated_depth *= s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.é€šè¿‡å°†é‡åŠ›æ—‹è½¬åˆ°zè½´ä¸Šï¼Œå¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸æ‘„åƒæœºåæ ‡ç³»c0ä¹‹é—´çš„æ—‹è½¬çŸ©é˜µrot_diff</span></span><br><span class="line">    Matrix3d R0 = Utility::g2R(g);</span><br><span class="line">    <span class="keyword">double</span> yaw = Utility::R2ypr(R0 * Rs[<span class="number">0</span>]).x();</span><br><span class="line">    R0 = Utility::ypr2R(Eigen::Vector3d&#123;-yaw, <span class="number">0</span>, <span class="number">0</span>&#125;) * R0;</span><br><span class="line">    g = R0 * g;</span><br><span class="line">    <span class="comment">//Matrix3d rot_diff = R0 * Rs[0].transpose();</span></span><br><span class="line">    Matrix3d rot_diff = R0;</span><br><span class="line">    <span class="comment">//7.æ‰€æœ‰å˜é‡ä»å‚è€ƒåæ ‡ç³»c0æ—‹è½¬åˆ°ä¸–ç•Œåæ ‡ç³»w</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= frame_count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Ps[i] = rot_diff * Ps[i];</span><br><span class="line">        Rs[i] = rot_diff * Rs[i];</span><br><span class="line">        Vs[i] = rot_diff * Vs[i];</span><br><span class="line">    &#125;</span><br><span class="line">    ROS_DEBUG_STREAM(<span class="string">"g0     "</span> &lt;&lt; g.transpose());</span><br><span class="line">    ROS_DEBUG_STREAM(<span class="string">"my R0  "</span> &lt;&lt; Utility::R2ypr(Rs[<span class="number">0</span>]).transpose()); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼š<br><a href="https://blog.csdn.net/qq_41839222/article/details/88942414" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ– initialStructure sfm</a><br><a href="https://blog.csdn.net/wangshuailpp/article/details/78719531" target="_blank" rel="noopener">VINSç†è®ºä¸ä»£ç è¯¦è§£4â€”â€”åˆå§‹åŒ–</a></p>
</blockquote>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
      <tags>
        <tag>VINS</tag>
      </tags>
  </entry>
  <entry>
    <title>17.æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°</title>
    <url>/2019/10/29/17-%E6%89%93%E5%8D%B0%E4%BB%8E1%E5%88%B0%E6%9C%80%E5%A4%A7%E7%9A%84n%E4%BD%8D%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>16.æ•°ç»„çš„æ•´æ•°æ¬¡æ–¹</title>
    <url>/2019/10/29/16.%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B4%E6%95%B0%E6%AC%A1%E6%96%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>15.äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</title>
    <url>/2019/10/29/15.%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚å…¶ä¸­è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºã€‚</p><h1 id="äºŒè¿›åˆ¶çš„5ç§ä½è¿ç®—"><a href="#äºŒè¿›åˆ¶çš„5ç§ä½è¿ç®—" class="headerlink" title="äºŒè¿›åˆ¶çš„5ç§ä½è¿ç®—"></a>äºŒè¿›åˆ¶çš„5ç§ä½è¿ç®—</h1><blockquote>
<p>ä¸ï¼ˆ&amp;ï¼‰</p>
<p>æˆ–ï¼ˆ|ï¼‰</p>
<p>å¼‚æˆ–ï¼ˆ^)</p>
<p>å·¦ç§»(&lt;&lt;)  ï¼šå·¦ç§»nä½æ—¶ï¼Œåšå·¦è¾¹çš„nä½è¢«ä¸¢å¼ƒï¼Œæœ€å³è¾¹ä¸æ˜¯é‚£ä¸ªè¡¥ä¸Šnä¸ª0</p>
<p>å³ç§»(&gt;&gt;)  ï¼šå³ç§»nä½æ—¶ï¼Œæœ€å³è¾¹çš„nä½è¢«ä¸¢å¼ƒ,å·¦è¾¹åˆ†ä¸¤ç§æƒ…å†µ</p>
<blockquote>
<p>1.å¦‚æœæ•°å­—ä¸ºæ­£ï¼Œå³ç§»æœ€å·¦è¾¹è¡¥nä¸ª0</p>
<p>2.å¦‚æœæ•°å­—ä¸ºè´Ÿï¼Œå³ç§»æœ€å·¦è¾¹è¡¥nä¸ª1      </p>
</blockquote>
</blockquote><a id="more"></a>

<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><ol>
<li><p>å…ˆåˆ¤æ–­æ•´æ•°äºŒè¿›åˆ¶æœ€å³è¾¹æ˜¯ä¸æ˜¯1ï¼Œæ¥ç€æŠŠè¾“å…¥çš„æ•´æ•°å³ç§»ä¸€ä½ï¼Œå†åˆ¤æ–­æ˜¯ä¸æ˜¯1ï¼Œç›´åˆ°è¿™ä¸ªæ•´æ•°å˜ä¸º0ä¸ºæ­¢</p>
</li>
<li><p>æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªæ•´æ•°ä¸º1ï¼Ÿ</p>
<blockquote>
<ol>
<li><p>æŠŠæ•´æ•°ä¸1åšä¸è¿ç®—ï¼Œä½†å½“è¾“å…¥æ˜¯è´Ÿæ•°æ—¶ï¼Œå¦‚æœä¸€ç›´å³ç§»è¿ç®—ï¼Œæœ€ç»ˆçš„æ•°å­—ä¼šå˜æˆoxFFFFFFFFé™·å…¥æ­»å¾ªç¯</p>
</li>
<li><p>ä¸ºé¿å…æ­»å¾ªç¯ï¼Œé¦–å…ˆæŠŠnä¸1åšä¸è¿ç®—ï¼Œåˆ¤æ–­nçš„æœ€ä½ä½æ˜¯ä¸æ˜¯1ï¼Œæ¥ç€æŠŠ1å·¦ç§»ä¸€ä½å¾—åˆ°2ï¼Œå†å’Œnåšä¸è¿ç®—ï¼Œå°±èƒ½åˆ¤æ–­nçš„æ¬¡åœ°ä½æ˜¯ä¸æ˜¯1,åå¤å·¦ç§»â€¦â€¦</p>
</li>
<li><p>æŠŠä¸€ä¸ªæ•´æ•°å‡å»1ï¼Œå†å’ŒåŸæ•´æ•°åšä¸è¿ç®—ï¼Œä¼šæŠŠæ•´ä¸ªæ•´æ•°æœ€å³è¾¹çš„1å˜ä¸º0</p>
</li>
</ol>
</blockquote>
</li>
</ol>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p><strong>C++</strong></p>
<p>æ³•1ï¼š</p>
<p>ä¸€ä¸ªintä¸º8ä½ï¼Œæ‰€ä»¥è´Ÿæ•°çš„æƒ…å†µä¸­éœ€è¦<strong>åˆ¤æ–­32ä¸ªå­—èŠ‚ä¸­</strong>1çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">int</span>  <span class="title">NumberOf1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">int</span> result=<span class="number">0</span>;</span><br><span class="line">         <span class="keyword">int</span> flag=<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">while</span>(flag)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">if</span>(n&amp;flag)</span><br><span class="line">                 result++;</span><br><span class="line">             flag=flag&lt;&lt;<span class="number">1</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">         </span><br><span class="line">     &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ³•2ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">int</span>  <span class="title">NumberOf1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">int</span> result=<span class="number">0</span>;</span><br><span class="line">         <span class="keyword">while</span>(n)</span><br><span class="line">         &#123;</span><br><span class="line">             result++;<span class="comment">//ä¸€ä¸ªé0æ•°å­—è‡³å°‘æœ‰ä¸€ä¸ª1</span></span><br><span class="line">             n=(n<span class="number">-1</span>)&amp;n;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<p>æ³•1ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">NumberOf1</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        result=<span class="number">0</span></span><br><span class="line">        flag=<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">32</span>):</span><br><span class="line">            <span class="keyword">if</span> n &amp; flag:</span><br><span class="line">                result+=<span class="number">1</span></span><br><span class="line">            flag=flag&lt;&lt;<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p>æ³•2ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">NumberOf1</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">0</span>:</span><br><span class="line">            n &amp;= <span class="number">0xffffffff</span> <span class="comment">#è·å–è´Ÿæ•°è¡¥ç </span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> n:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            n = n&amp;(n<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>14.å‰ªç»³å­</title>
    <url>/2019/10/29/14-%E5%89%AA%E7%BB%B3%E5%AD%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="é¢˜ç›®ï¼š"><a href="#é¢˜ç›®ï¼š" class="headerlink" title="é¢˜ç›®ï¼š"></a>é¢˜ç›®ï¼š</h1><p>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸ºnçš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆmæ®µ (må’Œnéƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1)æ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸ºk[0],k[1],â€¦,k[m].è¯·é—®k[0]<em>k[1]</em>â€¦*k[m]å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦ä¸º8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2,3,3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18.</p><h1 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h1><ul>
<li>$O(n^2)$æ—¶é—´å’Œ$O(n)$ç©ºé—´çš„åŠ¨æ€è§„åˆ’</li>
<li>$O(1)$æ—¶é—´å’Œç©ºé—´çš„è´ªå©ªç®—æ³•</li>
</ul><a id="more"></a>

<h1 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h1><blockquote>
<p>ç¬¬ä¸€æ­¥ï¼šç¡®å®šæœ€ä¼˜ç­–ç•¥ï¼Œä½¿å¾—å‰ªæ‰ç»³å­çš„å‡ æ®µä¹˜ç§¯æœ€å¤§ã€‚æœ€åä¸€æ­¥ï¼šä¹˜ç§¯æœ€å¤§ã€‚å­é—®é¢˜ï¼šå‡è®¾è¯¥ç»³å­å‰ªæˆä¸¤æ®µï¼Œå‰ªå®Œçš„ä¸¤ä¸ªéƒ¨åˆ†éƒ½å¿…é¡»æ˜¯æœ€å¤§ä¹˜ç§¯ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š dp[i] = max{ dp[i - j]<em>dp[j]} ,è¿™æ˜¯ä¸€ä¸ªè‡ªä¸Šè€Œä¸‹çš„é€’å½’å…¬å¼ã€‚ç”±äºé€’å½’ä¼šæœ‰å¤§é‡çš„ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚æ›´å¥½çš„åŠæ³•æ˜¯æŒ‰ç…§<em>*ä»ä¸‹è€Œä¸Š</em></em>çš„é¡ºåºè®¡ç®—ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å…ˆå¾—åˆ°f(2),f(3)ï¼Œå†å¾—åˆ°f(4),f(5)ï¼Œç›´åˆ°å¾—åˆ°f(n)ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šç¡®å®šåˆå§‹å€¼å’Œè¾¹ç•Œï¼šdp[0] = 0,dp[1] = 1, dp[2] = 1</p>
<p>ç¬¬å››æ­¥ï¼šè®¡ç®—é¡ºåºï¼Œä»dp[3]å¼€å§‹åˆ°dp[n]</p>
</blockquote>
<p><strong>C++</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxProductAfterCutting_solution1</span><span class="params">(<span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(length &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(length == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(length == <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* products = <span class="keyword">new</span> <span class="keyword">int</span>[length + <span class="number">1</span>];</span><br><span class="line">    products[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    products[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    products[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    products[<span class="number">3</span>] = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">4</span>; i &lt;= length; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i / <span class="number">2</span>; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> product = products[j] * products[i - j];</span><br><span class="line">            <span class="keyword">if</span>(max &lt; product)</span><br><span class="line">                max = product;</span><br><span class="line"></span><br><span class="line">            products[i] = max;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    max = products[length];</span><br><span class="line">    <span class="keyword">delete</span>[] products;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cutRope</span><span class="params">(self,length)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> length&lt;<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    dp=[<span class="number">0</span>]*length</span><br><span class="line">    <span class="comment">#dp = [0 for i in range(number + 1)]</span></span><br><span class="line">    dp[<span class="number">2</span>]=<span class="number">1</span></span><br><span class="line">    dp[<span class="number">3</span>]=<span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>,length+<span class="number">1</span>):</span><br><span class="line">        cout=<span class="number">0</span></span><br><span class="line">        j=<span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> j&lt;=i//<span class="number">2</span>:</span><br><span class="line">            cout=max(dp[i-j]*dp[j],cout)</span><br><span class="line">            dp[i]=cout</span><br><span class="line">            j+=<span class="number">1</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> dp[lentgh]</span><br></pre></td></tr></table></figure>
<h1 id="è´ªå©ªç®—æ³•"><a href="#è´ªå©ªç®—æ³•" class="headerlink" title="è´ªå©ªç®—æ³•"></a>è´ªå©ªç®—æ³•</h1><p>æŒ‰å¦‚ä¸‹ç­–ç•¥æ¥å‰ªç»³å­</p>
<ul>
<li>å½“n&gt;=5ï¼Œå°½å¯èƒ½å¤šå‰ªé•¿åº¦ä¸º3çš„ç»³å­</li>
<li>å½“å‰©ä¸‹çš„ç»³å­é•¿åº¦ä¸º4ï¼ŒæŠŠç»³å­å‰ªæˆä¸¤æ®µä¸º2çš„ç»³å­</li>
</ul>
<p><strong>C++</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxProductAfterCutting_solution2</span><span class="params">(<span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(length &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(length == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(length == <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°½å¯èƒ½å¤šåœ°å‡å»é•¿åº¦ä¸º3çš„ç»³å­æ®µ</span></span><br><span class="line">    <span class="keyword">int</span> timesOf3 = length / <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“ç»³å­æœ€åå‰©ä¸‹çš„é•¿åº¦ä¸º4çš„æ—¶å€™ï¼Œä¸èƒ½å†å‰ªå»é•¿åº¦ä¸º3çš„ç»³å­æ®µã€‚</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶æ›´å¥½çš„æ–¹æ³•æ˜¯æŠŠç»³å­å‰ªæˆé•¿åº¦ä¸º2çš„ä¸¤æ®µï¼Œå› ä¸º2*2 &gt; 3*1ã€‚</span></span><br><span class="line">    <span class="keyword">if</span>(length - timesOf3 * <span class="number">3</span> == <span class="number">1</span>)</span><br><span class="line">        timesOf3 -= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> timesOf2 = (length - timesOf3 * <span class="number">3</span>) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) (<span class="built_in">pow</span>(<span class="number">3</span>, timesOf3)) * (<span class="keyword">int</span>) (<span class="built_in">pow</span>(<span class="number">2</span>, timesOf2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”æŸ¥æ‰¾</title>
    <url>/2019/10/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E2%80%94%E2%80%94%E6%9F%A5%E6%89%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æŸ¥æ‰¾å®šä¹‰ï¼šæŸ¥æ‰¾ï¼ˆSearchingï¼‰å°±æ˜¯æ ¹æ®ç»™å®šçš„æŸä¸ªå€¼ï¼Œåœ¨æŸ¥æ‰¾è¡¨ä¸­ç¡®å®šä¸€ä¸ªå…¶å…³é”®å­—ç­‰äºç»™å®šå€¼çš„æ•°æ®å…ƒç´ ï¼ˆæˆ–è®°å½•ï¼‰ã€‚</p><blockquote>
<p>æŸ¥æ‰¾è¡¨ï¼ˆSearch Tableï¼‰æ˜¯ç”±åŒä¸€ç±»å‹çš„æ•°æ®å…ƒç´ ï¼ˆæˆ–è®°å½•ï¼‰æ„æˆçš„é›†åˆã€‚</p>
</blockquote><p>æŸ¥æ‰¾åˆæ ¹æ®æ“ä½œæ–¹å¼ä¸åŒåˆ†ä¸ºé™æ€æŸ¥æ‰¾å’ŒåŠ¨æ€æŸ¥æ‰¾ä¸¤ç§ï¼Œå‰è€…æ˜¯ä»…è·å–æ•°æ®ä¸è¿›è¡Œå…¶ä»–æ“ä½œï¼Œåè€…åˆ™éœ€è¦åŠ¨æ€æ”¹å˜æ•°æ®ï¼Œæ¯”å¦‚åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­æ’å…¥æ–°æ•°æ®ï¼Œæˆ–è€…åˆ é™¤æŸä¸ªå·²å­˜åœ¨çš„æ•°æ®ã€‚</p><a id="more"></a>


<h1 id="é¡ºåºè¡¨æŸ¥æ‰¾"><a href="#é¡ºåºè¡¨æŸ¥æ‰¾" class="headerlink" title="é¡ºåºè¡¨æŸ¥æ‰¾"></a>é¡ºåºè¡¨æŸ¥æ‰¾</h1><ul>
<li>å®šä¹‰ï¼š<br>ä»çº¿æ€§è¡¨çš„ä¸€æ®µå¼€å§‹ï¼Œé€ä¸ªæ£€æŸ¥å…³é”®å­—æ˜¯å¦æ»¡è¶³ç»™å®šçš„æ¡ä»¶ã€‚è‹¥æŸ¥æ‰¾åˆ°æŸä¸ªå…ƒç´ çš„å…³é”®å­—æ»¡è¶³ç»™å®šçš„æ¡ä»¶ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›è¯¥å…ƒç´ åœ¨çº¿æ€§è¡¨ä¸­çš„ä½ç½®ï¼›è‹¥å·²ç»æŸ¥æ‰¾åˆ°è¡¨çš„å¦ä¸€ç«¯ï¼Œä½†è¿˜æ²¡æœ‰æŸ¥æ‰¾åˆ°ç¬¦åˆç»™å®šæ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™è¿”å›æŸ¥æ‰¾å¤±è´¥çš„ä¿¡æ¯ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(Nï¼‰</li>
<li>ä¼˜ç¼ºç‚¹ï¼š<blockquote>
<p>ä¼˜ç‚¹ï¼šå¯¹æ•°æ®å…ƒç´ çš„å­˜å‚¨æ²¡æœ‰éœ€æ±‚ï¼Œé¡ºåºå­˜å‚¨æˆ–é“¾å¼å­˜å‚¨çš†å¯ï¼›å¯¹è¡¨ä¸­è®°å½•çš„æœ‰åºæ€§ä¹Ÿæ²¡æœ‰è¦æ±‚ï¼Œæ— è®ºè®°å½•æ˜¯å¦æŒ‰å…³é”®ç æœ‰åºï¼Œå‡å¯åº”ç”¨<br>ç¼ºç‚¹ï¼šå½“nè¾ƒå¤§æ—¶ï¼Œå¹³å‡æŸ¥æ‰¾é•¿åº¦è¾ƒå¤§ï¼Œæ•ˆç‡ä½</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ— å“¨å…µé¡ºåºæŸ¥æ‰¾ï¼Œaä¸ºæ•°ç»„ï¼Œnä¸ºè¦æŸ¥æ‰¾çš„æ•°ç»„ä¸ªæ•°ï¼Œkeyä¸ºè¦æŸ¥æ‰¾çš„å…³é”®å­— */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Sequential_Search</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> n,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[i]==key)</span><br><span class="line">			<span class="keyword">return</span> i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼•å…¥å“¨å…µçš„ç›®çš„æ˜¯ä½¿å¾—å‡½æ•°å†…çš„å¾ªç¯ä¸ç”¨æ¯æ¬¡éƒ½åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¼šè¶Šç•Œï¼Œå³ä¸éœ€è¦æ¯æ¬¡è®© iä¸ n ä½œæ¯”è¾ƒ<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æœ‰å“¨å…µé¡ºåºæŸ¥æ‰¾ */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Sequential_Search2</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> n,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	a[<span class="number">0</span>]=key;</span><br><span class="line">	i=n;</span><br><span class="line">	<span class="keyword">while</span>(a[i]!=key)</span><br><span class="line">	&#123;</span><br><span class="line">		i--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i;<span class="comment">/*è¿”å› 0 åˆ™è¯´æ˜æŸ¥æ‰¾å¤±è´¥*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="æœ‰åºè¡¨æŸ¥æ‰¾"><a href="#æœ‰åºè¡¨æŸ¥æ‰¾" class="headerlink" title="æœ‰åºè¡¨æŸ¥æ‰¾"></a>æœ‰åºè¡¨æŸ¥æ‰¾</h1><h2 id="æŠ˜åŠæŸ¥æ‰¾ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰"><a href="#æŠ˜åŠæŸ¥æ‰¾ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰" class="headerlink" title="æŠ˜åŠæŸ¥æ‰¾ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰"></a>æŠ˜åŠæŸ¥æ‰¾ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰</h2><ul>
<li><p>å®šä¹‰ï¼š</p>
<blockquote>
<p>åœ¨æœ‰åºçš„é¡ºåºè¡¨ä¸­ï¼Œå–ä¸­é—´è®°å½•ä½œä¸ºæ¯”è¾ƒå¯¹è±¡ï¼Œè‹¥ç»™å®šå€¼ä¸ä¸­é—´è®°å½•çš„å…³é”®å­—ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸ;è‹¥ç»™å®šå€¼å°äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å·¦åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼›è‹¥ç»™å®šå€¼å¤§äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å³åŠåŒºç»§ç»­æŸ¥æ‰¾ã€‚ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æŸ¥æ‰¾æˆåŠŸï¼Œæˆ–æ‰€æœ‰æŸ¥æ‰¾åŒºåŸŸå…ƒè®°å½•ï¼ŒæŸ¥æ‰¾å¤±è´¥ä¸ºæ­¢ã€‚</p>
</blockquote>
</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(logNï¼‰</li>
<li>ä¼˜ç¼ºç‚¹ï¼š<blockquote>
<p>ä¼˜ç‚¹ï¼šæŠ˜åŠæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ï¼Œè¿œè¿œä¼˜äºé¡ºåºæŸ¥æ‰¾çš„O(n)ï¼Œ<br>ç¼ºç‚¹ï¼šäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡é«˜ï¼Œä½†æ˜¯è¦æ±‚è¡¨å…³é”®å­—æœ‰åº</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æŠ˜åŠæŸ¥æ‰¾ */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Binary_Search</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> n,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> low,high,mid;</span><br><span class="line">	low=<span class="number">1</span>;	<span class="comment">/* å®šä¹‰æœ€ä½ä¸‹æ ‡ä¸ºè®°å½•é¦–ä½ */</span></span><br><span class="line">	high=n;	<span class="comment">/* å®šä¹‰æœ€é«˜ä¸‹æ ‡ä¸ºè®°å½•æœ«ä½ */</span></span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)</span><br><span class="line">	&#123;</span><br><span class="line">		mid=(low+high)/<span class="number">2</span>;	<span class="comment">/* æŠ˜åŠ */</span></span><br><span class="line">		<span class="keyword">if</span> (key&lt;a[mid])		<span class="comment">/* è‹¥æŸ¥æ‰¾å€¼æ¯”ä¸­å€¼å° */</span></span><br><span class="line">			high=mid<span class="number">-1</span>;		<span class="comment">/* æœ€é«˜ä¸‹æ ‡è°ƒæ•´åˆ°ä¸­ä½ä¸‹æ ‡å°ä¸€ä½ */</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (key&gt;a[mid])<span class="comment">/* è‹¥æŸ¥æ‰¾å€¼æ¯”ä¸­å€¼å¤§ */</span></span><br><span class="line">			low=mid+<span class="number">1</span>;		<span class="comment">/* æœ€ä½ä¸‹æ ‡è°ƒæ•´åˆ°ä¸­ä½ä¸‹æ ‡å¤§ä¸€ä½ */</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> mid;		<span class="comment">/* è‹¥ç›¸ç­‰åˆ™è¯´æ˜midå³ä¸ºæŸ¥æ‰¾åˆ°çš„ä½ç½® */</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ’å€¼æŸ¥æ‰¾"><a href="#æ’å€¼æŸ¥æ‰¾" class="headerlink" title="æ’å€¼æŸ¥æ‰¾"></a>æ’å€¼æŸ¥æ‰¾</h2><ul>
<li>å®šä¹‰ï¼š<blockquote>
<p>åŸºäºäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå°†æŸ¥æ‰¾ç‚¹çš„é€‰æ‹©æ”¹è¿›ä¸ºè‡ªé€‚åº”é€‰æ‹©ï¼Œmid=low+(key-a[low])/(a[high]-a[low])*(high-low)<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014201459952.png#pic_center"></p>
</blockquote>
</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(logNï¼‰</li>
<li>ä¼˜ç¼ºç‚¹ï¼š<blockquote>
<p>ä¼˜ç‚¹ï¼šå¯¹äºè¡¨é•¿è¾ƒå¤§ ä¸”å…³é”®å­—åˆ†å¸ƒåˆæ¯”è¾ƒå‡åŒ€çš„æŸ¥æ‰¾è¡¨ï¼Œæ’å€¼æŸ¥æ‰¾ç®—æ³•çš„å¹³å‡æ€§èƒ½æ¯”æŠ˜åŠæŸ¥æ‰¾è¦å¥½å¾—å¤š<br>ç¼ºç‚¹ï¼šæç«¯ä¸å‡åŒ€çš„æ•°æ®ï¼Œç”¨æ’å€¼æŸ¥æ‰¾æœªå¿…æ˜¯å¾ˆåˆé€‚çš„é€‰æ‹©</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ’å€¼æŸ¥æ‰¾ */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Interpolation_Search</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> n,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> low,high,mid;</span><br><span class="line">	low=<span class="number">1</span>;	<span class="comment">/* å®šä¹‰æœ€ä½ä¸‹æ ‡ä¸ºè®°å½•é¦–ä½ */</span></span><br><span class="line">	high=n;	<span class="comment">/* å®šä¹‰æœ€é«˜ä¸‹æ ‡ä¸ºè®°å½•æœ«ä½ */</span></span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)</span><br><span class="line">	&#123;</span><br><span class="line">		mid=low+ (high-low)*(key-a[low])/(a[high]-a[low]); <span class="comment">/* æ’å€¼ */</span></span><br><span class="line">		<span class="keyword">if</span> (key&lt;a[mid])		<span class="comment">/* è‹¥æŸ¥æ‰¾å€¼æ¯”æ’å€¼å° */</span></span><br><span class="line">			high=mid<span class="number">-1</span>;		<span class="comment">/* æœ€é«˜ä¸‹æ ‡è°ƒæ•´åˆ°æ’å€¼ä¸‹æ ‡å°ä¸€ä½ */</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (key&gt;a[mid])<span class="comment">/* è‹¥æŸ¥æ‰¾å€¼æ¯”æ’å€¼å¤§ */</span></span><br><span class="line">			low=mid+<span class="number">1</span>;		<span class="comment">/* æœ€ä½ä¸‹æ ‡è°ƒæ•´åˆ°æ’å€¼ä¸‹æ ‡å¤§ä¸€ä½ */</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> mid;		<span class="comment">/* è‹¥ç›¸ç­‰åˆ™è¯´æ˜midå³ä¸ºæŸ¥æ‰¾åˆ°çš„ä½ç½® */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h2 id="æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"><a href="#æ–æ³¢é‚£å¥‘æŸ¥æ‰¾" class="headerlink" title="æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"></a>æ–æ³¢é‚£å¥‘æŸ¥æ‰¾</h2><ul>
<li><p>å®šä¹‰ï¼š</p>
<blockquote>
<p>1.æ–æ³¢é‚£å¥‘å®åœ¨äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ä¸Šï¼Œç”¨æ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è¿›è¡Œåˆ†å‰²<br>2.åœ¨æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸Šæ‰¾ä¸€ä¸ªç•¥å¤§äºæŸ¥æ‰¾å…ƒç´ è¡¨ä¸ªæ•°çš„å€¼f(n)<br>3.å°†æŸ¥æ‰¾å…ƒç´ è¡¨ä¸ªæ•°æ‰©å……åˆ°f(n) å¦‚æœè¦è¡¥å……å…ƒç´ ç”¨æœ€åä¸€ä¸ªå…ƒç´ è¡¥å……<br>4.å®Œæˆåå¯¹f(n)ä¸ªå…ƒç´ è¿›è¡Œæ–æ³¢é‚£å¥‘åˆ†å‰²,å³åˆ†å‰²æˆ å‰é¢f(n-1)ä¸ªå…ƒç´ ,åé¢f(n-2)ä¸ªå…ƒç´ <br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014205901920.png#pic_center"><br>5.å¯¹è¦æŸ¥æ‰¾å…ƒç´ çš„é‚£ä¸ªéƒ¨åˆ†è¿›è¡Œé€’å½’ </p>
</blockquote>
</li>
<li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(logNï¼‰</p>
</li>
<li><p>ä¼˜ç¼ºç‚¹ï¼š</p>
<blockquote>
<p> å°±å¹³å‡æ€§èƒ½è€Œè¨€ ä¼˜äºæŠ˜åŠæŸ¥æ‰¾ ä½†æ˜¯è‹¥ä¸€ç›´åœ¨å·¦è¾¹é•¿åŠåŒºæŸ¥æ‰¾åˆ™ä½äºæŠ˜åŠæŸ¥æ‰¾                      </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ–æ³¢é‚£å¥‘æŸ¥æ‰¾ */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Fibonacci_Search</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> n,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> low,high,mid,i,k=<span class="number">0</span>;</span><br><span class="line">	low=<span class="number">1</span>;	<span class="comment">/* å®šä¹‰æœ€ä½ä¸‹æ ‡ä¸ºè®°å½•é¦–ä½ */</span></span><br><span class="line">	high=n;	<span class="comment">/* å®šä¹‰æœ€é«˜ä¸‹æ ‡ä¸ºè®°å½•æœ«ä½ */</span></span><br><span class="line">	<span class="keyword">while</span>(n&gt;F[k]<span class="number">-1</span>)</span><br><span class="line">		k++;</span><br><span class="line">	<span class="keyword">for</span> (i=n;i&lt;F[k]<span class="number">-1</span>;i++)</span><br><span class="line">		a[i]=a[n];</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)</span><br><span class="line">	&#123;</span><br><span class="line">		mid=low+F[k<span class="number">-1</span>]<span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">if</span> (key&lt;a[mid])</span><br><span class="line">		&#123;</span><br><span class="line">			high=mid<span class="number">-1</span>;		</span><br><span class="line">			k=k<span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (key&gt;a[mid])</span><br><span class="line">		&#123;</span><br><span class="line">			low=mid+<span class="number">1</span>;		</span><br><span class="line">			k=k<span class="number">-2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (mid&lt;=n)</span><br><span class="line">				<span class="keyword">return</span> mid;		<span class="comment">/* è‹¥ç›¸ç­‰åˆ™è¯´æ˜midå³ä¸ºæŸ¥æ‰¾åˆ°çš„ä½ç½® */</span></span><br><span class="line">			<span class="keyword">else</span> </span><br><span class="line">				<span class="keyword">return</span> n;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="çº¿æ€§ç´¢å¼•æŸ¥æ‰¾"><a href="#çº¿æ€§ç´¢å¼•æŸ¥æ‰¾" class="headerlink" title="çº¿æ€§ç´¢å¼•æŸ¥æ‰¾"></a>çº¿æ€§ç´¢å¼•æŸ¥æ‰¾</h1></blockquote>
</li>
<li>ç´¢å¼•:å°±æ˜¯æŠŠä¸€ä¸ªå…³é”®å­—ä¸å®ƒå¯¹åº”çš„è®°å½•ç›¸å…³è”çš„è¿‡ç¨‹ã€‚ä¸€ä¸ªç´¢å¼•ç”±è‹¥å¹²ä¸ªç´¢å¼•é¡¹æ„æˆï¼Œæ¯ä¸ªç´¢å¼•é¡¹è‡³å°‘åº”åŒ…å«å…³é”®å­—å’Œå…¶å¯¹åº”çš„è®°å½•åœ¨å­˜å‚¨å™¨ä¸­çš„ä½ç½®ç­‰ä¿¡æ¯ã€‚ç´¢å¼•æŠ€æœ¯æ˜¯ç»„ç»‡å¤§å‹æ•°æ®åº“ä»¥åŠç£ç›˜æ–‡ä»¶çš„ä¸€ç§é‡è¦æŠ€æœ¯ã€‚</li>
<li>ç´¢å¼•æŒ‰ç…§ç»“æ„å¯ä»¥åˆ†ä¸ºçº¿æ€§ç´¢å¼•ï¼Œæ ‘å½¢ç´¢å¼•å’Œå¤šçº§ç´¢å¼•ã€‚</li>
<li>çº¿æ€§ç´¢å¼•æ˜¯å°†ç´¢å¼•é¡¹é›†åˆç»„ç»‡ä¸ºçº¿æ€§ç»“æ„ï¼Œä¹Ÿç§°ä¸ºç´¢å¼•è¡¨ã€‚åŒ…æ‹¬ç¨ å¯†ç´¢å¼•ã€åˆ†å—ç´¢å¼•ã€å€’æ’ç´¢å¼•ã€‚<h2 id="ç¨ å¯†ç´¢å¼•"><a href="#ç¨ å¯†ç´¢å¼•" class="headerlink" title="ç¨ å¯†ç´¢å¼•"></a>ç¨ å¯†ç´¢å¼•</h2><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014211157380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></li>
<li>ç¨ å¯†ç´¢å¼•æ˜¯æŒ‡åœ¨çº¿æ€§è¡¨ä¸­ï¼Œå°†æ•°æ®é›†ä¸­çš„æ¯ä¸ªè®°å½•å¯¹åº”ä¸€ä¸ªç´¢å¼•é¡¹ã€‚å¯¹äºç¨ å¯†ç´¢å¼•è¿™ä¸ªç´¢å¼•è¡¨æ¥è¯´ï¼Œç´¢å¼•é¡¹ä¸€å®šæ˜¯æŒ‰ç…§å…³é”®ç æœ‰åºçš„æ’åˆ—ã€‚</li>
<li>ä¼˜ç¼ºç‚¹ï¼š<blockquote>
<p>ä¼˜ç‚¹ï¼šç´¢å¼•é¡¹æœ‰åºä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾å…³é”®å­—æ—¶ï¼Œå¯ä»¥ç”¨æŠ˜åŠï¼Œæ’å€¼åŠæ–æ³¢é‚£å¥‘ç­‰æœ‰åºæŸ¥æ‰¾ç®—æ³•ã€‚<br>ç¼ºç‚¹ï¼šå¦‚æœæ•°æ®é›†éå¸¸å¤§ï¼Œæ¯”å¦‚ä¸Šäº¿ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€ç´¢å¼•ä¹Ÿå¾—åŒæ ·çš„æ•°æ®é›†é•¿åº¦è§„æ¨¡ã€‚å¯¹äºå†…å­˜æœ‰é™çš„è®¡ç®—æœºæ¥è¯´ï¼Œå¯èƒ½å°±éœ€è¦åå¤å»è®¿é—®ç£ç›˜ï¼ŒæŸ¥æ‰¾æ€§èƒ½å¤§å¤§ä¸‹é™ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="åˆ†å—ç´¢å¼•"><a href="#åˆ†å—ç´¢å¼•" class="headerlink" title="åˆ†å—ç´¢å¼•"></a>åˆ†å—ç´¢å¼•</h2><ul>
<li><p>åˆ†å—æœ‰åºï¼Œæ˜¯æŠŠæ•°æ®é›†çš„è®°å½•åˆ†æˆäº†è‹¥å¹²å—ï¼Œå¹¶ä¸”è¿™äº›å—éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:</p>
<blockquote>
<ul>
<li>å—å†…æ— åºï¼Œå³æ¯ä¸€å—å†…çš„è®°å½•å®‹ä¸è¦æ±‚æœ‰åºï¼Œæœ‰åºæ›´å¥½ï¼Œä»£ä»·æ¯”è¾ƒå¤§</li>
<li>å—é—´æœ‰åºï¼Œä¾‹å¦‚ï¼Œè¦æ±‚ç¬¬äºŒå—æ‰€æœ‰è®°å½•çš„å…³é”®å­—å‡è¦å¤§äºç¬¬ä¸€å—ä¸­æ‰€æœ‰è®°æ™¯çš„å…³é”®å­—ï¼Œç¬¬ä¸‰å—çš„æ‰€æœ‰è®°å½•çš„å…³é”®å­—å‡è¦å¤§äºç¬¬äºŒå—çš„æ‰€æœ‰è®°å½•å…³é”®å­—</li>
</ul>
</blockquote>
<p>å¯¹äºåˆ†å—æœ‰åºçš„æ•°æ®é›†ï¼Œå°†æ¯å—å¯¹åº”ä¸€ä¸ªç´¢å¼•é¡¹ï¼Œè¿™ç§ç´¢å¼•æ–¹æ³•å«åšåˆ†å—ç´¢å¼•ã€‚</p>
</li>
<li><p>å®šä¹‰çš„åˆ†å—ç´¢å¼•çš„ç´¢å¼•é¡¹ç»“æ„åˆ†ä¸‰ä¸ªæ•°æ®é¡¹ :</p>
<blockquote>
<ul>
<li>æœ€å¤§å…³é”®ç ï¼Œå®ƒå­˜å‚¨æ¯ä¸€å—ä¸­çš„æœ€å¤§å…³é”®å­—ï¼Œå¥½å¤„å°±æ˜¯å¯ä»¥ä½¿å¾—åœ¨å®ƒä¹‹åçš„ä¸‹ä¸€å—ä¸­çš„æœ€å°å…³é”®å­—ä¹Ÿèƒ½æ¯”è¿™ä¸€å—æœ€å¤§çš„å…³é”®å­—è¦å¤§</li>
<li>å­˜å‚¨äº†å—ä¸­çš„è®°å½•ä¸ªæ•°ï¼Œä»¥ä¾¿äºå¾ªç¯æ—¶ä½¿ç”¨</li>
<li>ç”¨äºæŒ‡å‘å—é¦–æ•°æ®å…ƒç´ çš„æŒ‡é’ˆï¼Œä¾¿äºå¼€å§‹å¯¹è¿™ä¸€å—ä¸­è®°æ™¯è¿›è¡Œéå†ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014211843755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></li>
</ul>
</blockquote>
</li>
<li>åˆ†å—ç´¢å¼•è¡¨ä¸­æŸ¥æ‰¾ï¼Œå°±æ˜¯åˆ†ä¸¤æ­¥è¿›è¡Œ:<blockquote>
<ul>
<li>åœ¨åˆ†å—ç´¢å¼•è¡¨ä¸­æŸ¥æ‰¾è¦æŸ¥çš„å…³é”®å­—æ‰€åœ¨å—ã€‚ç”±äºåˆ†å—ç´¢å¼•è¡¨æ˜¯å—é—´æœ‰åºçš„ï¼Œå¾ˆå®¹æ˜“åˆ©ç”¨æŠ˜åŠæ’å€¼ç­‰ç®—æ³•å¾—åˆ°ç»“æœã€‚</li>
<li>æ ¹æ®å—é¦–æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å—ï¼Œå¹¶åœ¨å—ä¸­é¡ºåºæŸ¥æ‰¾å…³é”®ç ã€‚å› ä¸ºå—ä¸­å¯ä»¥æ˜¯æ— åºçš„ï¼Œåªèƒ½é¡ºåºæŸ¥æ‰¾ã€‚</li>
</ul>
</blockquote>
</li>
<li>åˆ†å—ç´¢å¼•çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ï¼š<blockquote>
<p>n ä¸ªè®°å½•çš„æ•°æ®é›†è¢«å¹³å‡åˆ†æˆ må—ï¼Œæ¯ä¸ªå—ä¸­æœ‰ t æ¡è®°å½•ï¼Œæ˜¾ç„¶ n=m x t<br>Lb ä¸ºæŸ¥æ‰¾ç´¢å¼•è¡¨çš„å¹³å‡æŸ¥æ‰¾é•¿ï¼ŒLwä¸ºå—ä¸­æŸ¥æ‰¾è®°å½•çš„å¹³å‡æŸ¥æ‰¾é•¿åº¦<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014213115831.png#pic_center"></p>
</blockquote>
</li>
</ul>
<h2 id="å€’æ’ç´¢å¼•"><a href="#å€’æ’ç´¢å¼•" class="headerlink" title="å€’æ’ç´¢å¼•"></a>å€’æ’ç´¢å¼•</h2><ul>
<li>æœ€åŸºç¡€çš„æœç´¢æŠ€æœ¯<blockquote>
<p>æ ·ä¾‹:<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101421402779.png#pic_center"><br>å¿½ç•¥å¤§å°å†™å’Œå¤æ•°ï¼Œå¾—å‡ºå•è¯è¡¨ï¼Œæ‰¾åˆ°ä»–ä»¬åˆ†åˆ«å‡ºç°åœ¨å“ªç¯‡æ–‡ç« ä¸­<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191014213725806.png#pic_center"><br>è¿™å¼ å•è¯è¡¨å°±æ˜¯ç´¢å¼•è¡°ï¼Œ ç´¢å¼•é¡¹çš„é€šç”¨ç»“æ„æ˜¯:</p>
<ul>
<li>æ¬¡å…³é”®ç .ä¾‹å¦‚ä¸Šé¢çš„â€è‹±æ–‡å•è¯â€ </li>
<li>è®°å½•å·è¡¨ï¼Œä¾‹å¦‚ä¸Šé¢çš„â€æ–‡ç« ç¼–å·â€</li>
</ul>
<p>å…¶ä¸­è®°å½•å·è¡¨å­˜å‚¨å…·æœ‰ç›¸åŒæ¬¡å…³é”®å­—çš„æ‰€æœ‰è®°å½•çš„è®°å½•å· (å¯ä»¥æ˜¯æŒ‡å‘è®°å½•çš„æŒ‡é’ˆæˆ–è€…æ˜¯è¯¥è®°å½•çš„ä¸»å…³é”®å­—) ã€‚ è¿™æ ·çš„ç´¢å¼•æ–¹æ³•å°±æ˜¯å€’æ’ç´¢å¼• (invered index)</p>
</blockquote>
</li>
<li>ä¼˜ç¼ºç‚¹ï¼š<blockquote>
<ul>
<li>ä¼˜ç‚¹ï¼šæ˜¾ç„¶å°±æ˜¯æŸ¥æ‰¾è®°å½•éå¸¸å¿«ï¼ŒåŸºæœ¬ç­‰äºç”Ÿæˆç´¢å¼•è¡¨åï¼ŒæŸ¥æ‰¾æ—¶éƒ½ä¸ç”¨å»è¯»å–è®°å½•ï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœ<br>ç¼ºç‚¹ï¼šæ˜¯è¿™ä¸ªè®°å½•å·ä¸å®šé•¿<h1 id="äºŒå‰æ’åºæ ‘"><a href="#äºŒå‰æ’åºæ ‘" class="headerlink" title="äºŒå‰æ’åºæ ‘"></a>äºŒå‰æ’åºæ ‘</h1></li>
</ul>
</blockquote>
</li>
<li>å®šä¹‰ï¼šäºŒå‰æ’åºæ ‘ ( Binary Sort Tree)ï¼Œåˆç§°ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ã€‚å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ã€‚.</li>
</ul>
<blockquote>
<ul>
<li>è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“æ„çš„å€¼ </li>
<li>è‹¥å®ƒçš„å³å­æ ‘ä¸ç©º ï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®«çš„æ ¹ç»“ç‚¹çš„å€¼</li>
<li>å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚</li>
</ul>
</blockquote>
<p>   é€šè¿‡<strong>ä¸­åºéå†</strong>å³å¯å¾—å‡º<strong>æœ‰åºçš„åºåˆ—</strong>ï¼Œ æ„é€ ä¸€æ£µäºŒå‰æ’åºæ ‘çš„ç›®çš„ï¼Œå…¶å®å¹¶ä¸æ˜¯ä¸ºäº†æ’åºï¼Œè€Œæ˜¯ä¸ºäº†æé«˜æŸ¥æ‰¾å’Œæ’å…¥åˆ é™¤å…³é”®å­—çš„é€Ÿåº¦ã€‚</p>
<ul>
<li>äºŒå‰æ’åºæ ‘çš„æŸ¥æ‰¾</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Status;	<span class="comment">/* Statusæ˜¯å‡½æ•°çš„ç±»å‹,å…¶å€¼æ˜¯å‡½æ•°ç»“æœçŠ¶æ€ä»£ç ï¼Œå¦‚OKç­‰ */</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">/* äºŒå‰æ ‘çš„äºŒå‰é“¾è¡¨ç»“ç‚¹ç»“æ„å®šä¹‰ */</span></span><br><span class="line"><span class="keyword">typedef</span>  <span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span>	/* ç»“ç‚¹ç»“æ„ */</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;	<span class="comment">/* ç»“ç‚¹æ•°æ® */</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span> *<span class="title">lchild</span>, *<span class="title">rchild</span>;</span>	<span class="comment">/* å·¦å³å­©å­æŒ‡é’ˆ */</span></span><br><span class="line">&#125; BiTNode, *BiTree;<span class="comment">//BiTNodeæ˜¯è¯¥ç»“æ„ä½“çš„å˜é‡å,*BiTreeæ˜¯è¯¥ç»“æ„ä½“çš„ç±»å‹çš„åœ°å€</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* é€’å½’æŸ¥æ‰¾äºŒå‰æ’åºæ ‘Tä¸­æ˜¯å¦å­˜åœ¨key, */</span></span><br><span class="line"><span class="comment">/* æŒ‡é’ˆfæŒ‡å‘Tçš„åŒäº²ï¼Œå…¶åˆå§‹è°ƒç”¨å€¼ä¸ºNULL */</span></span><br><span class="line"><span class="comment">/* è‹¥æŸ¥æ‰¾æˆåŠŸï¼Œåˆ™æŒ‡é’ˆpæŒ‡å‘è¯¥æ•°æ®å…ƒç´ ç»“ç‚¹ï¼Œå¹¶è¿”å›TRUE */</span></span><br><span class="line"><span class="comment">/* å¦åˆ™æŒ‡é’ˆpæŒ‡å‘æŸ¥æ‰¾è·¯å¾„ä¸Šè®¿é—®çš„æœ€åä¸€ä¸ªç»“ç‚¹å¹¶è¿”å›FALSE */</span></span><br><span class="line"><span class="function">Status <span class="title">SearchBST</span><span class="params">(BiTree T, <span class="keyword">int</span> key, BiTree f, BiTree *p)</span> </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">	<span class="keyword">if</span> (!T)	<span class="comment">/*  æŸ¥æ‰¾ä¸æˆåŠŸ */</span></span><br><span class="line">	&#123; </span><br><span class="line">		*p = f;  </span><br><span class="line">		<span class="keyword">return</span> FALSE; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (key==T-&gt;data) <span class="comment">/*  æŸ¥æ‰¾æˆåŠŸ */</span></span><br><span class="line">	&#123; </span><br><span class="line">		*p = T;  </span><br><span class="line">		<span class="keyword">return</span> TRUE; </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (key&lt;T-&gt;data) </span><br><span class="line">		<span class="keyword">return</span> SearchBST(T-&gt;lchild, key, T, p);  <span class="comment">/*  åœ¨å·¦å­æ ‘ä¸­ç»§ç»­æŸ¥æ‰¾ */</span></span><br><span class="line">	<span class="keyword">else</span>  </span><br><span class="line">		<span class="keyword">return</span> SearchBST(T-&gt;rchild, key, T, p);  <span class="comment">/*  åœ¨å³å­æ ‘ä¸­ç»§ç»­æŸ¥æ‰¾ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ’å…¥<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*  å½“äºŒå‰æ’åºæ ‘Tä¸­ä¸å­˜åœ¨å…³é”®å­—ç­‰äºkeyçš„æ•°æ®å…ƒç´ æ—¶ï¼Œ */</span></span><br><span class="line"><span class="comment">/*  æ’å…¥keyå¹¶è¿”å›TRUEï¼Œå¦åˆ™è¿”å›FALSE */</span></span><br><span class="line"><span class="function">Status <span class="title">InsertBST</span><span class="params">(BiTree *T, <span class="keyword">int</span> key)</span> </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">	BiTree p,s;</span><br><span class="line">	<span class="comment">/* è‹¥æŸ¥æ‰¾æˆåŠŸï¼Œåˆ™æŒ‡é’ˆpæŒ‡å‘è¯¥æ•°æ®å…ƒç´ ç»“ç‚¹ï¼Œå¹¶è¿”å›TRUE */</span></span><br><span class="line">    <span class="comment">/* å¦åˆ™æŒ‡é’ˆpæŒ‡å‘æŸ¥æ‰¾è·¯å¾„ä¸Šè®¿é—®çš„æœ€åä¸€ä¸ªç»“ç‚¹å¹¶è¿”å›FALSE */</span></span><br><span class="line">	<span class="keyword">if</span> (!SearchBST(*T, key, <span class="literal">NULL</span>, &amp;p)) <span class="comment">/* æŸ¥æ‰¾ä¸æˆåŠŸ */</span></span><br><span class="line">	&#123;</span><br><span class="line">		s = (BiTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(BiTNode));</span><br><span class="line">		s-&gt;data = key;  </span><br><span class="line">		s-&gt;lchild = s-&gt;rchild = <span class="literal">NULL</span>;  </span><br><span class="line">		<span class="keyword">if</span> (!p) </span><br><span class="line">			*T = s;			<span class="comment">/*  æ’å…¥sä¸ºæ–°çš„æ ¹ç»“ç‚¹ */</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (key&lt;p-&gt;data) </span><br><span class="line">			p-&gt;lchild = s;	<span class="comment">/*  æ’å…¥sä¸ºå·¦å­©å­ */</span></span><br><span class="line">		<span class="keyword">else</span> </span><br><span class="line">			p-&gt;rchild = s;  <span class="comment">/*  æ’å…¥sä¸ºå³å­©å­ */</span></span><br><span class="line">		<span class="keyword">return</span> TRUE;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">		<span class="keyword">return</span> FALSE;  <span class="comment">/*  æ ‘ä¸­å·²æœ‰å…³é”®å­—ç›¸åŒçš„ç»“ç‚¹ï¼Œä¸å†æ’å…¥ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åˆ é™¤<blockquote>
<p>å¯¹åˆ é™¤ç»“ç‚¹ä¸‰ç§æƒ…å†µçš„åˆ†æ:</p>
<ul>
<li>å¶å­ç»“ç‚¹</li>
<li>ä»…æœ‰å·¦æˆ–å³å­æ ‘çš„ç»“ç‚¹ </li>
<li>å·¦å³å­æ ‘éƒ½æœ‰çš„ç»“ç‚¹</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ä»äºŒå‰æ’åºæ ‘ä¸­åˆ é™¤ç»“ç‚¹pï¼Œå¹¶é‡æ¥å®ƒçš„å·¦æˆ–å³å­æ ‘ã€‚ */</span></span><br><span class="line"><span class="function">Status <span class="title">Delete</span><span class="params">(BiTree *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BiTree q,s;</span><br><span class="line">	<span class="keyword">if</span>((*p)-&gt;rchild==<span class="literal">NULL</span>) <span class="comment">/* å³å­æ ‘ç©ºåˆ™åªéœ€é‡æ¥å®ƒçš„å·¦å­æ ‘ï¼ˆå¾…åˆ ç»“ç‚¹æ˜¯å¶å­ä¹Ÿèµ°æ­¤åˆ†æ”¯) */</span></span><br><span class="line">	&#123;</span><br><span class="line">		q=*p; *p=(*p)-&gt;lchild; <span class="built_in">free</span>(q);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>((*p)-&gt;lchild==<span class="literal">NULL</span>) <span class="comment">/* åªéœ€é‡æ¥å®ƒçš„å³å­æ ‘ */</span></span><br><span class="line">	&#123;</span><br><span class="line">		q=*p; *p=(*p)-&gt;rchild; <span class="built_in">free</span>(q);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">/* å·¦å³å­æ ‘å‡ä¸ç©º */</span></span><br><span class="line">	&#123;</span><br><span class="line">		q=*p; s=(*p)-&gt;lchild;</span><br><span class="line">		<span class="keyword">while</span>(s-&gt;rchild) <span class="comment">/* è½¬å·¦ï¼Œç„¶åå‘å³åˆ°å°½å¤´ï¼ˆæ‰¾å¾…åˆ ç»“ç‚¹çš„å‰é©±ï¼‰ */</span></span><br><span class="line">		&#123;</span><br><span class="line">			q=s;</span><br><span class="line">			s=s-&gt;rchild;</span><br><span class="line">		&#125;</span><br><span class="line">		(*p)-&gt;data=s-&gt;data; <span class="comment">/*  sæŒ‡å‘è¢«åˆ ç»“ç‚¹çš„ç›´æ¥å‰é©±ï¼ˆå°†è¢«åˆ ç»“ç‚¹å‰é©±çš„å€¼å–ä»£è¢«åˆ ç»“ç‚¹çš„å€¼ï¼‰ */</span></span><br><span class="line">		<span class="keyword">if</span>(q!=*p)</span><br><span class="line">			q-&gt;rchild=s-&gt;lchild; <span class="comment">/*  é‡æ¥qçš„å³å­æ ‘ */</span> </span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			q-&gt;lchild=s-&gt;lchild; <span class="comment">/*  é‡æ¥qçš„å·¦å­æ ‘ */</span></span><br><span class="line">		<span class="built_in">free</span>(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è‹¥äºŒå‰æ’åºæ ‘Tä¸­å­˜åœ¨å…³é”®å­—ç­‰äºkeyçš„æ•°æ®å…ƒç´ æ—¶ï¼Œåˆ™åˆ é™¤è¯¥æ•°æ®å…ƒç´ ç»“ç‚¹, */</span></span><br><span class="line"><span class="comment">/* å¹¶è¿”å›TRUEï¼›å¦åˆ™è¿”å›FALSEã€‚ */</span></span><br><span class="line"><span class="function">Status <span class="title">DeleteBST</span><span class="params">(BiTree *T,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">if</span>(!*T) <span class="comment">/* ä¸å­˜åœ¨å…³é”®å­—ç­‰äºkeyçš„æ•°æ®å…ƒç´  */</span> </span><br><span class="line">		<span class="keyword">return</span> FALSE;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (key==(*T)-&gt;data) <span class="comment">/* æ‰¾åˆ°å…³é”®å­—ç­‰äºkeyçš„æ•°æ®å…ƒç´  */</span> </span><br><span class="line">			<span class="keyword">return</span> Delete(T);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (key&lt;(*T)-&gt;data)</span><br><span class="line">			<span class="keyword">return</span> DeleteBST(&amp;(*T)-&gt;lchild,key);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> DeleteBST(&amp;(*T)-&gt;rchild,key);</span><br><span class="line">		 </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¹³è¡¡äºŒå‰æ ‘-AVLæ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘-AVLæ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘(AVLæ ‘)"></a>å¹³è¡¡äºŒå‰æ ‘(AVLæ ‘)</h1><ul>
<li>å¹³è¡¡äºŒå‰æ ‘(Balanced Binary Tree)(ç®€ç§°å¹³è¡¡æ ‘ï¼ŒAVL)ä¹Ÿæ˜¯äºŒå‰æ’åºæ ‘çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹åœ¨äºï¼Œå·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå·¦å³å­æ ‘é«˜åº¦ä¹‹å·®è¢«ç§°ä¸ºå¹³è¡¡å› å­ï¼Œæ¯æ¬¡æ’å…¥ä¸€ä¸ªæ–°çš„å€¼çš„æ—¶å€™ï¼Œéƒ½è¦æ£€æŸ¥äºŒå‰æ ‘çš„å¹³è¡¡ï¼Œä¹Ÿå°±æ˜¯å¹³è¡¡è°ƒæ•´</li>
<li>å°†äºŒå‰æ ‘ä¸Šç»“ç‚¹çš„å·¦å­æ ‘æ·±åº¦å‡å»å³å­æ ‘æ·±åº¦çš„å€¼ç§°ä¸ºå¹³è¡¡å› å­BF (Balanoe Factor)ï¼Œå¹³è¡¡å› ä¹åªå¯èƒ½æ˜¯-1ã€0å’Œ 1</li>
</ul>
<ul>
<li>åŸºæœ¬æ€æƒ³ï¼šåœ¨æ„å»ºäºŒå‰æ’åºæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œæ¯å½“æ’å…¥ä¸€ä¸ªç»“ç‚¹æ—¶ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å› æ’å…¥è€Œç ´åäº†æ ‘çš„å¹³è¡¡æ€§ï¼Œè‹¥æ˜¯ï¼Œåˆ™æ‰¾å‡ºæœ€å°ä¸å¹³è¡¡å­æ ‘ã€‚ åœ¨ä¿æŒäºŒå‰æ’åºæ ‘ç‰¹æ€§çš„å‰æä¸‹ï¼Œè°ƒæ•´æœ€å°ä¸å¹³è¡¡å­æ ‘ä¸­å„ç»“ç‚¹ä¹‹é—´çš„é“¾æ¥å…³ç³»ï¼Œè¿›è¡Œç›¸åº”çš„æ—‹è½¬ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„å¹³è¡¡å­æ ‘</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FALSE 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE 100 <span class="comment">/* å­˜å‚¨ç©ºé—´åˆå§‹åˆ†é…é‡ */</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Status;	<span class="comment">/* Statusæ˜¯å‡½æ•°çš„ç±»å‹,å…¶å€¼æ˜¯å‡½æ•°ç»“æœçŠ¶æ€ä»£ç ï¼Œå¦‚OKç­‰ */</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* äºŒå‰æ ‘çš„äºŒå‰é“¾è¡¨ç»“ç‚¹ç»“æ„å®šä¹‰ */</span></span><br><span class="line"><span class="keyword">typedef</span>  <span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span>	/* ç»“ç‚¹ç»“æ„ */</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> data;	<span class="comment">/* ç»“ç‚¹æ•°æ® */</span></span><br><span class="line">	<span class="keyword">int</span> bf; <span class="comment">/*  ç»“ç‚¹çš„å¹³è¡¡å› å­ */</span> </span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span> *<span class="title">lchild</span>, *<span class="title">rchild</span>;</span>	<span class="comment">/* å·¦å³å­©å­æŒ‡é’ˆ */</span></span><br><span class="line">&#125; BiTNode, *BiTree;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹ä»¥pä¸ºæ ¹çš„äºŒå‰æ’åºæ ‘ä½œå³æ—‹å¤„ç†ï¼Œ */</span></span><br><span class="line"><span class="comment">/* å¤„ç†ä¹‹åpæŒ‡å‘æ–°çš„æ ‘æ ¹ç»“ç‚¹ï¼Œå³æ—‹è½¬å¤„ç†ä¹‹å‰çš„å·¦å­æ ‘çš„æ ¹ç»“ç‚¹ */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">R_Rotate</span><span class="params">(BiTree *P)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	BiTree L;</span><br><span class="line">	L=(*P)-&gt;lchild; <span class="comment">/*  LæŒ‡å‘Pçš„å·¦å­æ ‘æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">	(*P)-&gt;lchild=L-&gt;rchild; <span class="comment">/*  Lçš„å³å­æ ‘æŒ‚æ¥ä¸ºPçš„å·¦å­æ ‘ */</span> </span><br><span class="line">	L-&gt;rchild=(*P);</span><br><span class="line">	*P=L; <span class="comment">/*  PæŒ‡å‘æ–°çš„æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹ä»¥Pä¸ºæ ¹çš„äºŒå‰æ’åºæ ‘ä½œå·¦æ—‹å¤„ç†ï¼Œ */</span></span><br><span class="line"><span class="comment">/* å¤„ç†ä¹‹åPæŒ‡å‘æ–°çš„æ ‘æ ¹ç»“ç‚¹ï¼Œå³æ—‹è½¬å¤„ç†ä¹‹å‰çš„å³å­æ ‘çš„æ ¹ç»“ç‚¹0  */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">L_Rotate</span><span class="params">(BiTree *P)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	BiTree R;</span><br><span class="line">	R=(*P)-&gt;rchild; <span class="comment">/*  RæŒ‡å‘Pçš„å³å­æ ‘æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">	(*P)-&gt;rchild=R-&gt;lchild; <span class="comment">/* Rçš„å·¦å­æ ‘æŒ‚æ¥ä¸ºPçš„å³å­æ ‘ */</span> </span><br><span class="line">	R-&gt;lchild=(*P);</span><br><span class="line">	*P=R; <span class="comment">/*  PæŒ‡å‘æ–°çš„æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LH +1 <span class="comment">/*  å·¦é«˜ */</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EH 0  <span class="comment">/*  ç­‰é«˜ */</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RH -1 <span class="comment">/*  å³é«˜ */</span> </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*  å¯¹ä»¥æŒ‡é’ˆTæ‰€æŒ‡ç»“ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘ä½œå·¦å¹³è¡¡æ—‹è½¬å¤„ç† */</span></span><br><span class="line"><span class="comment">/*  æœ¬ç®—æ³•ç»“æŸæ—¶ï¼ŒæŒ‡é’ˆTæŒ‡å‘æ–°çš„æ ¹ç»“ç‚¹ */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LeftBalance</span><span class="params">(BiTree *T)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	BiTree L,Lr;</span><br><span class="line">	L=(*T)-&gt;lchild; <span class="comment">/*  LæŒ‡å‘Tçš„å·¦å­æ ‘æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">	<span class="keyword">switch</span>(L-&gt;bf)</span><br><span class="line">	&#123; <span class="comment">/*  æ£€æŸ¥Tçš„å·¦å­æ ‘çš„å¹³è¡¡åº¦ï¼Œå¹¶ä½œç›¸åº”å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">		 <span class="keyword">case</span> LH: <span class="comment">/*  æ–°ç»“ç‚¹æ’å…¥åœ¨Tçš„å·¦å­©å­çš„å·¦å­æ ‘ä¸Šï¼Œè¦ä½œå•å³æ—‹å¤„ç† */</span> </span><br><span class="line">			(*T)-&gt;bf=L-&gt;bf=EH;</span><br><span class="line">			R_Rotate(T);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		 <span class="keyword">case</span> RH: <span class="comment">/*  æ–°ç»“ç‚¹æ’å…¥åœ¨Tçš„å·¦å­©å­çš„å³å­æ ‘ä¸Šï¼Œè¦ä½œåŒæ—‹å¤„ç† */</span> </span><br><span class="line">			Lr=L-&gt;rchild; <span class="comment">/*  LræŒ‡å‘Tçš„å·¦å­©å­çš„å³å­æ ‘æ ¹ */</span> </span><br><span class="line">			<span class="keyword">switch</span>(Lr-&gt;bf)</span><br><span class="line">			&#123; <span class="comment">/*  ä¿®æ”¹TåŠå…¶å·¦å­©å­çš„å¹³è¡¡å› å­ */</span> </span><br><span class="line">				<span class="keyword">case</span> LH: (*T)-&gt;bf=RH;</span><br><span class="line">						 L-&gt;bf=EH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> EH: (*T)-&gt;bf=L-&gt;bf=EH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> RH: (*T)-&gt;bf=EH;</span><br><span class="line">						 L-&gt;bf=LH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			Lr-&gt;bf=EH;</span><br><span class="line">			L_Rotate(&amp;(*T)-&gt;lchild); <span class="comment">/*  å¯¹Tçš„å·¦å­æ ‘ä½œå·¦æ—‹å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">			R_Rotate(T); <span class="comment">/*  å¯¹Tä½œå³æ—‹å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  å¯¹ä»¥æŒ‡é’ˆTæ‰€æŒ‡ç»“ç‚¹ä¸ºæ ¹çš„äºŒå‰æ ‘ä½œå³å¹³è¡¡æ—‹è½¬å¤„ç†ï¼Œ */</span> </span><br><span class="line"><span class="comment">/*  æœ¬ç®—æ³•ç»“æŸæ—¶ï¼ŒæŒ‡é’ˆTæŒ‡å‘æ–°çš„æ ¹ç»“ç‚¹ */</span> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">RightBalance</span><span class="params">(BiTree *T)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	BiTree R,Rl;</span><br><span class="line">	R=(*T)-&gt;rchild; <span class="comment">/*  RæŒ‡å‘Tçš„å³å­æ ‘æ ¹ç»“ç‚¹ */</span> </span><br><span class="line">	<span class="keyword">switch</span>(R-&gt;bf)</span><br><span class="line">	&#123; <span class="comment">/*  æ£€æŸ¥Tçš„å³å­æ ‘çš„å¹³è¡¡åº¦ï¼Œå¹¶ä½œç›¸åº”å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">	 <span class="keyword">case</span> RH: <span class="comment">/*  æ–°ç»“ç‚¹æ’å…¥åœ¨Tçš„å³å­©å­çš„å³å­æ ‘ä¸Šï¼Œè¦ä½œå•å·¦æ—‹å¤„ç† */</span> </span><br><span class="line">			  (*T)-&gt;bf=R-&gt;bf=EH;</span><br><span class="line">			  L_Rotate(T);</span><br><span class="line">			  <span class="keyword">break</span>;</span><br><span class="line">	 <span class="keyword">case</span> LH: <span class="comment">/*  æ–°ç»“ç‚¹æ’å…¥åœ¨Tçš„å³å­©å­çš„å·¦å­æ ‘ä¸Šï¼Œè¦ä½œåŒæ—‹å¤„ç† */</span> </span><br><span class="line">			  Rl=R-&gt;lchild; <span class="comment">/*  RlæŒ‡å‘Tçš„å³å­©å­çš„å·¦å­æ ‘æ ¹ */</span> </span><br><span class="line">			  <span class="keyword">switch</span>(Rl-&gt;bf)</span><br><span class="line">			  &#123; <span class="comment">/*  ä¿®æ”¹TåŠå…¶å³å­©å­çš„å¹³è¡¡å› å­ */</span> </span><br><span class="line">				<span class="keyword">case</span> RH: (*T)-&gt;bf=LH;</span><br><span class="line">						 R-&gt;bf=EH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> EH: (*T)-&gt;bf=R-&gt;bf=EH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> LH: (*T)-&gt;bf=EH;</span><br><span class="line">						 R-&gt;bf=RH;</span><br><span class="line">						 <span class="keyword">break</span>;</span><br><span class="line">			  &#125;</span><br><span class="line">			  Rl-&gt;bf=EH;</span><br><span class="line">			  R_Rotate(&amp;(*T)-&gt;rchild); <span class="comment">/*  å¯¹Tçš„å³å­æ ‘ä½œå³æ—‹å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">			  L_Rotate(T); <span class="comment">/*  å¯¹Tä½œå·¦æ—‹å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  è‹¥åœ¨å¹³è¡¡çš„äºŒå‰æ’åºæ ‘Tä¸­ä¸å­˜åœ¨å’Œeæœ‰ç›¸åŒå…³é”®å­—çš„ç»“ç‚¹ï¼Œåˆ™æ’å…¥ä¸€ä¸ª */</span> </span><br><span class="line"><span class="comment">/*  æ•°æ®å…ƒç´ ä¸ºeçš„æ–°ç»“ç‚¹ï¼Œå¹¶è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚è‹¥å› æ’å…¥è€Œä½¿äºŒå‰æ’åºæ ‘ */</span> </span><br><span class="line"><span class="comment">/*  å¤±å»å¹³è¡¡ï¼Œåˆ™ä½œå¹³è¡¡æ—‹è½¬å¤„ç†ï¼Œå¸ƒå°”å˜é‡talleråæ˜ Té•¿é«˜ä¸å¦ã€‚ */</span></span><br><span class="line"><span class="function">Status <span class="title">InsertAVL</span><span class="params">(BiTree *T,<span class="keyword">int</span> e,Status *taller)</span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">	<span class="keyword">if</span>(!*T)</span><br><span class="line">	&#123; <span class="comment">/*  æ’å…¥æ–°ç»“ç‚¹ï¼Œæ ‘â€œé•¿é«˜â€ï¼Œç½®tallerä¸ºTRUE */</span> </span><br><span class="line">		 *T=(BiTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(BiTNode));</span><br><span class="line">		 (*T)-&gt;data=e; (*T)-&gt;lchild=(*T)-&gt;rchild=<span class="literal">NULL</span>; (*T)-&gt;bf=EH;</span><br><span class="line">		 *taller=TRUE;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (e==(*T)-&gt;data)</span><br><span class="line">		&#123; <span class="comment">/*  æ ‘ä¸­å·²å­˜åœ¨å’Œeæœ‰ç›¸åŒå…³é”®å­—çš„ç»“ç‚¹åˆ™ä¸å†æ’å…¥ */</span> </span><br><span class="line">			*taller=FALSE; <span class="keyword">return</span> FALSE;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (e&lt;(*T)-&gt;data)</span><br><span class="line">		&#123; <span class="comment">/*  åº”ç»§ç»­åœ¨Tçš„å·¦å­æ ‘ä¸­è¿›è¡Œæœç´¢ */</span> </span><br><span class="line">			<span class="keyword">if</span>(!InsertAVL(&amp;(*T)-&gt;lchild,e,taller)) <span class="comment">/*  æœªæ’å…¥ */</span> </span><br><span class="line">				<span class="keyword">return</span> FALSE;</span><br><span class="line">			<span class="keyword">if</span>(*taller) <span class="comment">/*   å·²æ’å…¥åˆ°Tçš„å·¦å­æ ‘ä¸­ä¸”å·¦å­æ ‘â€œé•¿é«˜â€ */</span> </span><br><span class="line">				<span class="keyword">switch</span>((*T)-&gt;bf) <span class="comment">/*  æ£€æŸ¥Tçš„å¹³è¡¡åº¦ */</span> </span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">case</span> LH: <span class="comment">/*  åŸæœ¬å·¦å­æ ‘æ¯”å³å­æ ‘é«˜ï¼Œéœ€è¦ä½œå·¦å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">							LeftBalance(T);	*taller=FALSE; <span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> EH: <span class="comment">/*  åŸæœ¬å·¦ã€å³å­æ ‘ç­‰é«˜ï¼Œç°å› å·¦å­æ ‘å¢é«˜è€Œä½¿æ ‘å¢é«˜ */</span> </span><br><span class="line">							(*T)-&gt;bf=LH; *taller=TRUE; <span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> RH: <span class="comment">/*  åŸæœ¬å³å­æ ‘æ¯”å·¦å­æ ‘é«˜ï¼Œç°å·¦ã€å³å­æ ‘ç­‰é«˜ */</span>  </span><br><span class="line">							(*T)-&gt;bf=EH; *taller=FALSE; <span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123; <span class="comment">/*  åº”ç»§ç»­åœ¨Tçš„å³å­æ ‘ä¸­è¿›è¡Œæœç´¢ */</span> </span><br><span class="line">			<span class="keyword">if</span>(!InsertAVL(&amp;(*T)-&gt;rchild,e,taller)) <span class="comment">/*  æœªæ’å…¥ */</span> </span><br><span class="line">				<span class="keyword">return</span> FALSE;</span><br><span class="line">			<span class="keyword">if</span>(*taller) <span class="comment">/*  å·²æ’å…¥åˆ°Tçš„å³å­æ ‘ä¸”å³å­æ ‘â€œé•¿é«˜â€ */</span> </span><br><span class="line">				<span class="keyword">switch</span>((*T)-&gt;bf) <span class="comment">/*  æ£€æŸ¥Tçš„å¹³è¡¡åº¦ */</span> </span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">case</span> LH: <span class="comment">/*  åŸæœ¬å·¦å­æ ‘æ¯”å³å­æ ‘é«˜ï¼Œç°å·¦ã€å³å­æ ‘ç­‰é«˜ */</span> </span><br><span class="line">							(*T)-&gt;bf=EH; *taller=FALSE;	<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> EH: <span class="comment">/*  åŸæœ¬å·¦ã€å³å­æ ‘ç­‰é«˜ï¼Œç°å› å³å­æ ‘å¢é«˜è€Œä½¿æ ‘å¢é«˜  */</span></span><br><span class="line">							(*T)-&gt;bf=RH; *taller=TRUE; <span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">case</span> RH: <span class="comment">/*  åŸæœ¬å³å­æ ‘æ¯”å·¦å­æ ‘é«˜ï¼Œéœ€è¦ä½œå³å¹³è¡¡å¤„ç† */</span> </span><br><span class="line">							RightBalance(T); *taller=FALSE; <span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>]=&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>&#125;;</span><br><span class="line">	BiTree T=<span class="literal">NULL</span>;</span><br><span class="line">	Status taller;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		InsertAVL(&amp;T,a[i],&amp;taller);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"æœ¬æ ·ä¾‹å»ºè®®æ–­ç‚¹è·Ÿè¸ªæŸ¥çœ‹å¹³è¡¡äºŒå‰æ ‘ç»“æ„"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ•£åˆ—è¡¨æŸ¥æ‰¾-å“ˆå¸Œè¡¨"><a href="#æ•£åˆ—è¡¨æŸ¥æ‰¾-å“ˆå¸Œè¡¨" class="headerlink" title="æ•£åˆ—è¡¨æŸ¥æ‰¾(å“ˆå¸Œè¡¨)"></a>æ•£åˆ—è¡¨æŸ¥æ‰¾(å“ˆå¸Œè¡¨)</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul>
<li><p>å®šä¹‰ï¼šæ•£åˆ—æŠ€æœ¯æ˜¯åœ¨è®°å½•çš„å­˜å‚¨ä½ç½®å’Œå®ƒçš„å…³é”®å­—ä¹‹é—´å»ºç«‹ä¸€ä¸ªç¡®å®šçš„å¯¹åº”å…³ç³»fï¼Œä½¿å¾—æ¯ä¸ªå…³é”®å­—keyå¯¹åº”ä¸€ä¸ªå­˜å‚¨ä½ç½®f(key)ã€‚è¿™ç§å¯¹åº”å…³ç³»fç§°ä¸ºæ•£åˆ—å‡½æ•°ï¼Œ åˆç§°ä¸ºå“ˆå¸Œ( Hash) å‡½æ•°ã€‚é‡‡ç”¨æ•£åˆ—æŠ€æœ¯å°†è®°å½•å­˜å‚¨åœ¨ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­ï¼Œè¿™å—è¿ç»­å­˜å‚¨ç©ºé—´ç§°ä¸ºæ•£åˆ—è¡¨æˆ–å“ˆå¸Œè¡¨(Hash table)ã€‚</p>
</li>
<li><p>æ•£åˆ—æŠ€æœ¯æ—¢æ˜¯ä¸€ç§å­˜å‚¨æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸€ç§æŸ¥æ‰¾æ–¹æ³•ã€‚ä¸¤ä¸ªå…³é”®å­—key1â‰ key2ï¼Œä½†æ˜¯å´æœ‰f(key1)=f(key2) ï¼Œè¿™ç§ç°è±¡æˆ‘ä»¬ç§°ä¸ºå†²çª(collision) ï¼Œå¹¶æŠŠkey1 å’Œkey2 ç§°ä¸ºè¿™ä¸ªæ•£åˆ—å‡½æ•°çš„åŒä¹‰è¯(synonym) ã€‚</p>
</li>
</ul>
<h2 id="æ•£åˆ—å‡½æ•°çš„æ„é€ æ–¹æ³•"><a href="#æ•£åˆ—å‡½æ•°çš„æ„é€ æ–¹æ³•" class="headerlink" title="æ•£åˆ—å‡½æ•°çš„æ„é€ æ–¹æ³•"></a>æ•£åˆ—å‡½æ•°çš„æ„é€ æ–¹æ³•</h2><h3 id="ç›´æ¥å®šå€æ³•"><a href="#ç›´æ¥å®šå€æ³•" class="headerlink" title="ç›´æ¥å®šå€æ³•"></a>ç›´æ¥å®šå€æ³•</h3><p>å–å…³é”®å­—çš„æŸä¸ªçº¿æ€§å‡½æ•°å€¼ä¸ºæ•£åˆ—åœ°å€ï¼š</p>
<script type="math/tex; mode=display">f(key)=keyÃ—a+b(aã€bä¸ºå¸¸æ•°)</script><p>é€‚åˆæŸ¥æ‰¾è¡¨è¾ƒå°ä¸”è¿ç»­çš„æƒ…å†µã€‚</p>
<h3 id="æ•°å­—åˆ†ææ³•"><a href="#æ•°å­—åˆ†ææ³•" class="headerlink" title="æ•°å­—åˆ†ææ³•"></a>æ•°å­—åˆ†ææ³•</h3><p>ä½¿ç”¨å…³é”®å­—çš„ä¸€éƒ¨åˆ†æ¥è®¡ç®—æ•£åˆ—å­˜å‚¨ä½ç½®çš„æ–¹æ³•ã€‚é€‚åˆå¤„ç†å…³é”®å­—ä½æ•°æ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œå¦‚æœäº‹å…ˆçŸ¥é“å…³é”®å­—çš„åˆ†å¸ƒä¸”å…³é”®å­—çš„è‹¥å¹²ä½åˆ†å¸ƒè¾ƒå‡åŒ€ï¼Œå°±å¯ä»¥è€ƒè™‘ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h3 id="å¹³æ–¹å–ä¸­æ³•"><a href="#å¹³æ–¹å–ä¸­æ³•" class="headerlink" title="å¹³æ–¹å–ä¸­æ³•"></a>å¹³æ–¹å–ä¸­æ³•</h3><p>å¯¹å…³é”®å­—çš„å¹³æ–¹åå–ä¸­é—´éƒ¨åˆ†çš„å€¼ã€‚æ¯”è¾ƒé€‚åˆå­ä¸çŸ¥é“å…³é”®å­—çš„åˆ†å¸ƒï¼Œè€Œä½æ•°åˆä¸æ˜¯å¾ˆå¤§çš„æƒ…å†µã€‚</p>
<h3 id="æŠ˜å æ³•"><a href="#æŠ˜å æ³•" class="headerlink" title="æŠ˜å æ³•"></a>æŠ˜å æ³•</h3><p>å°†å…³é”®å­—ä»å·¦åˆ°å³åˆ†å‰²æˆä½æ•°ç›¸ç­‰çš„å‡ éƒ¨åˆ†(æ³¨æ„æœ€åä¸€éƒ¨åˆ†ä½æ•°ä¸å¤Ÿæ—¶å¯ä»¥çŸ­äº›) ï¼Œç„¶åå°†è¿™å‡ éƒ¨åˆ†å åŠ æ±‚å’Œï¼Œå¹¶æŒ‰æ•£åˆ—è¡¨è¡¨é•¿ï¼Œå–åå‡ ä½ä½œä¸ºæ•£åˆ—åœ°å€ã€‚æŠ˜å æ³•äº‹å…ˆä¸éœ€è¦çŸ¥é“å…³é”®å­—çš„åˆ†å¸ƒï¼Œé€‚åˆå…³é”®å­—ä½æ•°è¾ƒå¤šçš„æƒ…å†µã€‚</p>
<h3 id="é™¤ç•™ä½™æ•°æ³•"><a href="#é™¤ç•™ä½™æ•°æ³•" class="headerlink" title="é™¤ç•™ä½™æ•°æ³•"></a>é™¤ç•™ä½™æ•°æ³•</h3><p>æ­¤æ–¹æ³•ä¸ºæœ€å¸¸ç”¨çš„æ„é€ æ•£åˆ—å‡½æ•°æ–¹æ³•ã€‚å¯¹äºæ•£åˆ—è¡¨é•¿ä¸ºmçš„æ•£åˆ—å‡½æ•°å…¬å¼ä¸º:</p>
<script type="math/tex; mode=display">f(key)=key \ mod\ p(pâ©½m)</script><p>mod æ˜¯å–æ¨¡(æ±‚ä½™æ•°)çš„æ„æ€ ï¼Œè¿™æ–¹æ³•ä¸ä»…å¯ä»¥å¯¹å…³é”®å­—ç›´æ¥å–æ¨¡ï¼Œä¹Ÿå¯åœ¨æŠ˜å ã€å¹³æ–¹å–ä¸­åå†å–æ¨¡ã€‚<br>è‹¥æ•£åˆ—è¡¨è¡¨é•¿ä¸ºmï¼Œ é€šå¸¸pä¸ºå°äºæˆ–ç­‰äºè¡¨é•¿(æœ€å¥½æ¥è¿‘m ) çš„æœ€å°è´¨æ•°æˆ–ä¸åŒ…å«å°å­20è´¨å› å­çš„åˆæ•°ã€‚</p>
<h3 id="éšæœºæ•°æ³•"><a href="#éšæœºæ•°æ³•" class="headerlink" title="éšæœºæ•°æ³•"></a>éšæœºæ•°æ³•</h3><p>é€‰æ‹©ä¸€ä¸ªéšæœºæ•°ï¼Œå–å…³é”®å­—çš„éšæœºå‡½æ•°å€¼ä¸ºå®ƒçš„æ•£åˆ—åœ°å€:</p>
<script type="math/tex; mode=display">f(key)=random(key)</script><h2 id="å¤„ç†æ•£åˆ—å†²çªçš„æ–¹æ³•"><a href="#å¤„ç†æ•£åˆ—å†²çªçš„æ–¹æ³•" class="headerlink" title="å¤„ç†æ•£åˆ—å†²çªçš„æ–¹æ³•"></a>å¤„ç†æ•£åˆ—å†²çªçš„æ–¹æ³•</h2><h3 id="å¼€æ”¾å®šå€æ³•"><a href="#å¼€æ”¾å®šå€æ³•" class="headerlink" title="å¼€æ”¾å®šå€æ³•"></a>å¼€æ”¾å®šå€æ³•</h3><p>ä¸€æ—¦å‘ç”Ÿäº†å†²çªï¼Œ å°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€ï¼Œåªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°ï¼Œå¹¶å°†è®°å½•å­˜å…¥ã€‚</p>
<script type="math/tex; mode=display">fi(key)=(f(key)+di)\ MOD\ m(di=1,2,3,..,mâˆ’1)</script><p>ä¸ºäº†ä¸è®©å…³é”®å­—éƒ½èšé›†åœ¨æŸä¸€å—åŒºåŸŸ,ä¸€èˆ¬å¢åŠ å¹³æ–¹è¿ç®—ï¼š</p>
<script type="math/tex; mode=display">f_i(key)=(f(key)+d_i)\ MOD\ m(di=12,âˆ’12,22,âˆ’22,..,q2,âˆ’q2,qâ©½m/2)</script><p>åœ¨å†²çªæ—¶ï¼Œå¯¹äºä½ç§»é‡$d_i$ï¼Œé‡‡ç”¨éšæœºå‡½æ•°è®¡ç®—å¾—åˆ°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºéšæœºæ¢æµ‹æ³•:</p>
<script type="math/tex; mode=display">f_i(key)=(f(key)+d_i)MODm(diæ˜¯ä¸€ä¸ªéšæœºæ•°åˆ—)</script><h3 id="å†æ•£åˆ—å‡½æ•°æ³•"><a href="#å†æ•£åˆ—å‡½æ•°æ³•" class="headerlink" title="å†æ•£åˆ—å‡½æ•°æ³•"></a>å†æ•£åˆ—å‡½æ•°æ³•</h3><p>æˆ‘ä»¬äº‹å…ˆå‡†å¤‡å¤šä¸ªæ•£åˆ—å‡½æ•°ã€‚</p>
<script type="math/tex; mode=display">fi(key)=RHi(key)(i=1,2,3,..,k)</script><p>è¿™é‡ŒRHiå°±æ˜¯ä¸åŒçš„æ•£åˆ—å‡½æ•°ã€‚è¿™ç§æ–¹æ³•èƒ½å¤Ÿä½¿å¾—å…³é”®å­—ä¸äº§ç”Ÿèšé›†ï¼Œä½†ä¹Ÿå¢åŠ äº†è®¡ç®—çš„æ—¶é—´ã€‚</p>
<h3 id="é“¾åœ°å€æ³•"><a href="#é“¾åœ°å€æ³•" class="headerlink" title="é“¾åœ°å€æ³•"></a>é“¾åœ°å€æ³•</h3><p>å°†æ‰€æœ‰å…³é”®å­—ä¸ºåŒä¹‰è¯çš„è®°å½•å­˜å‚¨åœ¨ä¸€ä¸ªå•é“¾è¡¨ä¸­ï¼Œæˆ‘ä»¬ç§°è¿™ç§è¡¨ä¸ºåŒä¹‰è¯å­è¡¨ï¼Œåœ¨æ•£åˆ—è¡¨ä¸­åªå­˜å‚¨æ‰€æœ‰åŒä¹‰è¯å­è¡¨çš„å¤´æŒ‡é’ˆã€‚</p>
<p>å®ƒæä¾›äº†ç»ä¸ä¼šå‡ºç°æ‰¾ä¸åˆ°åœ°å€çš„ä¿éšœï¼Œä½†ä¹Ÿå¸¦æ¥äº†æŸ¥æ‰¾æ—¶éœ€è¦éå†å•é“¾è£…çš„æ€§èƒ½æŸè€—ã€‚</p>
<h3 id="å…¬å…±æº¢å‡ºåŒºæ³•"><a href="#å…¬å…±æº¢å‡ºåŒºæ³•" class="headerlink" title="å…¬å…±æº¢å‡ºåŒºæ³•"></a>å…¬å…±æº¢å‡ºåŒºæ³•</h3><p>ä¸ºæ‰€æœ‰å†²çªçš„å…³é”®å­—å»ºç«‹äº†ä¸€ä¸ªå…¬å…±çš„æº¢å‡ºåŒºæ¥å­˜æ”¾ã€‚åœ¨æŸ¥æ‰¾æ—¶ï¼Œå¯¹ç»™å®šå€¼é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®—å‡ºæ•£åˆ—åœ°å€åï¼Œå…ˆä¸åŸºæœ¬è¡¨çš„ç›¸åº”ä½ç½®è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼› å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™åˆ°æº¢å‡ºè¡¨å»è¿›è¡Œé¡ºåºæŸ¥æ‰¾ã€‚</p>
<h2 id="æ•£åˆ—è¡¨æŸ¥æ‰¾å®ç°"><a href="#æ•£åˆ—è¡¨æŸ¥æ‰¾å®ç°" class="headerlink" title="æ•£åˆ—è¡¨æŸ¥æ‰¾å®ç°"></a>æ•£åˆ—è¡¨æŸ¥æ‰¾å®ç°</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> OK 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FALSE 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE 100 <span class="comment">/* å­˜å‚¨ç©ºé—´åˆå§‹åˆ†é…é‡ */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SUCCESS 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> UNSUCCESS 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HASHSIZE 12 <span class="comment">/* å®šä¹‰æ•£åˆ—è¡¨é•¿ä¸ºæ•°ç»„çš„é•¿åº¦ */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NULLKEY -32768</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Status;	<span class="comment">/* Statusæ˜¯å‡½æ•°çš„ç±»å‹,å…¶å€¼æ˜¯å‡½æ•°ç»“æœçŠ¶æ€ä»£ç ï¼Œå¦‚OKç­‰ */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> *elem; <span class="comment">/* æ•°æ®å…ƒç´ å­˜å‚¨åŸºå€ï¼ŒåŠ¨æ€åˆ†é…æ•°ç»„ */</span></span><br><span class="line">    <span class="keyword">int</span> count; <span class="comment">/*  å½“å‰æ•°æ®å…ƒç´ ä¸ªæ•° */</span></span><br><span class="line">&#125;HashTable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> m=<span class="number">0</span>; <span class="comment">/* æ•£åˆ—è¡¨è¡¨é•¿ï¼Œå…¨å±€å˜é‡ */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆå§‹åŒ–æ•£åˆ—è¡¨ */</span></span><br><span class="line"><span class="function">Status <span class="title">InitHashTable</span><span class="params">(HashTable *H)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    m=HASHSIZE;</span><br><span class="line">    H-&gt;count=m;</span><br><span class="line">    H-&gt;elem=(<span class="keyword">int</span> *)<span class="built_in">malloc</span>(m*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        H-&gt;elem[i]=NULLKEY;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ•£åˆ—å‡½æ•° */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Hash</span><span class="params">(<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> key % m; <span class="comment">/* é™¤ç•™ä½™æ•°æ³• */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ’å…¥å…³é”®å­—è¿›æ•£åˆ—è¡¨ */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertHash</span><span class="params">(HashTable *H,<span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> addr = Hash(key); <span class="comment">/* æ±‚æ•£åˆ—åœ°å€ */</span></span><br><span class="line">    <span class="keyword">while</span> (H-&gt;elem[addr] != NULLKEY) <span class="comment">/* å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å†²çª */</span></span><br><span class="line">    &#123;</span><br><span class="line">        addr = (addr+<span class="number">1</span>) % m; <span class="comment">/* å¼€æ”¾å®šå€æ³•çš„çº¿æ€§æ¢æµ‹ */</span></span><br><span class="line">    &#125;</span><br><span class="line">    H-&gt;elem[addr] = key; <span class="comment">/* ç›´åˆ°æœ‰ç©ºä½åæ’å…¥å…³é”®å­— */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ•£åˆ—è¡¨æŸ¥æ‰¾å…³é”®å­— */</span></span><br><span class="line"><span class="function">Status <span class="title">SearchHash</span><span class="params">(HashTable H,<span class="keyword">int</span> key,<span class="keyword">int</span> *addr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    *addr = Hash(key);  <span class="comment">/* æ±‚æ•£åˆ—åœ°å€ */</span></span><br><span class="line">    <span class="keyword">while</span>(H.elem[*addr] != key) <span class="comment">/* å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å†²çª */</span></span><br><span class="line">    &#123;</span><br><span class="line">        *addr = (*addr+<span class="number">1</span>) % m; <span class="comment">/* å¼€æ”¾å®šå€æ³•çš„çº¿æ€§æ¢æµ‹ */</span></span><br><span class="line">        <span class="keyword">if</span> (H.elem[*addr] == NULLKEY || *addr == Hash(key)) <span class="comment">/* å¦‚æœå¾ªç¯å›åˆ°åŸç‚¹ */</span></span><br><span class="line">            <span class="keyword">return</span> UNSUCCESS;	<span class="comment">/* åˆ™è¯´æ˜å…³é”®å­—ä¸å­˜åœ¨ */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[HASHSIZE]=&#123;<span class="number">12</span>,<span class="number">67</span>,<span class="number">56</span>,<span class="number">16</span>,<span class="number">25</span>,<span class="number">37</span>,<span class="number">22</span>,<span class="number">29</span>,<span class="number">15</span>,<span class="number">47</span>,<span class="number">48</span>,<span class="number">34</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> i,p,key,result;</span><br><span class="line">    HashTable H;</span><br><span class="line"></span><br><span class="line">    key=<span class="number">39</span>;</span><br><span class="line"></span><br><span class="line">    InitHashTable(&amp;H);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        InsertHash(&amp;H,arr[i]);</span><br><span class="line"></span><br><span class="line">    result=SearchHash(H,key,&amp;p);</span><br><span class="line">    <span class="keyword">if</span> (result)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"æŸ¥æ‰¾ %d çš„åœ°å€ä¸ºï¼š%d \n"</span>,key,p);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"æŸ¥æ‰¾ %d å¤±è´¥ã€‚\n"</span>,key);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        key=arr[i];</span><br><span class="line">        SearchHash(H,key,&amp;p);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"æŸ¥æ‰¾ %d çš„åœ°å€ä¸ºï¼š%d \n"</span>,key,p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191027131236947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
]]></content>
      <categories>
        <category>Data Structures and Algorithms</category>
      </categories>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•â€”â€”æ’åº</title>
    <url>/2019/10/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E2%80%94%E2%80%94%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æœ¯è¯­è¯´æ˜ï¼š"><a href="#æœ¯è¯­è¯´æ˜ï¼š" class="headerlink" title="æœ¯è¯­è¯´æ˜ï¼š"></a>æœ¯è¯­è¯´æ˜ï¼š</h1><ul>
<li>ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ï¼›</li>
<li>ä¸ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaå¯èƒ½ä¼šå‡ºç°åœ¨bçš„åé¢ï¼›</li>
<li>å†…æ’åºï¼šæ‰€æœ‰æ’åºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼›</li>
<li>å¤–æ’åºï¼šç”±äºæ•°æ®å¤ªå¤§ï¼Œå› æ­¤æŠŠæ•°æ®æ”¾åœ¨ç£ç›˜ä¸­ï¼Œè€Œæ’åºé€šè¿‡ç£ç›˜å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“æ‰èƒ½è¿›è¡Œï¼›</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼š ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€è€—è´¹çš„æ—¶é—´ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šè¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚</li>
</ul><a id="more"></a>
<h1 id="ç®—æ³•åˆ†ç±»"><a href="#ç®—æ³•åˆ†ç±»" class="headerlink" title="ç®—æ³•åˆ†ç±»:"></a>ç®—æ³•åˆ†ç±»:</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190724204533683.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p>
<h1 id="ç®—æ³•æ€»ç»“"><a href="#ç®—æ³•æ€»ç»“" class="headerlink" title="ç®—æ³•æ€»ç»“"></a>ç®—æ³•æ€»ç»“</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190724204455511.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Status; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE 10000  <span class="comment">/* ç”¨äºè¦æ’åºæ•°ç»„ä¸ªæ•°æœ€å¤§å€¼ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ */</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> r[MAXSIZE+<span class="number">1</span>];	<span class="comment">/* ç”¨äºå­˜å‚¨è¦æ’åºæ•°ç»„ï¼Œr[0]ç”¨ä½œå“¨å…µæˆ–ä¸´æ—¶å˜é‡ */</span></span><br><span class="line">	<span class="keyword">int</span> length;			<span class="comment">/* ç”¨äºè®°å½•é¡ºåºè¡¨çš„é•¿åº¦ */</span></span><br><span class="line">&#125;SqList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* äº¤æ¢Lä¸­æ•°ç»„rçš„ä¸‹æ ‡ä¸ºiå’Œjçš„å€¼ */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(SqList *L,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> temp=L-&gt;r[i]; </span><br><span class="line">	L-&gt;r[i]=L-&gt;r[j]; </span><br><span class="line">	L-&gt;r[j]=temp; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="1-å†’æ³¡æ’åº"><a href="#1-å†’æ³¡æ’åº" class="headerlink" title="1.å†’æ³¡æ’åº"></a>1.å†’æ³¡æ’åº</h2><p>ä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤å…ƒç´ ï¼Œè‹¥å‰ä¸€å…ƒç´ å¤§äºåä¸€å…ƒç´ åˆ™äº¤æ¢ä¹‹ï¼Œç›´è‡³æœ€åä¸€ä¸ªå…ƒç´ å³ä¸ºæœ€å¤§ï¼›ç„¶åé‡æ–°ä»é¦–å…ƒç´ å¼€å§‹é‡å¤åŒæ ·çš„æ“ä½œï¼Œç›´è‡³å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ å³ä¸ºæ¬¡å¤§å…ƒç´ ï¼›ä¾æ¬¡ç±»æ¨ã€‚å¦‚åŒæ°´ä¸­çš„æ°”æ³¡ï¼Œä¾æ¬¡å°†æœ€å¤§æˆ–æœ€å°å…ƒç´ æ°”æ³¡æµ®å‡ºæ°´é¢ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå†’æ³¡æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;L-&gt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=L-&gt;length<span class="number">-1</span>;j&gt;=i;j--)  <span class="comment">/* æ³¨æ„jæ˜¯ä»åå¾€å‰å¾ªç¯ */</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(L-&gt;r[j]&gt;L-&gt;r[j+<span class="number">1</span>]) <span class="comment">/* è‹¥å‰è€…å¤§äºåè€…ï¼ˆæ³¨æ„è¿™é‡Œä¸ä¸Šä¸€ç®—æ³•çš„å·®å¼‚ï¼‰*/</span></span><br><span class="line">			&#123;</span><br><span class="line">				 swap(L,j,j+<span class="number">1</span>);<span class="comment">/* äº¤æ¢L-&gt;r[j]ä¸L-&gt;r[j+1]çš„å€¼ */</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œæ”¹è¿›å†’æ³¡ç®—æ³• */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSort2</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	Status flag=TRUE;			<span class="comment">/* flagç”¨æ¥ä½œä¸ºæ ‡è®° */</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;L-&gt;length &amp;&amp; flag;i++) <span class="comment">/* è‹¥flagä¸ºtrueè¯´æ˜æœ‰è¿‡æ•°æ®äº¤æ¢ï¼Œå¦åˆ™åœæ­¢å¾ªç¯ */</span></span><br><span class="line">	&#123;</span><br><span class="line">		flag=FALSE;				<span class="comment">/* åˆå§‹ä¸ºFalse */</span></span><br><span class="line">		<span class="keyword">for</span>(j=L-&gt;length<span class="number">-1</span>;j&gt;=i;j--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(L-&gt;r[j]&gt;L-&gt;r[j+<span class="number">1</span>])</span><br><span class="line">			&#123;</span><br><span class="line">				 swap(L,j,j+<span class="number">1</span>);	<span class="comment">/* äº¤æ¢L-&gt;r[j]ä¸L-&gt;r[j+1]çš„å€¼ */</span></span><br><span class="line">				 flag=TRUE;		<span class="comment">/* å¦‚æœæœ‰æ•°æ®äº¤æ¢ï¼Œåˆ™flagä¸ºtrue */</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</p>
<h2 id="2-ç®€å•é€‰æ‹©æ’åº"><a href="#2-ç®€å•é€‰æ‹©æ’åº" class="headerlink" title="2.ç®€å•é€‰æ‹©æ’åº"></a>2.ç®€å•é€‰æ‹©æ’åº</h2><p>é¦–å…ˆåˆå§‹åŒ–æœ€å°å…ƒç´ ç´¢å¼•å€¼ä¸ºé¦–å…ƒç´ ï¼Œä¾æ¬¡éå†å¾…æ’åºæ•°åˆ—ï¼Œè‹¥é‡åˆ°å°äºè¯¥æœ€å°ç´¢å¼•ä½ç½®å¤„çš„å…ƒç´ åˆ™åˆ·æ–°æœ€å°ç´¢å¼•ä¸ºè¯¥è¾ƒå°å…ƒç´ çš„ä½ç½®ï¼Œç›´è‡³é‡åˆ°å°¾å…ƒç´ ï¼Œç»“æŸä¸€æ¬¡éå†ï¼Œå¹¶å°†æœ€å°ç´¢å¼•å¤„å…ƒç´ ä¸é¦–å…ƒç´ äº¤æ¢ï¼›ç„¶åï¼Œåˆå§‹åŒ–æœ€å°ç´¢å¼•å€¼ä¸ºç¬¬äºŒä¸ªå¾…æ’åºæ•°åˆ—å…ƒç´ ä½ç½®ï¼ŒåŒæ ·çš„æ“ä½œï¼Œå¯å¾—åˆ°æ•°åˆ—ç¬¬äºŒä¸ªå…ƒç´ å³ä¸ºæ¬¡å°å…ƒç´ ï¼›ä»¥æ­¤ç±»æ¨ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œç®€å•é€‰æ‹©æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SelectSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,min;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;L-&gt;length;i++)</span><br><span class="line">	&#123; </span><br><span class="line">		min = i;						<span class="comment">/* å°†å½“å‰ä¸‹æ ‡å®šä¹‰ä¸ºæœ€å°å€¼ä¸‹æ ‡ */</span></span><br><span class="line">		<span class="keyword">for</span> (j = i+<span class="number">1</span>;j&lt;=L-&gt;length;j++)<span class="comment">/* å¾ªç¯ä¹‹åçš„æ•°æ® */</span></span><br><span class="line">        &#123;</span><br><span class="line">			<span class="keyword">if</span> (L-&gt;r[min]&gt;L-&gt;r[j])	<span class="comment">/* å¦‚æœæœ‰å°äºå½“å‰æœ€å°å€¼çš„å…³é”®å­— */</span></span><br><span class="line">                min = j;				<span class="comment">/* å°†æ­¤å…³é”®å­—çš„ä¸‹æ ‡èµ‹å€¼ç»™min */</span></span><br><span class="line">        &#125;</span><br><span class="line">		<span class="keyword">if</span>(i!=min)						<span class="comment">/* è‹¥minä¸ç­‰äºiï¼Œè¯´æ˜æ‰¾åˆ°æœ€å°å€¼ï¼Œäº¤æ¢ */</span></span><br><span class="line">			swap(L,i,min);				<span class="comment">/* äº¤æ¢L-&gt;r[i]ä¸L-&gt;r[min]çš„å€¼ */</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦ï¼š O(n)ï¼Œä½†ç®€å•é€‰æ‹©æ’åºçš„æ€§èƒ½ä¸Šè¿˜æ˜¯è¦ç•¥ä¼˜äºå†’æ³¡æ’åºã€‚</p>
<h2 id="3-ç›´æ¥æ’å…¥æ’åº"><a href="#3-ç›´æ¥æ’å…¥æ’åº" class="headerlink" title="3.ç›´æ¥æ’å…¥æ’åº"></a>3.ç›´æ¥æ’å…¥æ’åº</h2><p>æ•°åˆ—å‰é¢éƒ¨åˆ†çœ‹ä¸ºæœ‰åºï¼Œä¾æ¬¡å°†åé¢çš„æ— åºæ•°åˆ—å…ƒç´ æ’å…¥åˆ°å‰é¢çš„æœ‰åºæ•°åˆ—ä¸­ï¼Œåˆå§‹çŠ¶æ€æœ‰åºæ•°åˆ—ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå³é¦–å…ƒç´ ã€‚åœ¨å°†æ— åºæ•°åˆ—å…ƒç´ æ’å…¥æœ‰åºæ•°åˆ—çš„è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨äº†é€†åºéå†æœ‰åºæ•°åˆ—ï¼Œç›¸è¾ƒäºé¡ºåºéå†ä¼šç¨æ˜¾ç¹çï¼Œä½†å½“æ•°åˆ—æœ¬èº«å·²è¿‘æ’åºçŠ¶æ€æ•ˆç‡ä¼šæ›´é«˜ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œç›´æ¥æ’å…¥æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=L-&gt;length;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (L-&gt;r[i]&lt;L-&gt;r[i<span class="number">-1</span>]) <span class="comment">/* éœ€å°†L-&gt;r[i]æ’å…¥æœ‰åºå­è¡¨ */</span></span><br><span class="line">		&#123;</span><br><span class="line">			L-&gt;r[<span class="number">0</span>]=L-&gt;r[i]; <span class="comment">/* è®¾ç½®å“¨å…µ */</span></span><br><span class="line">			<span class="keyword">for</span>(j=i<span class="number">-1</span>;L-&gt;r[j]&gt;L-&gt;r[<span class="number">0</span>];j--)</span><br><span class="line">				L-&gt;r[j+<span class="number">1</span>]=L-&gt;r[j]; <span class="comment">/* è®°å½•åç§» */</span></span><br><span class="line">			L-&gt;r[j+<span class="number">1</span>]=L-&gt;r[<span class="number">0</span>]; <span class="comment">/* æ’å…¥åˆ°æ­£ç¡®ä½ç½® */</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦ï¼š O(n)ï¼Œç›´æ¥æ’å…¥æ’åºæ³•æ¯”å†’ç‚®å’Œç®€å•é€‰æ‹©æ’åºçš„æ€§èƒ½è¦å¥½ä¸€äº›ã€‚</p>
<h2 id="4-å¸Œå°”æ’åº"><a href="#4-å¸Œå°”æ’åº" class="headerlink" title="4.å¸Œå°”æ’åº"></a>4.å¸Œå°”æ’åº</h2><p>1959å¹´Shellå‘æ˜ï¼Œç¬¬ä¸€ä¸ªçªç ´O(n2)çš„æ’åºç®—æ³•ï¼Œæ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆã€‚å®ƒä¸æ’å…¥æ’åºçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¼˜å…ˆæ¯”è¾ƒè·ç¦»è¾ƒè¿œçš„å…ƒç´ ã€‚å¸Œå°”æ’åºåˆå«ç¼©å°å¢é‡æ’åºã€‚<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå¸Œå°”æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShellSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,k=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> increment=L-&gt;length;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		increment=increment/<span class="number">3</span>+<span class="number">1</span>;<span class="comment">/* å¢é‡åºåˆ— */</span></span><br><span class="line">		<span class="keyword">for</span>(i=increment+<span class="number">1</span>;i&lt;=L-&gt;length;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (L-&gt;r[i]&lt;L-&gt;r[i-increment])<span class="comment">/*  éœ€å°†L-&gt;r[i]æ’å…¥æœ‰åºå¢é‡å­è¡¨ */</span> </span><br><span class="line">			&#123; </span><br><span class="line">				L-&gt;r[<span class="number">0</span>]=L-&gt;r[i]; <span class="comment">/*  æš‚å­˜åœ¨L-&gt;r[0] */</span></span><br><span class="line">				<span class="keyword">for</span>(j=i-increment;j&gt;<span class="number">0</span> &amp;&amp; L-&gt;r[<span class="number">0</span>]&lt;L-&gt;r[j];j-=increment)</span><br><span class="line">					L-&gt;r[j+increment]=L-&gt;r[j]; <span class="comment">/*  è®°å½•åç§»ï¼ŒæŸ¥æ‰¾æ’å…¥ä½ç½® */</span></span><br><span class="line">				L-&gt;r[j+increment]=L-&gt;r[<span class="number">0</span>]; <span class="comment">/*  æ’å…¥ */</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"	ç¬¬%dè¶Ÿæ’åºç»“æœ: "</span>,++k);</span><br><span class="line">		print(*L);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(increment&gt;<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ—¶é—´å¤æ‚åº¦ï¼šé€šå¸¸è®¤ä¸ºæ˜¯O($N^{3/2}$) ï¼ŒæœªéªŒè¯ã€€ã€€ç¨³å®šæ€§ï¼šä¸ç¨³å®š</p>
<h2 id="5-å †æ’åº"><a href="#5-å †æ’åº" class="headerlink" title="5.å †æ’åº"></a>5.å †æ’åº</h2><blockquote>
<p>å †æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘:æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼,ç§°ä¸ºå¤§é¡¶å † æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼,ç§°ä¸ºå°é¡¶å †ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190724151257333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190724151926815.png">å †æ’åº (Heap 80å¿±) å°±æ˜¯åˆ©ç”¨å †(å‡è®¾åˆ©ç”¨å¤§é¡¶å †)è¿›è¡Œæ’åºçš„æ–¹æ³•ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯, å°†å¾…æ’åºçš„åºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ã€‚æ­¤æ—¶,æ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹ç»“ç‚¹ã€‚å°†å®˜ç§»èµ°(å…¶å®å°±æ˜¯å°†å…¶ä¸å †æ•°ç»„çš„æœ«å°¾å…ƒç´ äº¤æ¢,æ­¤æ—¶æœ«å°¾å…ƒç´ å°±æ˜¯æœ€å¤§å€¼) .ç„¶åå°†å‰©ä½™çš„ n - 1 ä¸ªåºåˆ—é‡æ–°æ„é€ æˆä¸€ä¸ªå †,è¿™æ ·å°±åˆ½å¯»åˆ° n ä¸ªå…ƒç´ ä¸­çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œ , ä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—äº† ã€‚</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeadSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function">    <span class="title">for</span><span class="params">(i=L-&gt;length/<span class="number">2</span>;i&gt;<span class="number">0</span>;i--)</span>   <span class="comment">/*æŠŠLä¸­çš„ræ„å»ºæˆä¸€ä¸ªå¤§é¡¶å †*/</span></span></span><br><span class="line"><span class="function">        <span class="title">HeadAdjust</span><span class="params">(L,i,L-&gt;length)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(i=L-&gt;length;i&gt;<span class="number">1</span>;i--)</span><br><span class="line">    &#123;</span><br><span class="line">        swap(L,<span class="number">1</span>,i);             <span class="comment">/*å°†å †é¡¶è®°å½•å’Œå½“å‰æœªç»æ’åºå­åºåˆ—çš„æœ€åä¸€ä¸ªè®°å½•äº¤æ¢ */</span></span><br><span class="line">        heapAdjust(L,<span class="number">1</span>,i<span class="number">-1</span>);     <span class="comment">/*å°†å½“å‰çš„æ ¹ç»“ç‚¹é‡æ–°è°ƒæ•´ä¸ºå¤§é¡¶å † */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeapAdjust</span><span class="params">(SqList *L,<span class="keyword">int</span> s,<span class="keyword">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp,j;</span><br><span class="line">    temp=L-&gt;r[s];</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">2</span>*s;j&lt;m;j*=<span class="number">2</span>)    <span class="comment">/*æ²¿å…³é”®å­—è¾ƒå¤§çš„å­©å­ç»“ç‚¹å‘ä¸‹ç­›é€‰*/</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j&lt;m &amp;&amp; L-&gt;r[j]&lt;L-&gt;r[j+<span class="number">1</span>])</span><br><span class="line">            ++j;           <span class="comment">/*jä¸ºå…³é”®å­—ä¸­è¾ƒå¤§çš„è®°å½•çš„ä¸‹æ ‡*/</span></span><br><span class="line">        <span class="keyword">if</span>(temp&gt;=L-&gt;r[j])   </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        L-&gt;r[s]=L-&gt;r[j];</span><br><span class="line">        s=j;</span><br><span class="line">    &#125;</span><br><span class="line">    L-&gt;r[s]=temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(NlogN) ã€€ã€€ç¨³å®šæ€§ï¼šä¸ç¨³å®š<br>ç”±äºåˆå§‹æ„å»ºé˜Ÿæ‰€éœ€çš„æ¯”è¾ƒæ¬¡æ•°è¾ƒå¤šï¼Œå¹¶ä¸é€‚åˆå¾…æ’åºåºåˆ—ä¸ªæ•°è¾ƒå°‘çš„æƒ…å†µã€‚</p>
<h2 id="6-å½’å¹¶æ’åº"><a href="#6-å½’å¹¶æ’åº" class="headerlink" title="6.å½’å¹¶æ’åº"></a>6.å½’å¹¶æ’åº</h2><ul>
<li>å½’å¹¶æ’åº ( Merging Sort) å°±æ˜¯åˆ©ç”¨å½’å¹¶çš„æ€æƒ³å®ç°çš„æ’åºæ–¹æ³•ã€‚è‰²çš„åŸç†æ˜¯å‡è®¾åˆå§‹åºåˆ—å«æœ‰ n ä¸ªè®°å½• , åˆ™å¯ ä»¥çœ‹æˆæ˜¯ n ä¸ªæœ‰åºçš„å­åºåˆ—,æ¯ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º1 ,ç„¶åä¸¤ä¸¤å½’å¹¶,å¾—åˆ°[[n/2] ( [x]è¡¨ç¤ºä¸å°äº x çš„æœ€å°æ•´æ•°)ä¸ªé•¿åº¦ä¸º 2æˆ–1çš„æœ‰åºå­åºåˆ—;å†ä¸¤ä¸¤å½’å¹¶ ,â€¦â€¦,å¦‚æ­¤é‡å¤ , ç›´è‡³å¾—åˆ° ä¸€ä¸ªé•¿åº¦ä¸º n çš„æœ‰åºåºåˆ—ä¸ºæ­¢ ,è¿™ç§æ’åºæ–¹æ³•ç§°ä¸º2è·¯å½’å¹¶æ’åº ã€‚<h3 id="é€’å½’å®ç°å½’å¹¶æ’åº"><a href="#é€’å½’å®ç°å½’å¹¶æ’åº" class="headerlink" title="é€’å½’å®ç°å½’å¹¶æ’åº"></a>é€’å½’å®ç°å½’å¹¶æ’åº</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort</span> <span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MSort (L-&gt;r,L-&gt;r,L-&gt;length) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> </span><br><span class="line">MSort (<span class="keyword">int</span> SR[],<span class="keyword">int</span> TR1[],<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">int</span> TR2[MAXSIZE+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (s==t)</span><br><span class="line">        TR1[s]=SR[s]</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        m=(s+t)/<span class="number">2</span>;         <span class="comment">/*å°†SR (S..t]å¹³åˆ†ä¸º SR [s..m]å’ŒSR[m+1..t] */</span></span><br><span class="line">        MSort(SR,TR2,s,m); <span class="comment">/*é€’å½’å°†SR[s..m]å½’å¹¶ä¸ºæœ‰åºçš„ TR2[s..m]*/</span></span><br><span class="line">        MSort(SR,TR2,m+<span class="number">1</span>,t);<span class="comment">/*é€’å½’å°†SR[m+1..t]å½’å¹¶ä¸ºæœ‰åºTR2[m+1..t] */</span></span><br><span class="line">        Merge(TR2,TR1,s,m,t);<span class="comment">/*å°†TR2[s..m]å’ŒTR2[m+1..t]å½’å¹¶åˆ°TR1ã€s..t] */</span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å°†æœ‰åºçš„ SR[i..m1 å’Œ $R [m+l..0] å½’å¹¶ä¸ºæœ‰åºçš„T.R[i..n] */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(<span class="keyword">int</span> SR[],<span class="keyword">int</span> TR[],<span class="keyword">int</span> i,<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j,k,i;</span><br><span class="line">    <span class="keyword">for</span>(j=m+<span class="number">1</span>,k=i;i&lt;=m&amp;&amp;j&lt;=n;k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(SR[i]&lt;SR[j])</span><br><span class="line">            TR[k]=SR[j+<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            TR[k=SR[j++]]</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(l=<span class="number">0</span>;l&lt;=m-i;l++)</span><br><span class="line">            TR[k+<span class="number">1</span>]=SR[i+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(j&lt;=n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(l=<span class="number">0</span>;l&lt;n-j;l++)</span><br><span class="line">            TR[k+<span class="number">1</span>]=SR[j+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‡è®¾ç°åœ¨è¦å¯¹æ•°ç»„{50,1 0,90,30, 70.40,80, 60 ,20}è¿›è¡Œæ’åº, L.length=9 ,ç°æ¥çœ‹çœ‹ MSort çš„å®ç°ã€‚MSort è¢«è°ƒç”¨æ—¶, SRä¸TR1éƒ½æ˜¯{50, 10,90, 30,70,40,80,60,20} , s=1 , t=9 ,æœ€ç»ˆæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯è¦å°†TR1ä¸­çš„æ•°ç»„æ’å¥½é¡ºåºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190724171640203.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p>
</blockquote>
</li>
<li><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ä¸ºï¼šO(nlogn) </p>
</li>
<li><p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n+Iogn) ï¼Œç”±äºå½’å¹¶æ’åºåœ¨å½’å¹¶è¿‡ç¨‹ä¸­éœ€è¦ä¸åŸå§‹è®°å½•åºåˆ—åŒæ ·æ•°é‡çš„å­˜å‚¨ç©ºé—´å­˜æ”¾å½’å¹¶ç»“æœä»¥åŠé€’å½’æ—¶æ·±åº¦ä¸º Iog2 n çš„æ¨ªç©ºé—´ã€‚</p>
<p>å½’å¹¶æ’åºæ˜¯ä¸€ç§<strong>ç¨³å®šçš„æ’åºç®—æ³•</strong>ï¼Œå› ä¸º Merge å‡½æ•° ä¸­æœ‰ if (SR[i]&lt;SR[j])è¯­å¥,è¿™å°±è¯´æ˜å®ƒéœ€è¦ä¸¤ä¸¤æ¯”è¾ƒ,ä¸å­˜åœ¨è·³è·ƒã€‚</p>
<h3 id="éé€’å½’å®ç°å½’å¹¶æ’åº"><a href="#éé€’å½’å®ç°å½’å¹¶æ’åº" class="headerlink" title="éé€’å½’å®ç°å½’å¹¶æ’åº"></a>éé€’å½’å®ç°å½’å¹¶æ’åº</h3><p>å½’å¹¶æ’åºå¤§é‡â€™å¼•ç”¨äº†é€’å½’,å°½ç®¡åœ¨ä»£ç ä¸Šæ¯”è¾ƒæ¸…æ™°,å®¹æ˜“ç†è§£,ä½†è¿™ä¼šé€ æˆæ—¶é—´å’Œç©ºé—´ä¸Šçš„æ€§èƒ½æŸè€—ã€‚æ’åºè¿½æ±‚çš„å°±æ˜¯æ•ˆç‡,<strong>å°†é€’å½’è½¬åŒ–æˆè¿­ä»£</strong>ã€‚</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* éé€’å½’æ³• */</span></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå½’å¹¶æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"> 	MSort(L-&gt;r,L-&gt;r,<span class="number">1</span>,L-&gt;length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå½’å¹¶éé€’å½’æ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort2</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>* TR=(<span class="keyword">int</span>*)<span class="built_in">malloc</span>(L-&gt;length * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));<span class="comment">/* ç”³è¯·é¢å¤–ç©ºé—´ */</span></span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(k&lt;L-&gt;length)</span><br><span class="line">	&#123;</span><br><span class="line">		MergePass(L-&gt;r,TR,k,L-&gt;length);</span><br><span class="line">		k=<span class="number">2</span>*k;<span class="comment">/* å­åºåˆ—é•¿åº¦åŠ å€ */</span></span><br><span class="line">		MergePass(TR,L-&gt;r,k,L-&gt;length);</span><br><span class="line">		k=<span class="number">2</span>*k;<span class="comment">/* å­åºåˆ—é•¿åº¦åŠ å€ */</span>       </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å°†SR[]ä¸­ç›¸é‚»é•¿åº¦ä¸ºsçš„å­åºåˆ—ä¸¤ä¸¤å½’å¹¶åˆ°TR[] */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergePass</span><span class="params">(<span class="keyword">int</span> SR[],<span class="keyword">int</span> TR[],<span class="keyword">int</span> s,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> j;</span><br><span class="line">	<span class="keyword">while</span>(i &lt;= n<span class="number">-2</span>*s+<span class="number">1</span>)</span><br><span class="line">	&#123;<span class="comment">/* ä¸¤ä¸¤å½’å¹¶ */</span></span><br><span class="line">		Merge(SR,TR,i,i+s<span class="number">-1</span>,i+<span class="number">2</span>*s<span class="number">-1</span>);</span><br><span class="line">		i=i+<span class="number">2</span>*s;        </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;n-s+<span class="number">1</span>) <span class="comment">/* å½’å¹¶æœ€åä¸¤ä¸ªåºåˆ— */</span></span><br><span class="line">		Merge(SR,TR,i,i+s<span class="number">-1</span>,n);</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">/* è‹¥æœ€ååªå‰©ä¸‹å•ä¸ªå­åºåˆ— */</span></span><br><span class="line">		<span class="keyword">for</span>(j =i;j &lt;= n;j++)</span><br><span class="line">			TR[j] = SR[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-å¿«é€Ÿæ’åº"><a href="#7-å¿«é€Ÿæ’åº" class="headerlink" title="7.å¿«é€Ÿæ’åº"></a>7.å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åº ( Quick Sort) çš„åŸºæœ¬æ€æƒ³æ˜¯:é€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºçš„ç›®çš„ã€‚<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* äº¤æ¢é¡ºåºè¡¨Lä¸­å­è¡¨çš„è®°å½•ï¼Œä½¿æ¢è½´è®°å½•åˆ°ä½ï¼Œå¹¶è¿”å›å…¶æ‰€åœ¨ä½ç½® */</span></span><br><span class="line"><span class="comment">/* æ­¤æ—¶åœ¨å®ƒä¹‹å‰(å)çš„è®°å½•å‡ä¸å¤§(å°)äºå®ƒã€‚ */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Partition</span><span class="params">(SqList *L,<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> pivotkey;</span><br><span class="line"></span><br><span class="line">	pivotkey=L-&gt;r[low]; <span class="comment">/* ç”¨å­è¡¨çš„ç¬¬ä¸€ä¸ªè®°å½•ä½œæ¢è½´è®°å½• */</span></span><br><span class="line">	<span class="keyword">while</span>(low&lt;high) <span class="comment">/*  ä»è¡¨çš„ä¸¤ç«¯äº¤æ›¿åœ°å‘ä¸­é—´æ‰«æ */</span></span><br><span class="line">	&#123; </span><br><span class="line">		 <span class="keyword">while</span>(low&lt;high&amp;&amp;L-&gt;r[high]&gt;=pivotkey)</span><br><span class="line">			high--;</span><br><span class="line">		 swap(L,low,high);<span class="comment">/* å°†æ¯”æ¢è½´è®°å½•å°çš„è®°å½•äº¤æ¢åˆ°ä½ç«¯ */</span></span><br><span class="line">		 <span class="keyword">while</span>(low&lt;high&amp;&amp;L-&gt;r[low]&lt;=pivotkey)</span><br><span class="line">			low++;</span><br><span class="line">		 swap(L,low,high);<span class="comment">/* å°†æ¯”æ¢è½´è®°å½•å¤§çš„è®°å½•äº¤æ¢åˆ°é«˜ç«¯ */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> low; <span class="comment">/* è¿”å›æ¢è½´æ‰€åœ¨ä½ç½® */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä¸­çš„å­åºåˆ—L-&gt;r[low..high]ä½œå¿«é€Ÿæ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QSort</span><span class="params">(SqList *L,<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> pivot;</span><br><span class="line">	<span class="keyword">if</span>(low&lt;high)</span><br><span class="line">	&#123;</span><br><span class="line">			pivot=Partition(L,low,high); <span class="comment">/*  å°†L-&gt;r[low..high]ä¸€åˆ†ä¸ºäºŒï¼Œç®—å‡ºæ¢è½´å€¼pivot */</span></span><br><span class="line">			QSort(L,low,pivot<span class="number">-1</span>);		<span class="comment">/*  å¯¹ä½å­è¡¨é€’å½’æ’åº */</span></span><br><span class="line">			QSort(L,pivot+<span class="number">1</span>,high);		<span class="comment">/*  å¯¹é«˜å­è¡¨é€’å½’æ’åº */</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå¿«é€Ÿæ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	QSort(L,<span class="number">1</span>,L-&gt;length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Partition å‡½æ•°ï¼Œå…¶å®å°±æ˜¯å°†é€‰å–çš„pivotkey ä¸æ–­äº¤æ¢ï¼Œå°†æ¯”å®ƒå°çš„æ¢åˆ°å®ƒçš„å·¦è¾¹ï¼Œæ¯”å®ƒå¤§çš„æ¢åˆ°å®ƒçš„å³è¾¹ï¼ŒåŒ…ä¹Ÿåœ¨äº¤æ¢ä¸­ä¸æ–­æ›´æ”¹è‡ªå·±çš„ä½ç½®ï¼Œç›´åˆ°å®Œå…¨æ»¡è¶³è¿™ä¸ªè¦æ±‚ä¸ºæ­¢ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šæœ€ä½³æƒ…å†µï¼šT(n) = O(nlogn)   æœ€å·®æƒ…å†µï¼šT(n) = O(n2)   å¹³å‡æƒ…å†µï¼šT(n) = O(nlogn)ã€€<br>ç©ºé—´å¤æ‚åº¦ï¼š O(logn)<br>ç”±äºå…³é”®å­—çš„æ¯”è¾ƒå’Œäº¤æ¢æ˜¯è·³è·ƒè¿›è¡Œçš„ï¼Œå› æ­¤ï¼Œ<strong>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§ä¸ç¨³å®š</strong>çš„æ’åºæ–¹æ³•</p>
<p><strong>ä¸‰æ•°å–ä¸­æ³•</strong>ã€‚å³å–ä¸‰ä¸ªå…³é”®å­—å…ˆè¿›è¡Œæ’åºï¼Œå°†ä¸­é—´æ•°ä½œä¸ºæ¢è½´ï¼Œ ä¸€èˆ¬æ˜¯å–å·¦ç«¯ã€å³ç«¯å’Œä¸­é—´ä¸‰ä¸ªæ•°ï¼Œ ä¹Ÿå¯ä»¥éšæœºé€‰å–ã€‚ è¿™æ ·è‡³å°‘è¿™ä¸ªä¸­é—´æ•°ä¸€å®šä¸ä¼šæ˜¯æœ€å°æˆ–è€…æœ€å¤§çš„æ•°ï¼Œä»æ¦‚ç‡æ¥è¯´ï¼Œå–ä¸‰ä¸ªæ•°å‡ä¸ºæœ€å°æˆ–æœ€å¤§æ•°çš„å¯èƒ½æ€§æ˜¯å¾®ä¹å…¶å¾®çš„ï¼Œå› æ­¤ä¸­ä¸­é—´æ•°ä½äºè¾ƒä¸ºä¸­é—´çš„å€¼çš„å¯èƒ½æ€§å°±å¤§å¤§æé«˜äº† ã€‚<br><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ”¹è¿›åå¿«é€Ÿæ’åº******************************** */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¿«é€Ÿæ’åºä¼˜åŒ–ç®—æ³• */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Partition1</span><span class="params">(SqList *L,<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> pivotkey;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> m = low + (high - low) / <span class="number">2</span>; <span class="comment">/* è®¡ç®—æ•°ç»„ä¸­é—´çš„å…ƒç´ çš„ä¸‹æ ‡ */</span>  </span><br><span class="line">	<span class="keyword">if</span> (L-&gt;r[low]&gt;L-&gt;r[high])			</span><br><span class="line">		swap(L,low,high);	<span class="comment">/* äº¤æ¢å·¦ç«¯ä¸å³ç«¯æ•°æ®ï¼Œä¿è¯å·¦ç«¯è¾ƒå° */</span></span><br><span class="line">	<span class="keyword">if</span> (L-&gt;r[m]&gt;L-&gt;r[high])</span><br><span class="line">		swap(L,high,m);		<span class="comment">/* äº¤æ¢ä¸­é—´ä¸å³ç«¯æ•°æ®ï¼Œä¿è¯ä¸­é—´è¾ƒå° */</span></span><br><span class="line">	<span class="keyword">if</span> (L-&gt;r[m]&gt;L-&gt;r[low])</span><br><span class="line">		swap(L,m,low);		<span class="comment">/* äº¤æ¢ä¸­é—´ä¸å·¦ç«¯æ•°æ®ï¼Œä¿è¯å·¦ç«¯è¾ƒå° */</span></span><br><span class="line">	</span><br><span class="line">	pivotkey=L-&gt;r[low]; <span class="comment">/* ç”¨å­è¡¨çš„ç¬¬ä¸€ä¸ªè®°å½•ä½œæ¢è½´è®°å½• */</span></span><br><span class="line">	L-&gt;r[<span class="number">0</span>]=pivotkey;  <span class="comment">/* å°†æ¢è½´å…³é”®å­—å¤‡ä»½åˆ°L-&gt;r[0] */</span></span><br><span class="line">	<span class="keyword">while</span>(low&lt;high) <span class="comment">/*  ä»è¡¨çš„ä¸¤ç«¯äº¤æ›¿åœ°å‘ä¸­é—´æ‰«æ */</span></span><br><span class="line">	&#123; </span><br><span class="line">		 <span class="keyword">while</span>(low&lt;high&amp;&amp;L-&gt;r[high]&gt;=pivotkey)</span><br><span class="line">			high--;</span><br><span class="line">		 L-&gt;r[low]=L-&gt;r[high];</span><br><span class="line">		 <span class="keyword">while</span>(low&lt;high&amp;&amp;L-&gt;r[low]&lt;=pivotkey)</span><br><span class="line">			low++;</span><br><span class="line">		 L-&gt;r[high]=L-&gt;r[low];</span><br><span class="line">	&#125;</span><br><span class="line">	L-&gt;r[low]=L-&gt;r[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">return</span> low; <span class="comment">/* è¿”å›æ¢è½´æ‰€åœ¨ä½ç½® */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QSort1</span><span class="params">(SqList *L,<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> pivot;</span><br><span class="line">	<span class="keyword">if</span>((high-low)&gt;MAX_LENGTH_INSERT_SORT)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(low&lt;high)</span><br><span class="line">		&#123;</span><br><span class="line">			pivot=Partition1(L,low,high); <span class="comment">/*  å°†L-&gt;r[low..high]ä¸€åˆ†ä¸ºäºŒï¼Œç®—å‡ºæ¢è½´å€¼pivot */</span></span><br><span class="line">			QSort1(L,low,pivot<span class="number">-1</span>);		<span class="comment">/*  å¯¹ä½å­è¡¨é€’å½’æ’åº */</span></span><br><span class="line">			<span class="comment">/* QSort(L,pivot+1,high);		/*  å¯¹é«˜å­è¡¨é€’å½’æ’åº */</span></span><br><span class="line">			low=pivot+<span class="number">1</span>;	<span class="comment">/* å°¾é€’å½’ */</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		InsertSort(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¯¹é¡ºåºè¡¨Lä½œå¿«é€Ÿæ’åº */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">QuickSort1</span><span class="params">(SqList *L)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	QSort1(L,<span class="number">1</span>,L-&gt;length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Data Structures and Algorithms</category>
      </categories>
  </entry>
  <entry>
    <title>VINS-Monoâ€”â€”é¢„ç§¯åˆ†ï¼ŒPVQ å¢é‡çš„è¯¯å·®ã€ åæ–¹å·®åŠ Jacobian</title>
    <url>/2019/10/25/VINS-Mono%E2%80%94%E2%80%94%E9%A2%84%E7%A7%AF%E5%88%86%EF%BC%8CPVQ-%E5%A2%9E%E9%87%8F%E7%9A%84%E8%AF%AF%E5%B7%AE%E3%80%81-%E5%8D%8F%E6%96%B9%E5%B7%AE%E5%8F%8A-Jacobian/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸ºäº†åŠ æ·±ç†è§£ï¼Œå‚è€ƒå´”åå¤çš„ã€ŠVINSè®ºæ–‡æ¨å¯¼åŠä»£ç è§£æã€‹ï¼ŒæŠŠç›¸å…³å…¬å¼æ¨åˆ°ä¸€éã€‚<br>æƒ³å†™åšå®¢è®°å½•ä¸‹ï¼Œä½†æ‡’æ•²å…¬å¼ã€‚</p><h1 id="é¢„ç§¯åˆ†"><a href="#é¢„ç§¯åˆ†" class="headerlink" title="é¢„ç§¯åˆ†"></a>é¢„ç§¯åˆ†</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025181407525.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025181521323.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center =30x30"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025181458844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102521325497.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p><h1 id="è¿ç»­å½¢å¼ä¸‹-PVQ-å¢é‡çš„è¯¯å·®ã€-åæ–¹å·®åŠ-Jacobian"><a href="#è¿ç»­å½¢å¼ä¸‹-PVQ-å¢é‡çš„è¯¯å·®ã€-åæ–¹å·®åŠ-Jacobian" class="headerlink" title="è¿ç»­å½¢å¼ä¸‹ PVQ å¢é‡çš„è¯¯å·®ã€ åæ–¹å·®åŠ Jacobian"></a>è¿ç»­å½¢å¼ä¸‹ PVQ å¢é‡çš„è¯¯å·®ã€ åæ–¹å·®åŠ Jacobian</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102521324273.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p><h1 id="ç¦»æ•£å½¢å¼ä¸‹-PVQ-å¢é‡çš„è¯¯å·®ã€-åæ–¹å·®åŠ-Jacobian"><a href="#ç¦»æ•£å½¢å¼ä¸‹-PVQ-å¢é‡çš„è¯¯å·®ã€-åæ–¹å·®åŠ-Jacobian" class="headerlink" title="ç¦»æ•£å½¢å¼ä¸‹ PVQ å¢é‡çš„è¯¯å·®ã€ åæ–¹å·®åŠ Jacobian"></a>ç¦»æ•£å½¢å¼ä¸‹ PVQ å¢é‡çš„è¯¯å·®ã€ åæ–¹å·®åŠ Jacobian</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025213150727.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025213209259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191025215804453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p><p>intergration_base.hï¼šIMUé¢„ç§¯åˆ†<br>imu_factor.hï¼šIMUæ®‹å·®ã€é›…å¯æ¯”</p><a id="more"></a>




<h1 id="IMU-æµ‹é‡æ–¹ç¨‹"><a href="#IMU-æµ‹é‡æ–¹ç¨‹" class="headerlink" title="IMU æµ‹é‡æ–¹ç¨‹."></a>IMU æµ‹é‡æ–¹ç¨‹.</h1><p>å¿½ç•¥åœ°çƒæ—‹è½¬ï¼Œ IMU æµ‹é‡æ–¹ç¨‹ä¸º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191024214341590.png#pic_center"></p>
<h1 id="é¢„ç§¯åˆ†æ–¹ç¨‹"><a href="#é¢„ç§¯åˆ†æ–¹ç¨‹" class="headerlink" title="é¢„ç§¯åˆ†æ–¹ç¨‹"></a>é¢„ç§¯åˆ†æ–¹ç¨‹</h1><h2 id="IMU-integration-in-world-frame"><a href="#IMU-integration-in-world-frame" class="headerlink" title="IMU integration in world frame"></a>IMU integration in world frame</h2><p>å°†ç¬¬ k å¸§å’Œç¬¬ k+1 å¸§ä¹‹é—´çš„æ‰€æœ‰ IMU è¿›è¡Œç§¯åˆ†ï¼Œå¯å¾—ç¬¬ k+1 å¸§çš„ä½ç½®ã€é€Ÿåº¦å’Œæ—‹è½¬<br>ï¼ˆPVQï¼‰ï¼Œä½œä¸ºè§†è§‰ä¼°è®¡çš„åˆå§‹å€¼ï¼Œè¿™é‡Œçš„æ—‹è½¬é‡‡ç”¨çš„å››å…ƒæ•°ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191024214621188.png"><br>å…¶ä¸­ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191024214759817.png"></p>
<h1 id="IMU-integration-in-the-body-frame-of-first-pose-of-interests"><a href="#IMU-integration-in-the-body-frame-of-first-pose-of-interests" class="headerlink" title="IMU integration in the body frame of first pose of interests"></a>IMU integration in the body frame of first pose of interests</h1><p>ä¸ºé¿å…é‡æ–°ä¼ æ’­ IMU è§‚æµ‹å€¼ï¼Œé€‰ç”¨ IMU é¢„ç§¯åˆ†æ¨¡å‹ï¼Œä»ä¸–ç•Œåæ ‡ç³»è½¬ä¸ºæœ¬ä½“åæ ‡</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191024215210690.png#pic_center"><br>å…¶ä¸­ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191024215228467.png#pic_center"><br>åˆ™ IMU é¢„ç§¯åˆ†æ¨¡å‹ï¼ˆé¢„ç§¯åˆ†ä¼°è®¡å€¼ï¼‰ä¸º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028152209217.png#pic_center"><br>ç¦»æ•£çŠ¶æ€ä¸‹é‡‡ç”¨ ä¸­å€¼ç§¯åˆ† (mid-point) çš„é¢„ç§¯åˆ†æ–¹ç¨‹ï¼ˆé¢„ç§¯åˆ†æµ‹é‡å€¼ï¼‰ä¸º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102815225757.png#pic_center"><br>å…¶ä¸­ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028152316969.png#pic_center"></p>
<p>midPointIntegrationä¸­çš„ç›¸å…³ä»£ç ï¼ˆæ²¡æœ‰è€ƒè™‘å™ªå£°ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Vector3d un_gyr = <span class="number">0.5</span> * (_gyr_0 + _gyr_1) - linearized_bg;</span><br><span class="line">result_delta_q  = delta_q * Quaterniond(<span class="number">1</span>, un_gyr(<span class="number">0</span>) * _dt / <span class="number">2</span>, un_gyr(<span class="number">1</span>) * _dt / <span class="number">2</span>, un_gyr(<span class="number">2</span>) * _dt / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">Vector3d un_acc_0 =        delta_q * (_acc_0 - linearized_ba);</span><br><span class="line">Vector3d un_acc_1 = result_delta_q * (_acc_1 - linearized_ba);</span><br><span class="line">Vector3d un_acc   = <span class="number">0.5</span> * (un_acc_0 + un_acc_1);</span><br><span class="line"></span><br><span class="line">result_delta_p = delta_p + delta_v * _dt + <span class="number">0.5</span> * un_acc * _dt * _dt;</span><br><span class="line">result_delta_v = delta_v + un_acc * _dt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢„ç§¯åˆ†çš„è¿‡ç¨‹ä¸­Biasæ²¡æœ‰å‘ç”Ÿæ”¹å˜</span></span><br><span class="line">result_linearized_ba = linearized_ba;</span><br><span class="line">result_linearized_bg = linearized_bg;</span><br></pre></td></tr></table></figure>
<p>å½“ bias ä¼°è®¡è½»å¾®æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ä¸€é˜¶è¿‘ä¼¼ å¯¹ä¸­å€¼ç§¯åˆ†å¾—åˆ°çš„é¢„ç§¯åˆ†æµ‹é‡å€¼è¿›çŸ«æ­£ï¼Œè€Œä¸é‡ä¼ æ’­ï¼Œä»è€Œå¾—åˆ° æ›´åŠ ç²¾ç¡®çš„é¢„ç§¯åˆ†æµ‹é‡å€¼ï¼ˆbias ä¿®æ­£çš„çº¿æ€§æ¨¡å‹ï¼‰<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028145945699.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028150116815.png#pic_center"><br>ä¸Šå¼å¯ç”±è¯¯å·®é¡¹é›…å…‹æ¯”çŸ©é˜µçš„è¿­ä»£å…¬å¼$J<em>{b</em>{k+1}}$å¾—å‡ºï¼š<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// O_P = 0 , O_R = 3 , O_V = 6 , O_BA = 9 , O_BG = 12</span></span><br><span class="line">           Eigen::Matrix3d dp_dba = pre_integration-&gt;jacobian.<span class="keyword">template</span> block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(O_P, O_BA);</span><br><span class="line">            Eigen::Matrix3d dp_dbg = pre_integration-&gt;jacobian.<span class="keyword">template</span> block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(O_P, O_BG);</span><br><span class="line">            Eigen::Matrix3d dq_dbg = pre_integration-&gt;jacobian.<span class="keyword">template</span> block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(O_R, O_BG);</span><br><span class="line">            Eigen::Matrix3d dv_dba = pre_integration-&gt;jacobian.<span class="keyword">template</span> block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(O_V, O_BA);</span><br><span class="line">            Eigen::Matrix3d dv_dbg = pre_integration-&gt;jacobian.<span class="keyword">template</span> block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(O_V, O_BG);</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_41839222/article/details/86290941" target="_blank" rel="noopener">VINS-Monoç†è®ºå­¦ä¹ â€”â€”IMUé¢„ç§¯åˆ† Pre-integration ï¼ˆJacobian åæ–¹å·®ï¼‰</a></p>
<h1 id="è¯¯å·®çŠ¶æ€æ–¹ç¨‹"><a href="#è¯¯å·®çŠ¶æ€æ–¹ç¨‹" class="headerlink" title="è¯¯å·®çŠ¶æ€æ–¹ç¨‹"></a>è¯¯å·®çŠ¶æ€æ–¹ç¨‹</h1><p>çŠ¶æ€è¯¯å·®ä¼ é€’çš„çº¿æ€§é€’æ¨å…³ç³»å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°</p>
<ul>
<li>åŸºäºè¯¯å·®éšæ—¶é—´å˜åŒ–çš„é€’æ¨æ–¹ç¨‹</li>
<li>åŸºäºä¸€é˜¶æ³°å‹’å±•å¼€çš„è¯¯å·®é€’æ¨æ–¹ç¨‹<br>æœ¬æ–‡ç”¨çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼›æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç¬¬äºŒç§æ–¹æ³•ï¼šå·²çŸ¥ IMU é¢„ç§¯åˆ†ï¼ˆä¸­å€¼ç§¯åˆ†ï¼‰æµ‹é‡æ–¹ç¨‹ï¼Œé€šè¿‡æ±‚å¯¼è®¡ç®—å‡º F â€² å’Œ Gâ€²ã€‚</li>
</ul>
<h2 id="è¿ç»­å½¢å¼ä¸‹-PVQ-å¢é‡è¯¯å·®çš„åæ–¹å·®åŠ-Jacobian"><a href="#è¿ç»­å½¢å¼ä¸‹-PVQ-å¢é‡è¯¯å·®çš„åæ–¹å·®åŠ-Jacobian" class="headerlink" title="è¿ç»­å½¢å¼ä¸‹ PVQ å¢é‡è¯¯å·®çš„åæ–¹å·®åŠ Jacobian"></a>è¿ç»­å½¢å¼ä¸‹ PVQ å¢é‡è¯¯å·®çš„åæ–¹å·®åŠ Jacobian</h2><p>IMU åœ¨æ¯ä¸€ä¸ªæ—¶åˆ»ç§¯åˆ†å‡ºæ¥çš„å€¼æ˜¯æœ‰è¯¯å·®çš„ï¼Œä¸‹é¢æˆ‘ä»¬å¯¹è¯¯å·®è¿›è¡Œåˆ†æã€‚é¦–å…ˆæˆ‘ä»¬ç›´æ¥ç»™å‡ºåœ¨ t æ—¶åˆ»è¯¯å·®é¡¹çš„å¯¼æ•°ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028150603823.png#pic_center"><br>é‚£ä¹ˆæ ¹æ®å¯¼æ•°çš„å®šä¹‰æœ‰ä¸Šä¸€æ—¶åˆ»æ¨å¯¼ä¸‹ä¸€æ—¶åˆ»çš„è¯¯å·®å¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028150704700.png#pic_center"><br>ä¸Šå¼æ°å¥½ç»™å‡ºäº†å¦‚ EKF ä¸€èˆ¬å¯¹éçº¿æ€§ç³»ç»Ÿçº¿æ€§åŒ–çš„è¿‡ç¨‹ï¼Œè¿™é‡Œçš„æ„ä¹‰æ˜¯è¡¨ç¤ºä¸‹ä¸€ä¸ªæ—¶åˆ»çš„ IMU æµ‹é‡è¯¯å·®ä¸ä¸Šä¸€ä¸ªæ—¶åˆ»çš„æˆçº¿æ€§å…³ç³»ï¼Œè¿™æ ·æˆ‘ä»¬æ ¹æ®å½“å‰æ—¶åˆ»çš„å€¼ï¼Œå¯ä»¥é¢„æµ‹å‡ºä¸‹ä¸€ä¸ªæ—¶åˆ»çš„å‡å€¼å’Œåæ–¹å·®ï¼Œè€Œå…¬å¼ç»™å‡ºçš„æ˜¯å‡å€¼é¢„æµ‹ï¼Œåæ–¹å·®é¢„æµ‹å…¬å¼å¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028150752961.png#pic_center"><br>ä¸Šå¼ç»™å‡ºäº†åæ–¹å·®çš„è¿­ä»£å…¬å¼ï¼Œåˆå§‹å€¼$P^{b<em>k}</em>{b<em>k}$ = 0ã€‚å…¶ä¸­ï¼Œ Q ä¸ºè¡¨ç¤ºå™ªå£°é¡¹çš„å¯¹è§’åæ–¹å·®<br>çŸ©é˜µï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028150935869.png#pic_center#pic_center"><br>ç”±ä¸Šå¼å¯è·å¾—è¯¯å·®é¡¹çš„ Jacobian çš„è¿­ä»£å…¬å¼ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151013604.png#pic_center"><br>å…¶ä¸­ Jacobian çš„åˆå§‹å€¼ä¸º$J</em>{b_k}=I$ã€‚</p>
<h2 id="ç¦»æ•£å½¢å¼çš„-PVQ-å¢é‡è¯¯å·®çš„-Jacobian-å’Œåæ–¹å·®"><a href="#ç¦»æ•£å½¢å¼çš„-PVQ-å¢é‡è¯¯å·®çš„-Jacobian-å’Œåæ–¹å·®" class="headerlink" title="ç¦»æ•£å½¢å¼çš„ PVQ å¢é‡è¯¯å·®çš„ Jacobian å’Œåæ–¹å·®"></a>ç¦»æ•£å½¢å¼çš„ PVQ å¢é‡è¯¯å·®çš„ Jacobian å’Œåæ–¹å·®</h2><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151537536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center">å…¶ä¸­:<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151600894.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151718610.png#pic_center"><br>åˆ™ Jacobian çš„è¿­ä»£å…¬å¼ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151808834.png#pic_center"><br>å…¶ä¸­ï¼Œ Jacobian çš„åˆå§‹å€¼ä¸ºğ½ğ‘˜ = ğ¼ã€‚ è¿™é‡Œè®¡ç®—å‡ºæ¥çš„ğ½ğ‘˜+1åªæ˜¯ä¸ºäº†ç»™åé¢æä¾›å¯¹ bias çš„Jacobianã€‚<br>åæ–¹å·®çš„è¿­ä»£å…¬å¼ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151831375.png#pic_center"><br>å…¶ä¸­ï¼Œ åˆå§‹å€¼ğ‘ƒğ‘˜ = 0ã€‚ Q ä¸ºè¡¨ç¤ºå™ªå£°é¡¹çš„å¯¹è§’åæ–¹å·®çŸ©é˜µï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191028151847412.png#pic_center"><br>ç›¸å…³ä»£ç ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">if</span>(update_jacobian)<span class="comment">//å¦æ›´æ–°é›…å…‹æ¯”çŸ©é˜µ</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector3d w_x   = <span class="number">0.5</span> * (_gyr_0 + _gyr_1) - linearized_bg;</span><br><span class="line">        Vector3d a_0_x = _acc_0 - linearized_ba;</span><br><span class="line">        Vector3d a_1_x = _acc_1 - linearized_ba;</span><br><span class="line"></span><br><span class="line">        Matrix3d R_w_x, R_a_0_x, R_a_1_x;</span><br><span class="line"></span><br><span class="line">        R_w_x&lt;&lt;     <span class="number">0</span>, -w_x(<span class="number">2</span>),  w_x(<span class="number">1</span>),</span><br><span class="line">                w_x(<span class="number">2</span>),      <span class="number">0</span>, -w_x(<span class="number">0</span>),</span><br><span class="line">               -w_x(<span class="number">1</span>), w_x(<span class="number">0</span>),       <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        R_a_0_x&lt;&lt;        <span class="number">0</span>, -a_0_x(<span class="number">2</span>),  a_0_x(<span class="number">1</span>),</span><br><span class="line">                  a_0_x(<span class="number">2</span>),         <span class="number">0</span>, -a_0_x(<span class="number">0</span>),</span><br><span class="line">                 -a_0_x(<span class="number">1</span>),  a_0_x(<span class="number">0</span>),         <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        R_a_1_x&lt;&lt;        <span class="number">0</span>, -a_1_x(<span class="number">2</span>),  a_1_x(<span class="number">1</span>),</span><br><span class="line">                  a_1_x(<span class="number">2</span>),         <span class="number">0</span>, -a_1_x(<span class="number">0</span>),</span><br><span class="line">                 -a_1_x(<span class="number">1</span>),  a_1_x(<span class="number">0</span>),         <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        MatrixXd F = MatrixXd::Zero(<span class="number">15</span>, <span class="number">15</span>);</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>)   = Matrix3d::Identity();</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">3</span>)   = <span class="number">-0.25</span> * delta_q.toRotationMatrix() * R_a_0_x * _dt * _dt +</span><br><span class="line">                                <span class="number">-0.25</span> * result_delta_q.toRotationMatrix() * R_a_1_x * (Matrix3d::Identity() - R_w_x * _dt) * _dt * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">6</span>)   = MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">9</span>)   = <span class="number">-0.25</span> * (delta_q.toRotationMatrix() + result_delta_q.toRotationMatrix()) * _dt * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">12</span>)  = <span class="number">-0.25</span> * result_delta_q.toRotationMatrix() * R_a_1_x * _dt * _dt * -_dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">3</span>, <span class="number">3</span>)   = Matrix3d::Identity() - R_w_x * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">3</span>, <span class="number">12</span>)  = <span class="number">-1.0</span> * MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">3</span>)   = <span class="number">-0.5</span> * delta_q.toRotationMatrix() * R_a_0_x * _dt +</span><br><span class="line">                                <span class="number">-0.5</span> * result_delta_q.toRotationMatrix() * R_a_1_x * (Matrix3d::Identity() - R_w_x * _dt) * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">6</span>)   = Matrix3d::Identity();</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">9</span>)   = <span class="number">-0.5</span> * (delta_q.toRotationMatrix() + result_delta_q.toRotationMatrix()) * _dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">12</span>)  = <span class="number">-0.5</span> * result_delta_q.toRotationMatrix() * R_a_1_x * _dt * -_dt;</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">9</span>, <span class="number">9</span>)   = Matrix3d::Identity();</span><br><span class="line">        F.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">12</span>, <span class="number">12</span>) = Matrix3d::Identity();</span><br><span class="line"></span><br><span class="line">        MatrixXd V = MatrixXd::Zero(<span class="number">15</span>,<span class="number">18</span>);</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">0</span>) =  <span class="number">0.25</span> * delta_q.toRotationMatrix() * _dt * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">3</span>) =  <span class="number">0.25</span> * -result_delta_q.toRotationMatrix() * R_a_1_x  * _dt * _dt * <span class="number">0.5</span> * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">6</span>) =  <span class="number">0.25</span> *  result_delta_q.toRotationMatrix() * _dt * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">9</span>) =  V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) =  <span class="number">0.5</span> * MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">3</span>, <span class="number">9</span>) =  <span class="number">0.5</span> * MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">0</span>) =  <span class="number">0.5</span> * delta_q.toRotationMatrix() * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">3</span>) =  <span class="number">0.5</span> * -result_delta_q.toRotationMatrix() * R_a_1_x  * _dt * <span class="number">0.5</span> * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">6</span>) =  <span class="number">0.5</span> *  result_delta_q.toRotationMatrix() * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">9</span>) =  V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">6</span>, <span class="number">3</span>);</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">9</span>, <span class="number">12</span>)  = MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line">        V.block&lt;<span class="number">3</span>, <span class="number">3</span>&gt;(<span class="number">12</span>, <span class="number">15</span>) = MatrixXd::Identity(<span class="number">3</span>,<span class="number">3</span>) * _dt;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//step_jacobian = F;</span></span><br><span class="line">        <span class="comment">//step_V = V;</span></span><br><span class="line">        jacobian   = F * jacobian;</span><br><span class="line">        covariance = F * covariance * F.transpose() + V * noise * V.transpose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡é¢„ç§¯åˆ†è¯¯å·®çš„é€’æ¨å…¬å¼ç¡®å®å¯ä»¥æ±‚å‡ºæ¥ä»$b<em>k$å¸§åˆ°$b</em>{k+1}$å¸§çš„ç´¯ç§¯å‡ºæ¥çš„è¯¯å·®å¤§å°ï¼Œä½†æ˜¯è¿™ä¸ªå€¼å¹¶æ²¡æœ‰ç”¨ï¼Œæˆ‘ä»¬åœ¨åç«¯éœ€è¦çš„æ˜¯è¯¯å·®å¯¹$b<em>k$ å¸§å’Œ$b</em>{k+1}$å¸§çš„å¯¼æ•°ï¼Œè€Œè¯¯å·®å¯¹$b_k$å¸§çš„å¯¼æ•°å´å¯ä»¥é€šè¿‡ä¸Šå¼çš„é›…å…‹æ¯”çŸ©é˜µç›´æ¥è®¡ç®—å‡ºæ¥ï¼Œè‡³äºåæ–¹å·®çŸ©é˜µæ˜¯æˆ‘ä»¬è¿›è¡Œåç«¯ä¼˜åŒ–è®¡ç®—æ®‹å·®æ—¶ç”¨é©¬æ°è·ç¦»éœ€è¦ç”¨åˆ°ã€‚</p>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
  </entry>
  <entry>
    <title>éšæœºæŠ½æ ·ä¸€è‡´RANSAC-Random-Sample-Consensus</title>
    <url>/2019/10/24/%E9%9A%8F%E6%9C%BA%E6%8A%BD%E6%A0%B7%E4%B8%80%E8%87%B4RANSAC-Random-Sample-Consensus/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®—æ³•ç®€ä»‹ï¼š"><a href="#ç®—æ³•ç®€ä»‹ï¼š" class="headerlink" title="ç®—æ³•ç®€ä»‹ï¼š"></a>ç®—æ³•ç®€ä»‹ï¼š</h1><p>éšæœºæŠ½æ ·ä¸€è‡´ç®—æ³•ï¼ˆRANdom SAmple Consensusï¼ŒRANSACï¼‰ã€‚å®ƒé‡‡ç”¨è¿­ä»£çš„æ–¹å¼ä»ä¸€ç»„åŒ…å«ç¦»ç¾¤çš„è¢«è§‚æµ‹æ•°æ®ä¸­ä¼°ç®—å‡ºæ•°å­¦æ¨¡å‹çš„å‚æ•°ã€‚RANSACç®—æ³•çš„åŸºæœ¬å‡è®¾æ˜¯æ ·æœ¬ä¸­åŒ…å«æ­£ç¡®æ•°æ®(inliersï¼Œå¯ä»¥è¢«æ¨¡å‹æè¿°çš„æ•°æ®)ï¼Œä¹ŸåŒ…å«å¼‚å¸¸æ•°æ®(outliersï¼Œåç¦»æ­£å¸¸èŒƒå›´å¾ˆè¿œã€æ— æ³•é€‚åº”æ•°å­¦æ¨¡å‹çš„æ•°æ®)ï¼Œå³æ•°æ®é›†ä¸­å«æœ‰å™ªå£°ã€‚è¿™äº›å¼‚å¸¸æ•°æ®å¯èƒ½æ˜¯ç”±äºé”™è¯¯çš„æµ‹é‡ã€é”™è¯¯çš„å‡è®¾ã€é”™è¯¯çš„è®¡ç®—ç­‰äº§ç”Ÿçš„ã€‚åŒæ—¶RANSACä¹Ÿå‡è®¾ï¼Œç»™å®šä¸€ç»„æ­£ç¡®çš„æ•°æ®ï¼Œå­˜åœ¨å¯ä»¥è®¡ç®—å‡ºç¬¦åˆè¿™äº›æ•°æ®çš„æ¨¡å‹å‚æ•°çš„æ–¹æ³•ã€‚</p><a id="more"></a>
<h1 id="RANSACçš„åŸºæœ¬å‡è®¾ï¼š"><a href="#RANSACçš„åŸºæœ¬å‡è®¾ï¼š" class="headerlink" title="RANSACçš„åŸºæœ¬å‡è®¾ï¼š"></a>RANSACçš„åŸºæœ¬å‡è®¾ï¼š</h1><p>â€œå†…ç¾¤â€æ•°æ®å¯ä»¥é€šè¿‡å‡ ç»„æ¨¡å‹çš„å‚æ•°æ¥å™è¿°å…¶åˆ†å¸ƒï¼Œè€Œâ€œç¦»ç¾¤â€æ•°æ®åˆ™æ˜¯ä¸é€‚åˆæ¨¡å‹åŒ–çš„æ•°æ®ã€‚<br>æ•°æ®ä¼šå—å™ªå£°å½±å“ï¼Œå™ªå£°æŒ‡çš„æ˜¯ç¦»ç¾¤ï¼Œä¾‹å¦‚ä»æç«¯çš„å™ªå£°æˆ–é”™è¯¯è§£é‡Šæœ‰å…³æ•°æ®çš„æµ‹é‡æˆ–ä¸æ­£ç¡®çš„å‡è®¾ã€‚<br>RANSACå‡å®šï¼Œç»™å®šä¸€ç»„ï¼ˆé€šå¸¸å¾ˆå°ï¼‰çš„å†…ç¾¤ï¼Œå­˜åœ¨ä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå¯ä»¥ä¼°ç®—æœ€ä½³è§£é‡Šæˆ–æœ€é€‚ç”¨äºè¿™ä¸€æ•°æ®æ¨¡å‹çš„å‚æ•°ã€‚</p>
<h1 id="èŒƒä¾‹"><a href="#èŒƒä¾‹" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h1><p>è¿™é‡Œç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼Œåœ¨ä¸€ç»„æ•°æ®ç‚¹ä¸­æ‰¾åˆ°ä¸€æ¡æœ€é€‚åˆçš„çº¿ã€‚å‡è®¾ï¼Œæ­¤æœ‰ä¸€ç»„é›†åˆåŒ…å«äº†å†…ç¾¤ä»¥åŠç¦»ç¾¤ï¼Œå…¶ä¸­å†…ç¾¤ä¸ºå¯ä»¥è¢«æ‹Ÿåˆåˆ°çº¿æ®µä¸Šçš„ç‚¹ï¼Œè€Œç¦»ç¾¤åˆ™æ˜¯æ— æ³•è¢«æ‹Ÿåˆçš„ç‚¹ã€‚å¦‚æœæˆ‘ä»¬ç”¨ç®€å•çš„æœ€å°äºŒä¹˜æ³•æ¥æ‰¾æ­¤çº¿ï¼Œæˆ‘ä»¬å°†æ— æ³•å¾—åˆ°ä¸€æ¡é€‚åˆäºå†…ç¾¤çš„çº¿ï¼Œå› ä¸ºæœ€å°äºŒä¹˜æ³•ä¼šå—ç¦»ç¾¤å½±å“è€Œå½±å“å…¶ç»“æœã€‚è€ŒRANSACï¼Œå¯ä»¥åªç”±å†…ç¾¤æ¥è®¡ç®—å‡ºæ¨¡å‹ï¼Œè€Œä¸”æ¦‚ç‡è¿˜å¤Ÿé«˜ã€‚ç„¶è€Œï¼ŒRANSACæ— æ³•ä¿è¯ç»“æœä¸€å®šæœ€å¥½ï¼Œæ‰€ä»¥å¿…é¡»å°å¿ƒé€‰æ‹©å‚æ•°ï¼Œä½¿å…¶èƒ½æœ‰è¶³å¤Ÿçš„æ¦‚ç‡ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020160728989.png#pic_center"><br>åŒ…å«è®¸å¤šç¦»ç¾¤çš„ä¸€ç»„æ•°æ®ï¼Œè¦æ‰¾ä¸€æ¡æœ€é€‚åˆçš„çº¿ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/201910201607364.png#pic_center"><br>RANSACæ‰¾åˆ°çš„çº¿ï¼Œç¦»ç¾¤å€¼å¯¹ç»“æœæ²¡å½±å“ï¼ˆè“è‰²ç‚¹ä¸ºå†…ç¾¤ï¼Œçº¢è‰²ç‚¹ä¸ºç¦»ç¾¤ï¼‰</p>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>RANSACç®—æ³•çš„è¾“å…¥æ˜¯ä¸€ç»„è§‚æµ‹æ•°æ®ï¼ˆå¾€å¾€å«æœ‰è¾ƒå¤§çš„å™ªå£°æˆ–æ— æ•ˆç‚¹ï¼‰ï¼Œä¸€ä¸ªç”¨äºè§£é‡Šè§‚æµ‹æ•°æ®çš„å‚æ•°åŒ–æ¨¡å‹ä»¥åŠä¸€äº›å¯ä¿¡çš„å‚æ•°ã€‚RANSACé€šè¿‡åå¤é€‰æ‹©æ•°æ®ä¸­çš„ä¸€ç»„éšæœºå­é›†æ¥è¾¾æˆç›®æ ‡ã€‚è¢«é€‰å–çš„å­é›†è¢«å‡è®¾ä¸ºå±€å†…ç‚¹ï¼Œå¹¶ç”¨ä¸‹è¿°æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼š </p>
<ol>
<li>æœ‰ä¸€ä¸ªæ¨¡å‹é€‚åº”äºå‡è®¾çš„å±€å†…ç‚¹ï¼Œå³æ‰€æœ‰çš„æœªçŸ¥å‚æ•°éƒ½èƒ½ä»å‡è®¾çš„å±€å†…ç‚¹è®¡ç®—å¾—å‡ºã€‚</li>
<li>ç”¨1ä¸­å¾—åˆ°çš„æ¨¡å‹å»æµ‹è¯•æ‰€æœ‰çš„å…¶å®ƒæ•°æ®ï¼Œå¦‚æœæŸä¸ªç‚¹é€‚ç”¨äºä¼°è®¡çš„æ¨¡å‹ï¼Œè®¤ä¸ºå®ƒä¹Ÿæ˜¯å±€å†…ç‚¹ã€‚</li>
<li>å¦‚æœæœ‰è¶³å¤Ÿå¤šçš„ç‚¹è¢«å½’ç±»ä¸ºå‡è®¾çš„å±€å†…ç‚¹ï¼Œé‚£ä¹ˆä¼°è®¡çš„æ¨¡å‹å°±è¶³å¤Ÿåˆç†ã€‚</li>
<li>ç„¶åï¼Œç”¨æ‰€æœ‰å‡è®¾çš„å±€å†…ç‚¹å»é‡æ–°ä¼°è®¡æ¨¡å‹ï¼ˆè­¬å¦‚ä½¿ç”¨æœ€å°äºŒä¹˜æ³•ï¼‰ï¼Œå› ä¸ºå®ƒä»…ä»…è¢«åˆå§‹çš„å‡è®¾å±€å†…ç‚¹ä¼°è®¡è¿‡ã€‚</li>
<li>æœ€åï¼Œé€šè¿‡ä¼°è®¡å±€å†…ç‚¹ä¸æ¨¡å‹çš„é”™è¯¯ç‡æ¥è¯„ä¼°æ¨¡å‹ã€‚</li>
<li>ä¸Šè¿°è¿‡ç¨‹è¢«é‡å¤æ‰§è¡Œå›ºå®šçš„æ¬¡æ•°ï¼Œæ¯æ¬¡äº§ç”Ÿçš„æ¨¡å‹è¦ä¹ˆå› ä¸ºå±€å†…ç‚¹å¤ªå°‘è€Œè¢«èˆå¼ƒï¼Œè¦ä¹ˆå› ä¸ºæ¯”ç°æœ‰çš„æ¨¡å‹æ›´å¥½è€Œè¢«é€‰ç”¨ã€‚<h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1>ä¼ªç å½¢å¼çš„ç®—æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ol>
<ul>
<li><p>è¾“å…¥ï¼š</p>
<blockquote>
<p>data â€”â€” ä¸€ç»„è§‚æµ‹æ•°æ®<br>model â€”â€” é€‚åº”äºæ•°æ®çš„æ¨¡å‹<br>n â€”â€” é€‚ç”¨äºæ¨¡å‹çš„æœ€å°‘æ•°æ®ä¸ªæ•°<br>k â€”â€” ç®—æ³•çš„è¿­ä»£æ¬¡æ•°<br>t â€”â€” ç”¨äºå†³å®šæ•°æ®æ˜¯å¦é€‚åº”äºæ¨¡å‹çš„é˜€å€¼<br>d â€”â€” åˆ¤å®šæ¨¡å‹æ˜¯å¦é€‚ç”¨äºæ•°æ®é›†çš„æ•°æ®æ•°ç›®</p>
</blockquote>
</li>
<li><p>è¾“å‡ºï¼š</p>
<blockquote>
<p>best_model â€”â€” è·Ÿæ•°æ®æœ€åŒ¹é…çš„æ¨¡å‹å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¥½çš„æ¨¡å‹ï¼Œè¿”å›nullï¼‰<br>best_consensus_set â€”â€” ä¼°è®¡å‡ºæ¨¡å‹çš„æ•°æ®ç‚¹<br>best_error â€”â€” è·Ÿæ•°æ®ç›¸å…³çš„ä¼°è®¡å‡ºçš„æ¨¡å‹é”™è¯¯</p>
</blockquote>
<ul>
<li>iterations = 0<blockquote>
<p>best_model = null<br>best_consensus_set = null<br>best_error = æ— ç©·å¤§<br>while ( iterations &lt; k )<br>maybe_inliers = ä»æ•°æ®é›†ä¸­éšæœºé€‰æ‹©nä¸ªç‚¹<br>maybe_model = é€‚åˆäºmaybe_inliersçš„æ¨¡å‹å‚æ•°<br>consensus_set = maybe_inliers</p>
</blockquote>
</li>
</ul>
</li>
<li><p>ä¼°è®¡çš„æ¨¡å‹å°±è¶³å¤Ÿåˆç†</p>
<blockquote>
<p>for ( æ¯ä¸ªæ•°æ®é›†ä¸­ä¸å±äºmaybe_inliersçš„ç‚¹ ï¼‰<br>if ( å¦‚æœç‚¹é€‚åˆäºmaybe_modelï¼Œä¸”é”™è¯¯å°äºt ï¼‰<br>å°†ç‚¹æ·»åŠ åˆ°consensus_set<br>if ï¼ˆ consensus_setä¸­çš„å…ƒç´ æ•°ç›®å¤§äºd ï¼‰<br>å·²ç»æ‰¾åˆ°äº†å¥½çš„æ¨¡å‹ï¼Œ</p>
</blockquote>
</li>
<li><p>ç°åœ¨æµ‹è¯•è¯¥æ¨¡å‹åˆ°åº•æœ‰å¤šå¥½</p>
<blockquote>
<p>better_model = é€‚åˆäºconsensus_setä¸­æ‰€æœ‰ç‚¹çš„æ¨¡å‹å‚æ•°<br>this_error = better_modelç©¶ç«Ÿå¦‚ä½•é€‚åˆè¿™äº›ç‚¹çš„åº¦é‡<br>if ( this_error &lt; best_error )<br>æˆ‘ä»¬å‘ç°äº†æ¯”ä»¥å‰å¥½çš„æ¨¡å‹ï¼Œä¿å­˜è¯¥æ¨¡å‹ç›´åˆ°æ›´å¥½çš„æ¨¡å‹å‡ºç°<br>best_model =  better_model<br>best_consensus_set = consensus_set<br>best_error =  this_error</p>
</blockquote>
</li>
<li><p>è¿­ä»£</p>
<blockquote>
<p>å¢åŠ è¿­ä»£æ¬¡æ•°<br>è¿”å› best_model, best_consensus_set, best_error</p>
</blockquote>
<p> RANSACç®—æ³•çš„å¯èƒ½å˜åŒ–åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><p>å¦‚æœå‘ç°äº†ä¸€ç§è¶³å¤Ÿå¥½çš„æ¨¡å‹ï¼ˆè¯¥æ¨¡å‹æœ‰è¶³å¤Ÿå°çš„é”™è¯¯ç‡ï¼‰ï¼Œåˆ™è·³å‡ºä¸»å¾ªç¯ã€‚è¿™æ ·å¯èƒ½ä¼šèŠ‚çº¦è®¡ç®—é¢å¤–å‚æ•°çš„æ—¶é—´ã€‚</p>
<ol>
<li>ç›´æ¥ä»maybe_modelè®¡ç®—this_errorï¼Œè€Œä¸ä»consensus_seté‡æ–°ä¼°è®¡æ¨¡å‹ã€‚è¿™æ ·å¯èƒ½ä¼šèŠ‚çº¦æ¯”è¾ƒä¸¤ç§æ¨¡å‹é”™è¯¯çš„æ—¶é—´ï¼Œä½†å¯èƒ½ä¼šå¯¹å™ªå£°æ›´æ•æ„Ÿã€‚</li>
</ol>
<p>å…¶å®æ ¸å¿ƒå°±æ˜¯éšæœºæ€§å’Œå‡è®¾æ€§ã€‚éšæœºæ€§ç”¨äºå‡å°‘è®¡ç®—äº†ï¼Œé‚£ä¸ªå¾ªç¯æ¬¡æ•°å°±æ˜¯åˆ©ç”¨æ­£ç¡®æ•°æ®å‡ºç°çš„æ¦‚ç‡ã€‚æ‰€è°“çš„å‡è®¾æ€§ï¼Œå°±æ˜¯è¯´éšæœºæŠ½å‡ºæ¥çš„æ•°æ®æˆ‘éƒ½è®¤ä¸ºæ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä»¥æ­¤å»è®¡ç®—å…¶ä»–ç‚¹ï¼Œè·å¾—å…¶ä»–æ»¡è¶³å˜æ¢å…³ç³»çš„ç‚¹ï¼Œç„¶ååˆ©ç”¨æŠ•ç¥¨æœºåˆ¶ï¼Œé€‰å‡ºè·ç¥¨æœ€å¤šçš„é‚£ä¸€ä¸ªå˜æ¢ã€‚</p>
</li>
</ol>
</li>
</ul>
<h1 id="å‚æ•°å†³å®š"><a href="#å‚æ•°å†³å®š" class="headerlink" title="å‚æ•°å†³å®š"></a>å‚æ•°å†³å®š</h1><p>å‡è®¾æ¯ä¸ªç‚¹æ˜¯çœŸæ­£å†…ç¾¤çš„å‡ ç‡æ˜¯wï¼Œåˆ™ï¼š</p>
<ul>
<li>w = çœŸæ­£å†…ç¾¤çš„æ•°ç›® / æ•°æ®æ€»å…±çš„æ•°é‡</li>
</ul>
<p>é€šå¸¸æˆ‘ä»¬ä¸çŸ¥é“w æ˜¯å¤šå°‘ï¼Œ$w^{n}$æ˜¯æ‰€é€‰æ‹©çš„n ä¸ªç‚¹éƒ½æ˜¯å†…ç¾¤çš„å‡ ç‡ï¼Œ$1-w^{n}$ æ˜¯æ‰€é€‰æ‹©çš„ n ä¸ªç‚¹è‡³å°‘æœ‰ä¸€ä¸ªä¸æ˜¯å†…ç¾¤çš„å‡ ç‡ï¼Œ ${(1-w^{n})^{k}}$æ˜¯è¡¨ç¤ºé‡å¤k æ¬¡éƒ½æ²¡æœ‰å…¨éƒ¨çš„ {\displaystyle n} n ä¸ªç‚¹éƒ½æ˜¯å†…ç¾¤çš„å‡ ç‡ï¼Œå‡è®¾ç®—æ³•è·‘ k æ¬¡ä»¥åæˆåŠŸçš„å‡ ç‡æ˜¯pï¼Œé‚£ä¹ˆï¼š</p>
<script type="math/tex; mode=display">{1-p=(1-w^{n})^{k}}</script><script type="math/tex; mode=display">{p=1-(1-w^{n})^{k}}</script><p>æ‰€ä»¥å¦‚æœå¸Œæœ›æˆåŠŸå‡ ç‡é«˜ï¼Œ ${\displaystyle p=0.99}$ï¼Œ å½“n ä¸å˜æ—¶ï¼Œk è¶Šå¤§ï¼Œ {\displaystyle p} p è¶Šå¤§ï¼Œ å½“w ä¸å˜æ—¶ï¼Œn è¶Šå¤§ï¼Œæ‰€éœ€çš„k å°±è¶Šå¤§ï¼Œ é€šå¸¸w æœªçŸ¥ï¼Œæ‰€ä»¥ n é€‰å°ä¸€ç‚¹æ¯”è¾ƒå¥½ã€‚</p>
<h1 id="ä¼˜ç‚¹ä¸ç¼ºç‚¹"><a href="#ä¼˜ç‚¹ä¸ç¼ºç‚¹" class="headerlink" title="ä¼˜ç‚¹ä¸ç¼ºç‚¹"></a>ä¼˜ç‚¹ä¸ç¼ºç‚¹</h1><ul>
<li>RANSACçš„ä¼˜ç‚¹æ˜¯å®ƒèƒ½é²æ£’çš„ä¼°è®¡æ¨¡å‹å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå®ƒèƒ½ä»åŒ…å«å¤§é‡å±€å¤–ç‚¹çš„æ•°æ®é›†ä¸­ä¼°è®¡å‡ºé«˜ç²¾åº¦çš„å‚æ•°ã€‚</li>
<li>RANSACçš„ç¼ºç‚¹æ˜¯å®ƒè®¡ç®—å‚æ•°çš„è¿­ä»£æ¬¡æ•°æ²¡æœ‰ä¸Šé™ï¼›å¦‚æœè®¾ç½®è¿­ä»£æ¬¡æ•°çš„ä¸Šé™ï¼Œå¾—åˆ°çš„ç»“æœå¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ç»“æœï¼Œç”šè‡³å¯èƒ½å¾—åˆ°é”™è¯¯çš„ç»“æœã€‚</li>
<li>RANSACåªæœ‰ä¸€å®šçš„æ¦‚ç‡å¾—åˆ°å¯ä¿¡çš„æ¨¡å‹ï¼Œæ¦‚ç‡ä¸è¿­ä»£æ¬¡æ•°æˆæ­£æ¯”ã€‚RANSACçš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒè¦æ±‚è®¾ç½®è·Ÿé—®é¢˜ç›¸å…³çš„é˜€å€¼ã€‚</li>
<li>RANSACåªèƒ½ä»ç‰¹å®šçš„æ•°æ®é›†ä¸­ä¼°è®¡å‡ºä¸€ä¸ªæ¨¡å‹ï¼Œå¦‚æœå­˜åœ¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æ¨¡å‹ï¼ŒRANSACä¸èƒ½æ‰¾åˆ°åˆ«çš„æ¨¡å‹ã€‚</li>
</ul>
<p>å‚è€ƒï¼š</p>
<blockquote>
<p><a href="https://blog.csdn.net/pi9nc/article/details/26596519" target="_blank" rel="noopener">RANSAC</a><br><a href="https://zh.wikipedia.org/wiki/%E9%9A%A8%E6%A9%9F%E6%8A%BD%E6%A8%A3%E4%B8%80%E8%87%B4" target="_blank" rel="noopener">éšæœºæŠ½æ ·ä¸€è‡´</a></p>
</blockquote>
]]></content>
      <categories>
        <category>VIO</category>
      </categories>
  </entry>
  <entry>
    <title>IMUæµ‹é‡æ¨¡å‹ã€è¿åŠ¨æ¨¡å‹ã€è¯¯å·®æ¨¡å‹</title>
    <url>/2019/10/24/IMU%E6%B5%8B%E9%87%8F%E6%A8%A1%E5%9E%8B%E3%80%81%E8%BF%90%E5%8A%A8%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AF%AF%E5%B7%AE%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="IMUæµ‹é‡æ¨¡å‹"><a href="#IMUæµ‹é‡æ¨¡å‹" class="headerlink" title="IMUæµ‹é‡æ¨¡å‹"></a>IMUæµ‹é‡æ¨¡å‹</h1><ul>
<li><p>MEMS åŠ é€Ÿåº¦è®¡å·¥ä½œåŸç†<br>æµ‹é‡åŸç†å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„è´¨é‡å— + å¼¹ç°§ + æŒ‡ç¤ºè®¡æ¥è¡¨ç¤º<br>åŠ é€Ÿåº¦è®¡æµ‹é‡å€¼$a_m$ä¸ºå¼¹ç°§æ‹‰åŠ›å¯¹åº”çš„åŠ é€Ÿåº¦</p>
<script type="math/tex; mode=display">a_m=\frac{f}{m}=a-g</script><p>å…¶ä¸­mä¸ºè´¨é‡å—è´¨é‡ï¼Œaä¸ºç‰©ä½“åœ¨ä¸–ç•Œï¼ˆæƒ¯æ€§ï¼‰åæ ‡ç³»ä¸‹çš„å®é™…åŠ é€Ÿåº¦ã€‚</p>
</li>
<li><p>é™€èºä»ªæµ‹é‡åŸç†<br>é™€èºä»ªçš„æµ‹é‡å€¼å³ä¸ºIMUåœ¨bodyåæ ‡ç³»ä¸‹çš„æ—‹è½¬è§’é€Ÿåº¦ï¼Œè¦é€šè¿‡è¿åŠ¨å­¦æ¨¡å‹è½¬æ¢åˆ°æƒ¯æ€§åæ ‡ç³»ä¸‹ ï¼ŒæŒ‰æµ‹é‡åŸç†åˆ†æœ‰æŒ¯åŠ¨é™€èºï¼Œå…‰çº¤é™€èºç­‰ã€‚</p>
<p>ä½ç«¯ MEMS é™€èºä¸Šä¸€èˆ¬é‡‡ç”¨æŒ¯åŠ¨é™€èºåŸç†ï¼Œé€šè¿‡æµ‹é‡ Coriolisforce æ¥é—´æ¥å¾—åˆ°è§’é€Ÿåº¦ã€‚</p>
<blockquote>
<p>åœ¨æ—‹è½¬åæ ‡ç³»ä¸­ï¼Œè¿åŠ¨çš„ç‰©ä½“å—åˆ°ç§‘æ°åŠ›ä½œç”¨<br>MEMS é™€èºä»ªï¼šä¸€ä¸ªä¸»åŠ¨è¿åŠ¨è½´ + ä¸€ä¸ªæ•æ„Ÿè½´<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017192448388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h1 id="IMUè¿åŠ¨æ¨¡å‹"><a href="#IMUè¿åŠ¨æ¨¡å‹" class="headerlink" title="IMUè¿åŠ¨æ¨¡å‹"></a>IMUè¿åŠ¨æ¨¡å‹</h1><h2 id="æ—‹è½¬é‡æ±‚å¯¼"><a href="#æ—‹è½¬é‡æ±‚å¯¼" class="headerlink" title="æ—‹è½¬é‡æ±‚å¯¼"></a>æ—‹è½¬é‡æ±‚å¯¼</h2><p>é¦–å…ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè€ƒè™‘ä¸€ä¸ªä»åŸç‚¹å‡ºå‘çš„å‘é‡ r ç»•å•ä½è½´ u æ—‹è½¬ï¼Œè§’é€Ÿåº¦å¤§å°ä¸º Î¸Ë™ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017155511191.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br>è§’é€Ÿåº¦çŸ¢é‡å¯ä»¥è¡¨ç¤ºä¸º${\boldsymbol \omega}=\dot{\theta}u$ï¼Œæ˜“å¾—å‘é‡ r æœ«ç«¯ç‚¹ P çš„é€Ÿåº¦çŸ¢é‡ï¼Œå³ rçš„æ—¶é—´ä¸€é˜¶å¯¼ä¸º</p>
<script type="math/tex; mode=display">\frac{d{r}}{dt} = {\boldsymbol \omega} \times {r}</script><p>åæ ‡ç³» {B} ç»•å•ä½è½´ u æ—‹è½¬ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå…¶ä¸‰ä¸ªè½´çš„æ—¶é—´ä¸€é˜¶å¯¼åŒæ ·ä¸º</p>
<script type="math/tex; mode=display">\frac{d{\bf i}_B}{dt} = {\boldsymbol \omega} \times {\bf i}_B, \frac{d{\bf j}_B}{dt} = {\boldsymbol \omega} \times {\bf j}_B, \frac{d{\bf k}_B}{dt} = {\boldsymbol \omega} \times {\bf k}_B</script><p>$[ {\bf i}_B \quad {\bf j}_B \quad {\bf k}_B ]$ å®é™…ä¸Šå°±æ˜¯åæ ‡ç³» {B} ç›¸å¯¹äºå‚è€ƒåæ ‡ç³»çš„æ—‹è½¬çŸ©é˜µ Rï¼ŒRçš„æ—¶é—´ä¸€é˜¶å¯¼ä¸º</p>
<script type="math/tex; mode=display">\dot{\bf R} =  [ {\boldsymbol \omega} \times {\bf i}_B \quad {\boldsymbol \omega} \times {\bf j}_B \quad {\boldsymbol \omega} \times {\bf k}_B ] = {\boldsymbol \omega} \times {\bf R}</script><p>å‰ä¹˜è¿ç®—å¯ä»¥è½¬åŒ–ä¸ºè´Ÿå¯¹ç§°çŸ©é˜µçš„ä¹˜æ³•ï¼š</p>
<script type="math/tex; mode=display">\dot{\bf R} = {\boldsymbol \omega}^{\land} {\bf R}</script><p>å…¶ä¸­è´Ÿå¯¹ç§°çŸ©é˜µ${\boldsymbol \omega}^{\land}$ä¸º</p>
<script type="math/tex; mode=display">% <![CDATA[
\quad {\boldsymbol \omega}^{\land}= \begin{bmatrix}0 & -\omega_3 & \omega_2\\ \omega_3 & 0 & -\omega_1 \\ -\omega_2 & \omega_1 & 0\end{bmatrix} %]]></script><p>è¿™é‡Œçš„è§’é€Ÿåº¦ Ï‰ æ˜¯åœ¨å‚è€ƒåæ ‡ç³»ä¸‹è¡¨è¾¾çš„ï¼Œè§’é€Ÿåº¦ä¹Ÿç»å¸¸è¡¨è¾¾åœ¨ä½“åæ ‡ç³» {B} ä¸‹ï¼Œè®°ä¸º${}^B{\boldsymbol \omega} = {\bf R}^T{\boldsymbol \omega}$ï¼Œå³${\boldsymbol \omega} = {\bf R}{}^B{\boldsymbol \omega}$<br>ä¸Šå¼ä¹Ÿå¯ä»¥å†™ä½œï¼š</p>
<script type="math/tex; mode=display">\dot{\bf R} =w^{\land}R=(R^Bw)^{\land}R=R{}^{\land}wR^TR= R({}^Bw)^{\land}</script></blockquote>
</li>
</ul><a id="more"></a>
<blockquote>
<p>è¯ï¼šå¯¹ä»»æ„æ—‹è½¬çŸ©é˜µ R å’Œä¸‰ç»´å‘é‡ vï¼Œéƒ½æœ‰$({\bf R v})^{\land} = {\bf Rv^{\land}R}^T$<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017160718789.png#pic_center"><br>æœ€åä¸€å¼åˆ©ç”¨å‘é‡å‰ä¹˜çš„æ—‹è½¬å˜æ¢ä¸å˜æ€§å¯è¯ï¼Œå³ï¼Œå¯¹äºä»»æ„${\bf v,u}\in \mathbb{R}^3$æ°¸è¿œæœ‰</p>
<script type="math/tex; mode=display">({\bf Rv})\times({\bf Ru})={\bf R(v\times u)}</script><p>ä»ä¸‰ç»´å‡ ä½•çš„è§’åº¦æ¥ç†è§£ï¼šv,u æ˜¯ä»»æ„ä¸¤ä¸ªä¸‰ç»´å‘é‡ï¼Œ(vÃ—u) æ˜¯ä¸€ä¸ªå’Œ v,u éƒ½å‚ç›´ã€å¤§å°ä¸º |v||u|sin(u,v) çš„ä¸‰ç»´å‘é‡ï¼›å°† v,u,vÃ—u ä¸‰ä¸ªå‘é‡éƒ½ç»è¿‡åŒä¸€ä¸ªæ—‹è½¬ï¼Œå®ƒä»¬çš„ç›¸å¯¹ä½å§¿å’Œæ¨¡é•¿éƒ½ä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ (Rv) å’Œ (Ru) çš„å‰ä¹˜ä»æ˜¯ R(vÃ—u)ã€‚</p>
</blockquote>
<h2 id="ç§‘æ°åŠ é€Ÿåº¦"><a href="#ç§‘æ°åŠ é€Ÿåº¦" class="headerlink" title="ç§‘æ°åŠ é€Ÿåº¦"></a>ç§‘æ°åŠ é€Ÿåº¦</h2><p>è¿™æ¬¡æŠŠç»•æƒ¯æ€§ç³» {A} ä¸­å›ºå®šå•ä½è½´ u æ—‹è½¬çš„ {B} ä½œä¸ºå‚è€ƒåæ ‡ç³»ã€‚è€ƒè™‘ä¸‹å›¾ï¼Œ ç‚¹ P ç›¸å¯¹äº {B} è¿åŠ¨ï¼Œè®° ${}^Br$ åˆ†åˆ«ä¸º P åœ¨ {B} ä¸‹çš„åæ ‡ï¼Œr ä¸º P çš„ç»å¯¹åæ ‡ï¼ˆå³ {A} ä¸‹åæ ‡ï¼‰ï¼Œ R ä»ä¸º {B} ç›¸å¯¹äº {A} çš„æ—‹è½¬çŸ©é˜µï¼Œæ˜“çŸ¥ $r=R{}^Br$ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017163839187.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>$r=R{}^Br$æ±‚ä¸€é˜¶æ—¶é—´å¯¼</p>
<script type="math/tex; mode=display">{\bf v} = \dot{\bf r} = \dot{\bf R} {}^B{\bf r} + {\bf R}^B\dot{\bf r} = {\boldsymbol \omega}^{\land}{\bf R}{}^B{\bf r}+ {\bf R}^B\dot{\bf r}</script><p>è®°Påœ¨ {B}ä¸‹é€Ÿåº¦ä¸º ${}^Bv$ï¼Œäºæ˜¯</p>
<script type="math/tex; mode=display">v = w^{\land}r+ {R}^B{}= w \times r+ v_r</script><p>${\bf v}_r$æ¥è¡¨è¾¾ã€Œç›¸å¯¹é€Ÿåº¦ã€çš„æ¦‚å¿µï¼Œå‡†ç¡®å®šä¹‰ä¸º P ç›¸å¯¹äº {B} çš„é€Ÿåº¦ï¼Œåœ¨æƒ¯æ€§ç³» {A} ä¸‹çš„è¡¨è¾¾<br>å†å¯¹æ±‚æ—¶é—´å¯¼ï¼š</p>
<blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017165037235.png#pic_center"><br>åœ¨æ—‹è½¬åæ ‡ç³»ä¸‹è§‚å¯Ÿï¼Œè¿åŠ¨çš„ç‰©ä½“ï¼ˆè¿åŠ¨æ–¹å‘å’Œæ—‹è½¬è½´ä¸ä¸ºåŒä¸€ä¸ªè½´æ—¶ï¼‰ä¼šå—åˆ°ç§‘æ°åŠ›çš„ä½œç”¨ã€‚</p>
<ul>
<li>ç¬¬ä¸€é¡¹ä¸­${\boldsymbol \alpha}$ä¸º {B} çš„è§’åŠ é€Ÿåº¦ï¼Œæ‰€ä»¥ç¬¬ä¸€é¡¹çš„ç‰©ç†æ„ä¹‰æ˜¯ {B} æ—‹è½¬æ‰€é€ æˆçš„ P çš„åˆ‡å‘åŠ é€Ÿåº¦</li>
<li>ç¬¬äºŒé¡¹æ˜¯ {B} æ—‹è½¬æ‰€é€ æˆçš„å‘å¿ƒåŠ é€Ÿåº¦</li>
<li>ç¬¬ä¸‰é¡¹æ¯”è¾ƒç‰¹æ®Šï¼Œä¸º {B} çš„æ—‹è½¬è¿åŠ¨ä¸ P ç›¸å¯¹ {B} çš„å¹³ç§»è¿åŠ¨è€¦åˆäº§ç”Ÿçš„åŠ é€Ÿåº¦ï¼Œç§°ä¸ºç§‘æ°åŠ é€Ÿåº¦</li>
<li>ç¬¬å››é¡¹ä¸º P ç›¸å¯¹äº {B} çš„åŠ é€Ÿåº¦ï¼Œä½†åœ¨æƒ¯æ€§ç³»{A}ä¸‹è¡¨è¾¾ï¼Œç±»ä¼¼äº${\bf v}_r$</li>
</ul>
</blockquote>
<h1 id="IMU-è¯¯å·®æ¨¡å‹"><a href="#IMU-è¯¯å·®æ¨¡å‹" class="headerlink" title="IMU è¯¯å·®æ¨¡å‹"></a>IMU è¯¯å·®æ¨¡å‹</h1><p>åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªçš„è¯¯å·®å¯ä»¥åˆ†ä¸ºï¼šç¡®å®šæ€§è¯¯å·®ï¼Œéšæœºè¯¯å·®ã€‚</p>
<ul>
<li>ç¡®å®šæ€§è¯¯å·®å¯ä»¥äº‹å…ˆæ ‡å®šç¡®å®šï¼ŒåŒ…æ‹¬ï¼š bias, scale â€¦</li>
<li>éšæœºè¯¯å·®é€šå¸¸å‡è®¾å™ªå£°æœä»é«˜æ–¯åˆ†å¸ƒï¼ŒåŒ…æ‹¬ï¼šé«˜æ–¯ç™½å™ªå£°ï¼Œ bias<br>éšæœºæ¸¸èµ°â€¦<h2 id="ç¡®å®šæ€§è¯¯å·®"><a href="#ç¡®å®šæ€§è¯¯å·®" class="headerlink" title="ç¡®å®šæ€§è¯¯å·®"></a>ç¡®å®šæ€§è¯¯å·®</h2></li>
</ul>
<ol>
<li>Bias ï¼ŒScale<br>ç†è®ºä¸Šï¼Œå½“æ²¡æœ‰å¤–éƒ¨ä½œç”¨æ—¶ï¼Œ IMU ä¼ æ„Ÿå™¨çš„è¾“å‡ºåº”è¯¥ä¸º 0ï¼Œä½†å®é™…æ•°æ®å­˜åœ¨ä¸€ä¸ªåç½® bã€‚</li>
</ol>
<ul>
<li>åŠ é€Ÿåº¦è®¡ bias å¯¹ä½å§¿ä¼°è®¡çš„å½±å“ï¼š<script type="math/tex; mode=display">v_err=b_atï¼Œp_err=\frac{1}{2}b_at^2</script></li>
<li>scale å¯ä»¥çœ‹æˆæ˜¯å®é™…æ•°å€¼å’Œä¼ æ„Ÿå™¨è¾“å‡ºå€¼ä¹‹é—´çš„æ¯”å€¼</li>
</ul>
<ol>
<li>Nonorthogonality/Misalignment Errors(éæ­£äº¤/é”™ä½é”™è¯¯ï¼‰<br><img alt data-src="https://img-blog.csdnimg.cn/20191017182956354.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"> </li>
<li>å…¶ä»–ç¡®å®šæ€§è¯¯å·®<blockquote>
<ul>
<li>Run-to-Run Bias/Scale Facto</li>
<li>In Run (Stability) Bias/Scale Factor</li>
<li>Temperature-Dependent Bias/Scale Factor</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="ç¡®å®šæ€§è¯¯å·®è¯¯å·®æ ‡å®š"><a href="#ç¡®å®šæ€§è¯¯å·®è¯¯å·®æ ‡å®š" class="headerlink" title="ç¡®å®šæ€§è¯¯å·®è¯¯å·®æ ‡å®š"></a>ç¡®å®šæ€§è¯¯å·®è¯¯å·®æ ‡å®š</h3><h4 id="å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦"><a href="#å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦" class="headerlink" title="å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦"></a>å…­é¢æ³•æ ‡å®šåŠ é€Ÿåº¦</h4><p><strong>bias å’Œ scale factor</strong></p>
<blockquote>
<p>å…­é¢æ³•æ˜¯æŒ‡å°†åŠ é€Ÿåº¦è®¡çš„ 3 ä¸ªè½´åˆ†åˆ«æœä¸Šæˆ–è€…æœä¸‹æ°´å¹³æ”¾ç½®ä¸€æ®µæ—¶é—´ï¼Œé‡‡é›† 6 ä¸ªé¢çš„æ•°æ®å®Œæˆæ ‡å®šã€‚å¦‚æœå„ä¸ªè½´éƒ½æ˜¯æ­£äº¤çš„ï¼Œé‚£å¾ˆå®¹æ˜“å¾—åˆ° bias å’Œ scaleï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017171617729.png#pic_center"><br>å…¶ä¸­,$l$ä¸ºåŠ é€Ÿåº¦è®¡æŸä¸ªè½´çš„æµ‹é‡å€¼ï¼Œ gä¸ºå½“åœ°çš„é‡åŠ›åŠ é€Ÿåº¦</p>
</blockquote>
<p><strong>ï¼ˆNonorthogonality/Misalignment Errors)</strong></p>
<blockquote>
<p>å¤šè½´ IMU ä¼ æ„Ÿå™¨åˆ¶ä½œçš„æ—¶å€™ï¼Œç”±äºåˆ¶ä½œå·¥è‰ºçš„é—®é¢˜ï¼Œä¼šä½¿å¾— xyz è½´å¯èƒ½ä¸å‚ç›´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p>è€ƒè™‘è½´é—´è¯¯å·®çš„æ—¶å€™ï¼Œå®é™…åŠ é€Ÿåº¦å’Œæµ‹é‡å€¼ä¹‹é—´çš„å…³ç³»ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017172240109.png#pic_center"><br>æ°´å¹³é™æ­¢æ”¾ç½® 6 é¢çš„æ—¶å€™ï¼ŒåŠ é€Ÿåº¦çš„ç†è®ºå€¼ä¸º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017172303634.png#pic_center"><br>å¯¹åº”çš„æµ‹é‡å€¼çŸ©é˜µ L ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017172326866.png#pic_center"><br>åˆ©ç”¨æœ€å°äºŒä¹˜å°±èƒ½å¤ŸæŠŠ12ä¸ªå˜é‡æ±‚å‡ºæ¥ã€‚</p>
</blockquote>
<h4 id="å…­é¢æ³•æ ‡å®šé™€èºä»ª"><a href="#å…­é¢æ³•æ ‡å®šé™€èºä»ª" class="headerlink" title="å…­é¢æ³•æ ‡å®šé™€èºä»ª"></a>å…­é¢æ³•æ ‡å®šé™€èºä»ª</h4><blockquote>
<ul>
<li>å…­é¢æ³•æ ‡å®šé™€èºä»ª bias å’Œ scale factor<br>å’ŒåŠ é€Ÿåº¦è®¡å…­é¢æ³•ä¸åŒçš„æ˜¯ï¼Œé™€èºä»ªçš„çœŸå®å€¼ç”±é«˜ç²¾åº¦è½¬å°æä¾›ï¼Œè¿™<br>é‡Œçš„ 6 é¢æ˜¯æŒ‡å„ä¸ªè½´é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆæ—‹è½¬ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017182109980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å‚è€ƒï¼š<a href="https://blog.csdn.net/CSDN_XCS/article/details/90339761" target="_blank" rel="noopener">https://blog.csdn.net/CSDN_XCS/article/details/90339761</a></li>
</ul>
</blockquote>
<h4 id="æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š"><a href="#æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š" class="headerlink" title="æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š"></a>æ¸©åº¦ç›¸å…³çš„å‚æ•°æ ‡å®š</h4><ul>
<li>ç›®çš„ï¼šè¿™ä¸ªæ ‡å®šçš„ä¸»è¦ç›®çš„æ˜¯å¯¹ä¼ æ„Ÿå™¨ä¼°è®¡çš„ bias å’Œ scale è¿›è¡Œæ¸©åº¦è¡¥å¿ï¼Œè·å–ä¸åŒæ¸©åº¦æ—¶ bias å’Œ scale çš„å€¼ï¼Œç»˜åˆ¶æˆæ›²çº¿ã€‚</li>
<li>ä¸¤ç§æ ‡å®šæ–¹æ³•ï¼š<blockquote>
<p>â€¢ soak method: æ§åˆ¶æ’æ¸©å®¤çš„æ¸©åº¦å€¼ï¼Œç„¶åè¯»å–ä¼ æ„Ÿå™¨æ•°å€¼è¿›è¡Œæ ‡å®šã€‚<br>â€¢ ramp methodï¼šè®°å½•ä¸€æ®µæ—¶é—´å†…çº¿æ€§å‡æ¸©å’Œé™æ¸©æ—¶ä¼ æ„Ÿå™¨çš„æ•°æ®æ¥è¿›è¡Œæ ‡å®šã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="éšæœºè¯¯å·®"><a href="#éšæœºè¯¯å·®" class="headerlink" title="éšæœºè¯¯å·®"></a>éšæœºè¯¯å·®</h2><h3 id="é«˜æ–¯ç™½å™ªå£°ä¸éšæœºæ¸¸èµ°"><a href="#é«˜æ–¯ç™½å™ªå£°ä¸éšæœºæ¸¸èµ°" class="headerlink" title="é«˜æ–¯ç™½å™ªå£°ä¸éšæœºæ¸¸èµ°"></a>é«˜æ–¯ç™½å™ªå£°ä¸éšæœºæ¸¸èµ°</h3><h4 id="é«˜æ–¯ç™½å™ªå£°"><a href="#é«˜æ–¯ç™½å™ªå£°" class="headerlink" title="é«˜æ–¯ç™½å™ªå£°"></a>é«˜æ–¯ç™½å™ªå£°</h4><p>é«˜æ–¯ç™½å™ªå£°çš„é«˜æ–¯æŒ‡çš„æ˜¯æ¦‚ç‡åˆ†å¸ƒä¸ºæ­£æ€åˆ†å¸ƒï¼Œç™½å™ªå£°æŒ‡çš„æ˜¯å…¶äºŒé˜¶çŸ©ä¸ç›¸å…³ï¼Œä¸€é˜¶çŸ©ä¸ºå¸¸æ•°ã€‚æ•…æŠŠç¬æ—¶å€¼çš„æ¦‚ç‡åˆ†å¸ƒæœä»é«˜æ–¯åˆ†å¸ƒï¼ŒåŠŸç‡è°±å¯†åº¦æœä»å‡åŒ€åˆ†å¸ƒçš„å™ªå£°ç§°ä¸ºé«˜æ–¯ç™½å™ªå£°</p>
<p>IMU æ•°æ®è¿ç»­æ—¶é—´ä¸Šå—åˆ°ä¸€ä¸ªå‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º $Ïƒ^2$ï¼Œå„æ—¶åˆ»ä¹‹é—´ç›¸äº’ç‹¬ç«‹çš„é«˜æ–¯è¿‡ç¨‹ n(t)ï¼š</p>
<script type="math/tex; mode=display">E[n(t)]=0</script><script type="math/tex; mode=display">E[n(t_1â€‹)n(t_2â€‹)]=Ïƒ^2Î´(t_1â€‹âˆ’t_2â€‹)</script><p>è‡ªç›¸å…³å‡½æ•°çš„æ•°å­¦å®šä¹‰ï¼š$R(Ï„)=âˆ«^{âˆ’âˆ}_âˆã€€x(t)x(tâˆ’Ï„)dt$</p>
<p>å…¶ä¸­ $Î´()$ è¡¨ç¤ºç‹„æ‹‰å…‹å‡½æ•°<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20190929113450104.png#pic_center"><br><strong>ç™½å™ªå£°çš„ç¦»æ•£åŒ–</strong><br>å®é™…ä¸Šï¼Œ IMU ä¼ æ„Ÿå™¨è·å–çš„æ•°æ®ä¸ºç¦»æ•£é‡‡æ ·ï¼Œç¦»æ•£å’Œè¿ç»­é«˜æ–¯ç™½å™ªå£°çš„æ–¹å·®ä¹‹é—´å­˜åœ¨å¦‚ä¸‹è½¬æ¢å…³ç³»ï¼š</p>
<script type="math/tex; mode=display">n_d[k] \triangleq n(t_0+\Delta t)\simeq\frac{1}{\Delta t}\int_{t_0}^{t_0+\Delta t}n(\tau)dt</script><script type="math/tex; mode=display">
 \begin{aligned}
E(n_d[k]^2) & = E(\frac{1}{\Delta t^2}\int_{t_0}^{t_0+\Delta t}\int_{t_0}^{t_0+\Delta t}n(\tau)n(t)d \tau dt) \\
&= E( \frac{\sigma^2}{\Delta t^2}\int_{t_0}^{t_0+\Delta t}\int_{t_0}^{t_0+\Delta t}\delta(t-\tau)d \tau dt)\\
&= E(\frac{\sigma^2}{\Delta t})
\end{aligned}</script><p>å³:</p>
<script type="math/tex; mode=display">nd[k] = Ïƒ_dw[k]</script><p>å…¶ä¸­ï¼š$w[k] âˆ¼ N(0, 1)$ï¼Œ$\sigma_d=\sigma \frac{1}{\sqrt{\bigtriangleup t}}$<br>ä¹Ÿå°±æ˜¯è¯´é«˜æ–¯ç™½å™ªå£°çš„è¿ç»­æ—¶é—´åˆ°ç¦»æ•£æ—¶é—´ä¹‹é—´å·®ä¸€ä¸ª $\frac{1}{\sqrt{\bigtriangleup t}}$ ï¼Œâˆšâˆ†t æ˜¯ä¼ æ„Ÿå™¨çš„é‡‡æ ·æ—¶é—´ã€‚</p>
<h4 id="Bias-éšæœºæ¸¸èµ°"><a href="#Bias-éšæœºæ¸¸èµ°" class="headerlink" title="Bias éšæœºæ¸¸èµ°"></a>Bias éšæœºæ¸¸èµ°</h4><p>é€šå¸¸ç”¨ç»´çº³è¿‡ç¨‹ (wiener process) æ¥å»ºæ¨¡ bias éšæ—¶é—´è¿ç»­å˜åŒ–çš„è¿‡ç¨‹ï¼Œç¦»æ•£æ—¶é—´ä¸‹ç§°ä¹‹ä¸ºéšæœºæ¸¸èµ°</p>
<script type="math/tex; mode=display">\dot{b}_{(t)}=n(t)=\sigma_bw(t)</script><p>å…¶ä¸­ w æ˜¯æ–¹å·®ä¸º 1 çš„ç™½å™ªå£°</p>
<p>ç¦»æ•£å’Œè¿ç»­ä¹‹é—´çš„è½¬æ¢ï¼š</p>
<script type="math/tex; mode=display">b_d[k] \triangleq b(t_0) + \int_{t_0}^{t_0+\Delta t}n(t)dt$$$$\begin{aligned}
E((b_d[k]-b_d[k-1])^2) 
&=E(\int_{t_0}^{t_0+\Delta t}\int_{t_0}^{t_0+\Delta t}n(t)n(\tau)d \tau dt)\\
&= E({\sigma_{b}^2}\int_{t_0}^{t_0+\Delta t}\int_{t_0}^{t_0+\Delta t}\delta(t-\tau)d \tau dt)\\
&= E(\sigma_{b}^2\Delta t)
\end{aligned}</script><p>å³ï¼š</p>
<script type="math/tex; mode=display">b_d[k] = b_d[k âˆ’ 1] + Ïƒ_{bd}w[k]</script><p>å…¶ä¸­ï¼š</p>
<script type="math/tex; mode=display">w[k] âˆ¼ N(0, 1),Ïƒ_{bd} = Ïƒ_b\sqrt{\bigtriangleup t}</script><p>bias éšæœºæ¸¸èµ°çš„å™ªå£°æ–¹å·®ä»è¿ç»­æ—¶é—´åˆ°ç¦»æ•£ä¹‹é—´éœ€è¦ä¹˜ä»¥ $\sqrt{\bigtriangleup t}$ </p>
<h3 id="éšæœºè¯¯å·®çš„æ ‡å®š"><a href="#éšæœºè¯¯å·®çš„æ ‡å®š" class="headerlink" title="éšæœºè¯¯å·®çš„æ ‡å®š"></a>éšæœºè¯¯å·®çš„æ ‡å®š</h3><h4 id="è‰¾ä¼¦æ–¹å·®æ ‡å®š"><a href="#è‰¾ä¼¦æ–¹å·®æ ‡å®š" class="headerlink" title="è‰¾ä¼¦æ–¹å·®æ ‡å®š"></a>è‰¾ä¼¦æ–¹å·®æ ‡å®š</h4><p>Allan æ–¹å·®æ³•æ˜¯ 20 ä¸–çºª 60 å¹´ä»£ç”±ç¾å›½å›½å®¶æ ‡å‡†å±€çš„ David Allan æå‡ºçš„ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäºæ—¶åŸŸçš„åˆ†ææ–¹æ³•ã€‚</p>
<blockquote>
<p>å…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¿æŒä¼ æ„Ÿå™¨ç»å¯¹é™æ­¢è·å–æ•°æ®</li>
<li>å¯¹æ•°æ®è¿›è¡Œåˆ†æ®µï¼Œè®¾å®šæ—¶é—´æ®µçš„æ—¶é•¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017204504508.png#pic_center"></li>
<li>å°†ä¼ æ„Ÿå™¨æ•°æ®æŒ‰ç…§æ—¶é—´æ®µè¿›è¡Œå¹³å‡</li>
<li>è®¡ç®—æ–¹å·®ï¼Œç»˜åˆ¶è‰¾ä¼¦æ›²çº¿ï¼Œå¾—åˆ°çš„è‰¾ä¼¦æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017204557636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70">Allanæ–¹å·®æ³•å¯ç”¨äº5ç§éšæœºè¯¯å·®çš„æ ‡å®šï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191017212131103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br>å‚è€ƒï¼š<a href="https://blog.csdn.net/YunLaowang/article/details/95608107" target="_blank" rel="noopener">VIOæ ‡å®šIMUéšæœºè¯¯å·®ï¼šAllanæ–¹å·®æ³•</a><br><a href="https://blog.csdn.net/lei1105034103/article/details/89159459" target="_blank" rel="noopener">é™€èº Allan æ–¹å·®åˆ†æ</a></li>
</ol>
</blockquote>
<h2 id="IMU-æ•°å­¦æ¨¡å‹"><a href="#IMU-æ•°å­¦æ¨¡å‹" class="headerlink" title="IMU æ•°å­¦æ¨¡å‹"></a>IMU æ•°å­¦æ¨¡å‹</h2><p>ä»¥ ECI ä¸ºå‚è€ƒåæ ‡ç³»ï¼ˆç”±äº ECI ä¸ºæƒ¯æ€§ç³»ï¼Œä¸éœ€è¦è€ƒè™‘åœ°çƒè‡ªè½¬ï¼‰ï¼š<br>å¿½ç•¥ scale çš„å½±å“ï¼Œåªè€ƒè™‘ç™½å™ªå£°å’Œ bias éšæœºæ¸¸èµ°ï¼š<br>IMUçš„çœŸå®å€¼ï¼š$w^b,a^b$<br>IMUçš„æµ‹é‡å€¼ï¼š$\widetilde{w},\widetilde{a}^b$<br>IMUæœºä½“ç³»å³bç³»ï¼Œwç³»è¡¨ç¤ºä¸–ç•Œåæ ‡ç³»ã€‚</p>
<script type="math/tex; mode=display">\begin{aligned}
 \widetilde{w}&=w^b +b^g+n^g\\
 \widetilde{a}^b&=a^b+b^a+n^a\\&=q_{bw}(a^w+g^w)+b^a+n^a
 \end{aligned}</script><p>è€ƒè™‘é«˜æ–¯ç™½å™ªå£°é¡¹ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}
 &w^b=\widetilde{w} -b^g-n^g\\
 &a^w=q_{wb}(\widetilde{a}^b-b^a-n^a)-g^w
 \end{aligned}</script><p>ä¸è€ƒè™‘é«˜æ–¯ç™½å™ªå£°é¡¹ï¼Œæœ‰ï¼š</p>
<script type="math/tex; mode=display">\begin{aligned}
 &w^b=\widetilde{w} -b^g\\
 &a^w=q_{wb}(\widetilde{a}^b-b^a)-g^w
 \end{aligned}</script><p>å‚è€ƒï¼š<a href="https://fzheng.me/2016/11/20/imu_model_eq/#1-2-%E5%89%8D%E7%BD%AE2-%E5%9B%9B%E5%85%83%E6%95%B0" target="_blank" rel="noopener">ä»é›¶å¼€å§‹çš„ IMU çŠ¶æ€æ¨¡å‹æ¨å¯¼</a></p>
]]></content>
      <categories>
        <category>VIO</category>
      </categories>
  </entry>
  <entry>
    <title>hexo4.0 - Next7.2.4 ä¸»é¢˜ä¼˜åŒ–é…ç½®</title>
    <url>/2019/10/23/hexo4.0%20-%20Next7.2.4%20%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Nextä¸»é¢˜çš„å®‰è£…"><a href="#Nextä¸»é¢˜çš„å®‰è£…" class="headerlink" title="Nextä¸»é¢˜çš„å®‰è£…"></a>Nextä¸»é¢˜çš„å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo_blog</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>ç„¶åè®¾ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼ŒHexoåšå®¢ä¸»é¢˜æ›¿æ¢ä¸ºNextä¸»é¢˜ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022101546332.png#pic_center">.</p><h1 id="Nextä¸»é¢˜ä¼˜åŒ–é…ç½®"><a href="#Nextä¸»é¢˜ä¼˜åŒ–é…ç½®" class="headerlink" title="Nextä¸»é¢˜ä¼˜åŒ–é…ç½®"></a>Nextä¸»é¢˜ä¼˜åŒ–é…ç½®</h1><h2 id="1-Nextä¸»é¢˜é£æ ¼ï¼š"><a href="#1-Nextä¸»é¢˜é£æ ¼ï¼š" class="headerlink" title="1.Nextä¸»é¢˜é£æ ¼ï¼š"></a>1.Nextä¸»é¢˜é£æ ¼ï¼š</h2><a id="more"></a>

<p>Nextæä¾›äº†å››ä¸­ä¸»é¢˜é£æ ¼schemeï¼Œå¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶blog/themes/next/_config.ymlæ–‡ä»¶ä¸­è¿›è¡Œé€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯Museã€Mistã€Piscesã€Geminiï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022102034549.png#pic_center"></p>
<ul>
<li>Nextä¸»é¢˜ä¸€èˆ¬é…ç½®ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Allow to cache content generation. Introduced in NexT v6.0.0.</span></span><br><span class="line">cache:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment">#è¡¨ç¤ºæ·»åŠ ç¼“å­˜åŠŸèƒ½ï¼Œè¿™æ ·æµè§ˆå™¨åç»­æ‰“å¼€æˆ‘ä»¬çš„åšå®¢ç½‘ç«™ä¼šæ›´å¿«</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  archives: /archives/ || archive</span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable/Disable menu icons / item badges.</span></span><br><span class="line">menu_settings:</span><br><span class="line">  icons: <span class="literal">true</span>  <span class="comment">#æ˜¯å¦æ˜¾ç¤ºå„ä¸ªé¡µé¢çš„å›¾æ ‡</span></span><br><span class="line">  badges: <span class="literal">false</span> <span class="comment">#æ˜¯å¦æ˜¾ç¤ºåˆ†ç±»/æ ‡ç­¾/å½’æ¡£é¡µçš„å†…å®¹é‡</span></span><br></pre></td></tr></table></figure>
<p>ç›¸åº”çš„ç«™ç‚¹é…ç½®blog/_config.ymlæ–‡ä»¶çš„åŸºæœ¬é…ç½®ä¸ºï¼š</p>
<h2 id="2-æ·»åŠ åšå®¢è‡ªå®šä¹‰å›¾æ ‡"><a href="#2-æ·»åŠ åšå®¢è‡ªå®šä¹‰å›¾æ ‡" class="headerlink" title="2.æ·»åŠ åšå®¢è‡ªå®šä¹‰å›¾æ ‡"></a>2.æ·»åŠ åšå®¢è‡ªå®šä¹‰å›¾æ ‡</h2><p>é€‰æ‹©æˆ–è€…åˆ›å»ºç›¸åº”å¤§å°çš„å›¾æ ‡æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨blog/themes/next/sources/imagesç›®å½•ä¸‹ï¼Œå¹¶åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼Œåªéœ€è¦è®¾ç½®smallå’Œmediumä¸¤ä¸ªå°±å¯ä»¥ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022104457616.png#pic_center"></p>
<h2 id="3-æ·»åŠ åŠ¨æ€èƒŒæ™¯"><a href="#3-æ·»åŠ åŠ¨æ€èƒŒæ™¯" class="headerlink" title="3.æ·»åŠ åŠ¨æ€èƒŒæ™¯"></a>3.æ·»åŠ åŠ¨æ€èƒŒæ™¯</h2><p>æ‰“å¼€ next/layout/_layout.swig<br>åœ¨ &lt; /body&gt;ä¹‹å‰æ·»åŠ ä»£ç (æ³¨æ„ä¸è¦æ”¾åœ¨&lt; /head&gt;çš„åé¢)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.canvas_nest %&#125;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€ /next/_config.yml,åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022145253296.png#pic_center">.</p>
<h2 id="4-æ·»åŠ çœ‹æ¿å¨˜"><a href="#4-æ·»åŠ çœ‹æ¿å¨˜" class="headerlink" title="4.æ·»åŠ çœ‹æ¿å¨˜"></a>4.æ·»åŠ çœ‹æ¿å¨˜</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install -save hexo-helper-live2d</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½æ¨¡å‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install live2d-widget-model-wanko</span><br></pre></td></tr></table></figure>
<h2 id="5-é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"><a href="#5-é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ" class="headerlink" title="5.é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ"></a>5.é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ</h2><p>é¼ æ ‡çš„ç‚¹å‡»çº¢å¿ƒç‰¹æ•ˆ<br>åœ¨/themes/next/source/js/srcä¸‹æ–°å»ºæ–‡ä»¶clicklove.js ï¼Œæ¥ç€æŠŠä¸‹é¢çš„ä»£ç æ‹·è´ç²˜è´´åˆ° love.js æ–‡ä»¶ä¸­ï¼š<br>7.4 nextæ²¡æœ‰srcæ–‡ä»¶å¤¹ï¼Œå…ˆå»ºä¸€ä¸ªsrcæ–‡ä»¶å¤¹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">!<span class="keyword">function</span>(e,t,a)&#123;<span class="keyword">function</span> <span class="function"><span class="title">n</span></span>()&#123;c(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>),o(),r()&#125;<span class="keyword">function</span> <span class="function"><span class="title">r</span></span>()&#123;<span class="keyword">for</span>(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText=<span class="string">"left:"</span>+d[e].x+<span class="string">"px;top:"</span>+d[e].y+<span class="string">"px;opacity:"</span>+d[e].alpha+<span class="string">";transform:scale("</span>+d[e].scale+<span class="string">","</span>+d[e].scale+<span class="string">") rotate(45deg);background:"</span>+d[e].color+<span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="keyword">function</span> <span class="function"><span class="title">o</span></span>()&#123;var t=<span class="string">"function"</span>==typeof e.onclick&amp;&amp;e.onclick;e.onclick=<span class="keyword">function</span>(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="keyword">function</span> i(e)&#123;var a=t.createElement(<span class="string">"div"</span>);a.className=<span class="string">"heart"</span>,d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;<span class="keyword">function</span> c(e)&#123;var a=t.createElement(<span class="string">"style"</span>);a.type=<span class="string">"text/css"</span>;try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[0].appendChild(a)&#125;<span class="keyword">function</span> <span class="function"><span class="title">s</span></span>()&#123;<span class="built_in">return</span><span class="string">"rgb("</span>+~~(255*Math.random())+<span class="string">","</span>+~~(255*Math.random())+<span class="string">","</span>+~~(255*Math.random())+<span class="string">")"</span>&#125;var d=[];e.requestAnimationFrame=<span class="function"><span class="title">function</span></span>()&#123;<span class="built_in">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="keyword">function</span>(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document);</span><br></pre></td></tr></table></figure></p>
<p>åœ¨\themes\next\layout_layout.swigæ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ --&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/clicklove.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="6-è®¾ç½®å¤´åƒ"><a href="#6-è®¾ç½®å¤´åƒ" class="headerlink" title="6.è®¾ç½®å¤´åƒ"></a>6.è®¾ç½®å¤´åƒ</h2><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¤´åƒï¼Œå°†å…¶æ”¾ç½®åˆ° themes/next/source/images/avatar.png è·¯å¾„ï¼Œroundedæ˜¯å¦è®¾ç½®æˆåœ†å½¢ï¼Œrotatedæ˜¯å¦è®¾ç½®æˆå¯æ—‹è½¬çš„ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022134436646.png#pic_center"></p>
<h2 id="7-è®¾ç½®RSSè®¢é˜…"><a href="#7-è®¾ç½®RSSè®¢é˜…" class="headerlink" title="7.è®¾ç½®RSSè®¢é˜…"></a>7.è®¾ç½®RSSè®¢é˜…</h2><p>åšå®¢ä¸€èˆ¬æ˜¯éœ€è¦ RSS è®¢é˜…çš„ï¼Œå¦‚æœè¦å¼€å¯ RSS è®¢é˜…ï¼Œè¿™é‡Œéœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œå«åš hexo-generator-feedï¼Œå®‰è£…å®Œæˆä¹‹åï¼Œç«™ç‚¹ä¼šè‡ªåŠ¨ç”Ÿæˆ RSS Feed æ–‡ä»¶ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€æ ¹ç›®å½•é…ç½®æ–‡ä»¶_config.yml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: http://hexo.io/plugins/</span></span><br><span class="line">plugins: hexo-generate-feed</span><br></pre></td></tr></table></figure>
<p>ç„¶åè®¾ç½®ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set rss to false to disable feed link.</span></span><br><span class="line"><span class="comment"># Leave rss as empty to use site's feed link.</span></span><br><span class="line"><span class="comment"># Set rss to specific value if you have burned your feed already.</span></span><br><span class="line">rss: /atom.xml</span><br></pre></td></tr></table></figure>
<h2 id="8-ä¾§è¾¹æ ç¤¾äº¤å°å›¾æ ‡è®¾ç½®"><a href="#8-ä¾§è¾¹æ ç¤¾äº¤å°å›¾æ ‡è®¾ç½®" class="headerlink" title="8.ä¾§è¾¹æ ç¤¾äº¤å°å›¾æ ‡è®¾ç½®"></a>8.ä¾§è¾¹æ ç¤¾äº¤å°å›¾æ ‡è®¾ç½®</h2><p>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlï¼Œcommand+fæœç´¢ Socialï¼Œå°†ä½ æœ‰çš„ç¤¾äº¤è´¦å·å‰é¢çš„ # å·å»æ‰ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022135427340.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="9-Tag-æ ‡ç­¾å‰å›¾æ ‡ä¿®æ”¹"><a href="#9-Tag-æ ‡ç­¾å‰å›¾æ ‡ä¿®æ”¹" class="headerlink" title="9.Tag æ ‡ç­¾å‰å›¾æ ‡ä¿®æ”¹"></a>9.Tag æ ‡ç­¾å‰å›¾æ ‡ä¿®æ”¹</h2><p>æ–‡ç« æ ‡ç­¾çš„æ˜¾ç¤ºé»˜è®¤å‰é¢â€œ#â€å·ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å°†â€œ#â€æ¢ä¸ºå›¾æ ‡ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tag_icon: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="10-è®¿é—®é‡ç»Ÿè®¡"><a href="#10-è®¿é—®é‡ç»Ÿè®¡" class="headerlink" title="10.è®¿é—®é‡ç»Ÿè®¡"></a>10.è®¿é—®é‡ç»Ÿè®¡</h2><ul>
<li>æ‰“å¼€themes/next/ä¸‹çš„_config.ymlï¼ŒæŸ¥æ‰¾busuanzi<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line">busuanzi_count:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  total_visitors: <span class="literal">true</span></span><br><span class="line">  total_visitors_icon: user</span><br><span class="line">  total_views: <span class="literal">true</span></span><br><span class="line">  total_views_icon: eye</span><br><span class="line">  post_views: <span class="literal">true</span></span><br><span class="line">  post_views_icon: eye</span><br></pre></td></tr></table></figure>
å½“å‰ç‰ˆæœ¬çš„NexTé›†æˆçš„ä¸è’œå­ï¼Œæ€»è®¿é—®äººæ•°å’Œäººæ¬¡åªæ˜¯åˆ†åˆ«ç”¨iconæ¥è¡¨ç¤ºï¼Œæ•…å–æ¶ˆæ˜¾ç¤ºï¼Œè‡ªè¡Œæ”¹åŠ¨</li>
<li>æ‰“å¼€/themes/next/layout/_partials/footer.swigï¼Œåœ¨æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;span id=<span class="string">"busuanzi_container_site_uv"</span>&gt;</span><br><span class="line">  æœ¬ç«™è®¿é—®æ¬¡æ•°ï¼š&lt;span class=<span class="string">"busuanzi-value"</span> id=<span class="string">"busuanzi_value_site_pv"</span>&gt;&lt;/span&gt;</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="11-å®ç°æ–‡ç« ç»Ÿè®¡åŠŸèƒ½"><a href="#11-å®ç°æ–‡ç« ç»Ÿè®¡åŠŸèƒ½" class="headerlink" title="11.å®ç°æ–‡ç« ç»Ÿè®¡åŠŸèƒ½"></a>11.å®ç°æ–‡ç« ç»Ÿè®¡åŠŸèƒ½</h2><p>ç»Ÿè®¡å­—æ•°å’Œé˜…è¯»åˆ†é’Ÿæ•°<br>å®‰è£… hexo-symbols-count-timeï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure>
<p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ hexo _config.yamlæ·»åŠ ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">symbols_count_time:</span><br><span class="line">  symbols: <span class="literal">true</span>                <span class="comment"># æ–‡ç« å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  time: <span class="literal">true</span>                   <span class="comment"># æ–‡ç« é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  total_symbols: <span class="literal">true</span>          <span class="comment"># ç«™ç‚¹æ€»å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  total_time: <span class="literal">true</span>             <span class="comment"># ç«™ç‚¹æ€»é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  exclude_codeblock: <span class="literal">false</span>     <span class="comment"># æ’é™¤ä»£ç å­—æ•°ç»Ÿè®¡</span></span><br></pre></td></tr></table></figure>
<p>å…·ä½“å¯æŸ¥çœ‹ï¼š<a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener">https://github.com/theme-next/hexo-symbols-count-time</a><br>æ•ˆæœå¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022142919746.png#pic_center"></p>
<h2 id="12-æ·»åŠ ç½‘é¡µé¡¶éƒ¨è¿›åº¦åŠ è½½æ¡"><a href="#12-æ·»åŠ ç½‘é¡µé¡¶éƒ¨è¿›åº¦åŠ è½½æ¡" class="headerlink" title="12.æ·»åŠ ç½‘é¡µé¡¶éƒ¨è¿›åº¦åŠ è½½æ¡"></a>12.æ·»åŠ ç½‘é¡µé¡¶éƒ¨è¿›åº¦åŠ è½½æ¡</h2><p>ä¸‹è½½å®‰è£…Progress moduleï¼Œå¦‚ä¸‹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œcommand+F æœç´¢ paceï¼Œå°†å…¶å€¼æ”¹ä¸º ture å°±å¯ä»¥äº†ã€‚</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022144354865.png#pic_center"></p>
<h2 id="13-æ·»åŠ ç«™å†…æœç´¢"><a href="#13-æ·»åŠ ç«™å†…æœç´¢" class="headerlink" title="13.æ·»åŠ ç«™å†…æœç´¢"></a>13.æ·»åŠ ç«™å†…æœç´¢</h2><p>å®‰è£… hexo-generator-search<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><br>å®‰è£… hexo-generator-searchdb</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  <span class="built_in">limit</span>: 10000</span><br></pre></td></tr></table></figure><br>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè®¾ç½® local_searchä¸º ture<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102215014852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="14-Footer-é¡µè„šè®¾ç½®"><a href="#14-Footer-é¡µè„šè®¾ç½®" class="headerlink" title="14.Footer / é¡µè„šè®¾ç½®"></a>14.Footer / é¡µè„šè®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">footer:</span><br><span class="line">  <span class="comment"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="comment">#since: 2015</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  icon:</span><br><span class="line">    <span class="comment"># Icon name in Font Awesome. See: https://fontawesome.com/v4.7.0/icons/</span></span><br><span class="line">    <span class="comment"># `heart` is recommended with animation in red (#ff0000).</span></span><br><span class="line">    name: user</span><br><span class="line">    <span class="comment"># If you want to animate the icon, set it to true.</span></span><br><span class="line">    <span class="comment">## å›¾æ ‡çš„ä¸€ä¸ªåŠ¨ç”»æ•ˆæœï¼Œç±»ä¼¼äºå¿ƒè·³</span></span><br><span class="line">    animated: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Change the color of icon, using Hex Code.</span></span><br><span class="line">    <span class="comment"># å›¾æ ‡é¢œè‰²ï¼Œå¯æ ¼å±€éœ€è¦è‡ªè¡Œä¿®æ”¹</span></span><br><span class="line">    color: <span class="string">"#808080"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, `author` from Hexo `_config.yml` will be used.</span></span><br><span class="line">  copyright:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Powered by Hexo å­—æ ·ï¼Œä¸å–œæ¬¢å¯ä»¥è®¾ç½®ä¸º false</span></span><br><span class="line">  powered:</span><br><span class="line">    <span class="comment"># Hexo link (Powered by Hexo).</span></span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Version info of Hexo after Hexo link (vX.X.X).</span></span><br><span class="line">    version: <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># ä¸»é¢˜å­—æ ·ï¼Œä¸å–œæ¬¢å¯ä»¥ false</span></span><br><span class="line">  theme:</span><br><span class="line">    <span class="comment"># Theme &amp; scheme info link (Theme - NexT.scheme).</span></span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Version info of NexT after scheme info (vX.X.X).</span></span><br><span class="line">    version: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Beian ICP and gongan information for Chinese users. See: http://www.beian.miit.gov.cn, http://www.beian.gov.cn</span></span><br><span class="line">  <span class="comment"># å¤‡æ¡ˆä¿¡æ¯ï¼Œå¦‚æœç½‘ç«™æœ‰å¤‡æ¡ˆå·ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¡«å†™å¤‡æ¡ˆå·</span></span><br><span class="line">  beian:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">    icp:</span><br></pre></td></tr></table></figure>
<h2 id="15-Creative-Commons-æ–‡ç« ç‰ˆæƒ"><a href="#15-Creative-Commons-æ–‡ç« ç‰ˆæƒ" class="headerlink" title="15.Creative Commons / æ–‡ç« ç‰ˆæƒ"></a>15.Creative Commons / æ–‡ç« ç‰ˆæƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># See: https://creativecommons.org/share-your-work/licensing-types-examples</span></span><br><span class="line"><span class="comment"># Available values of license: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line"><span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line">creative_commons:</span><br><span class="line">  license: by-nc-nd</span><br><span class="line">  post: <span class="literal">true</span></span><br><span class="line">  language: deed.zh</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ç«  .md æ–‡ä»¶ä¸­çš„ä¸Šéƒ¨ï¼Œæ·»åŠ  copyright: trueã€‚</p>
<h2 id="16-è®¾ç½®é˜…è¯»å…¨æ–‡"><a href="#16-è®¾ç½®é˜…è¯»å…¨æ–‡" class="headerlink" title="16.è®¾ç½®é˜…è¯»å…¨æ–‡"></a>16.è®¾ç½®é˜…è¯»å…¨æ–‡</h2><p>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹auto_excerpt:å­—æ®µä¸ºtrueï¼Œlengthè¡¨ç¤ºæ˜¾ç¤ºæ–‡æœ¬çš„é•¿åº¦<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022151038529.png#pic_center"><br>åœ¨æƒ³è¦éšè—çš„ä½ç½®åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="17-å¼€å¯æ–‡ç« ç›®å½•"><a href="#17-å¼€å¯æ–‡ç« ç›®å½•" class="headerlink" title="17.å¼€å¯æ–‡ç« ç›®å½•"></a>17.å¼€å¯æ–‡ç« ç›®å½•</h2><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Table of Contents in the Sidebar</span></span><br><span class="line">toc:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  number: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  wrap: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  expand_all: <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc. You can set it in one post through `toc_max_depth` in Front-matter.</span></span><br><span class="line">  max_depth: 6</span><br></pre></td></tr></table></figure>
<h2 id="18-GitHub-Fork-Me"><a href="#18-GitHub-Fork-Me" class="headerlink" title="18.GitHub Fork Me"></a>18.GitHub Fork Me</h2><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># `Follow me on GitHub` banner in the top-right corner.</span></span><br><span class="line">github_banner:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  permalink: https://github.com/Xiao-Hu-Z</span><br><span class="line">  title: Follow me on GitHub</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191022161748244.png#pic_center"></p>
<h2 id="19-bookmark"><a href="#19-bookmark" class="headerlink" title="19.bookmark"></a>19.bookmark</h2><p>Bookmarkæ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå…è®¸ç”¨æˆ·ä¿å­˜ä»–ä»¬çš„é˜…è¯»è¿›åº¦ã€‚ç”¨æˆ·åªéœ€å•å‡»é¡µé¢å·¦ä¸Šè§’çš„ä¹¦ç­¾å›¾æ ‡å³å¯ä¿å­˜æ»šåŠ¨ä½ç½®ã€‚å½“ä»–ä»¬ä¸‹æ¬¡è®¿é—®æ‚¨çš„åšå®¢æ—¶ï¼Œä»–ä»¬å¯ä»¥è‡ªåŠ¨æ¢å¤æ¯ä¸ªé¡µé¢çš„æœ€åæ»šåŠ¨ä½ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bookmark:	</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Customize the color of the bookmark.	</span></span><br><span class="line">  color: <span class="string">"#222"</span>	</span><br><span class="line">  <span class="comment"># If auto, save the reading progress when closing the page or clicking the bookmark-icon.	</span></span><br><span class="line">  <span class="comment"># If manual, only save it by clicking the bookmark-icon.	</span></span><br><span class="line">  save: auto</span><br></pre></td></tr></table></figure>
<h2 id="20-æ·»åŠ lazyload"><a href="#20-æ·»åŠ lazyload" class="headerlink" title="20. æ·»åŠ lazyload"></a>20. æ·»åŠ lazyload</h2><p>å¯¹äºå›¾ç‰‡è¿›è¡Œå»¶è¿ŸåŠ è½½ï¼Œè®¿é—®åˆ°å›¾ç‰‡ä½ç½®æ—¶æ‰å»è¯·æ±‚å›¾ç‰‡èµ„æºï¼Œè¿™æ ·å¯ä»¥æé«˜åšå®¢çš„è®¿é—®é€Ÿåº¦ï¼ŒèŠ‚çœæµé‡ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-jquery-lazyload <span class="built_in">source</span>/lib/jquery_lazyload</span><br></pre></td></tr></table></figure><br>ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Vanilla JavaScript plugin for lazyloading images.</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/ApoorvSaxena/lozad.js</span></span><br><span class="line">lazyload: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="21-ä»£ç å¤åˆ¶"><a href="#21-ä»£ç å¤åˆ¶" class="headerlink" title="21.ä»£ç å¤åˆ¶"></a>21.ä»£ç å¤åˆ¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add copy button on codeblock</span></span><br><span class="line">copy_button:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="22-SEOæ”¯æŒ"><a href="#22-SEOæ”¯æŒ" class="headerlink" title="22.SEOæ”¯æŒ"></a>22.SEOæ”¯æŒ</h2><p>SEO(Search Engine Optimization)æ„ä¸ºæœç´¢å¼•æ“ä¼˜åŒ–,åˆ©ç”¨æœç´¢å¼•æ“çš„è§„åˆ™æé«˜ç½‘ç«™åœ¨æœ‰å…³æœç´¢å¼•æ“å†…çš„è‡ªç„¶æ’åã€‚</p>
<ul>
<li>å®‰è£…ç«™ç‚¹åœ°å›¾(sitemap)æ’ä»¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>
<ul>
<li>ç«™ç‚¹é…ç½®æ–‡ä»¶ä¿®æ”¹/æ·»åŠ </li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SEO </span></span><br><span class="line">sitemap: </span><br><span class="line">  path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br></pre></td></tr></table></figure>
<p>å¯ç”¨ç™¾åº¦æ¨é€åŠŸèƒ½ï¼Œåšå®¢ä¼šè‡ªåŠ¨å°†ç½‘å€æ¨é€åˆ°ç™¾åº¦ï¼Œè¿™å¯¹æœç´¢å¼•æ“ä¼˜åŒ–éå¸¸æœ‰å¸®åŠ©ã€‚<br>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹ baidu_push: true</p>
<h2 id="23-æ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"><a href="#23-æ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦" class="headerlink" title="23.æ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦"></a>23.æ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦</h2><p>æ‰“å¼€ themes/next/_config.yml ,æœç´¢å…³é”®å­— scrollpercent ,æŠŠ false æ”¹ä¸º true ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"># Scroll percent label in b2t button.# # æ˜¯å¦æ˜¾ç¤ºé¡µé¢æµè§ˆç™¾åˆ†æ¯”</span><br><span class="line">scrollpercent: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="ç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#ç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ–¹æœåŠ¡"></a>ç¬¬ä¸‰æ–¹æœåŠ¡</h1><h2 id="1-æ”¯æŒæ•°å­¦å…¬å¼"><a href="#1-æ”¯æŒæ•°å­¦å…¬å¼" class="headerlink" title="1.æ”¯æŒæ•°å­¦å…¬å¼"></a>1.æ”¯æŒæ•°å­¦å…¬å¼</h2><p>å¯èƒ½åœ¨ä¸€äº›æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªå…¬å¼ï¼Œmakdownæ˜¯æ”¯æŒçš„ï¼Œnextä¹Ÿæ”¯æŒã€‚</p>
<p>Next ä¸»é¢˜æä¾›äº†ä¸¤ä¸ªæ¸²æŸ“å¼•æ“ï¼Œåˆ†åˆ«æ˜¯ mathjax å’Œkatexï¼Œåè€…ç›¸å¯¹å‰è€…æ¥è¯´æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”ä¸éœ€è¦ JavaScript çš„é¢å¤–æ”¯æŒï¼Œä½†åè€…æ”¯æŒçš„åŠŸèƒ½ç°åœ¨è¿˜ä¸å¦‚å‰è€…ä¸°å¯Œï¼Œå…·ä½“çš„å¯¹æ¯”å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://theme-next.org/docs/third-party-services/math-equationsã€‚" target="_blank" rel="noopener">https://theme-next.org/docs/third-party-services/math-equationsã€‚</a></p>
<p>è¿™é‡Œé€‰æ‹© mathjax ,é€šè¿‡ä¿®æ”¹é…ç½®å³å¯å¯ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm uninstall hexo-renderer-marked --save</span><br><span class="line">sudo npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä½¿ç”¨çš„æ—¶å€™éœ€è¦åœ¨ æ–‡ç« å¼€å¤´åŠ ä¸Šmathjax: true</p>
<h2 id="2-æ·»åŠ APlayeréŸ³ä¹æ’­æ”¾å™¨"><a href="#2-æ·»åŠ APlayeréŸ³ä¹æ’­æ”¾å™¨" class="headerlink" title="2.æ·»åŠ APlayeréŸ³ä¹æ’­æ”¾å™¨"></a>2.æ·»åŠ APlayeréŸ³ä¹æ’­æ”¾å™¨</h2><p>ä¸ºåšå®¢æ·»åŠ éŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½</p>
<p><strong>download</strong><br>ç‚¹å‡»è®¿é—®Aplayeræºç ï¼š<a href="https://github.com/MoePlayer/APlayer" target="_blank" rel="noopener">GitHub Aplayer</a>ã€‚ä¸‹è½½åˆ°æœ¬åœ°ï¼Œè§£å‹åå°†distæ–‡ä»¶å¤¹å¤åˆ¶åˆ°themes\next\sourceæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p><strong>music.js</strong><br>æ–°å»ºthemes\next\source\dist\music.jsæ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const ap = new APlayer(&#123;</span><br><span class="line">    container: document.getElementById(<span class="string">'aplayer'</span>),</span><br><span class="line">    fixed: <span class="literal">true</span>,</span><br><span class="line">    autoplay: <span class="literal">true</span>,</span><br><span class="line">    audio: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">"æš—æ¶Œ"</span>,</span><br><span class="line">        artist: <span class="string">'ç‹è²'</span>,</span><br><span class="line">        url: <span class="string">'http://www.ytmp3.cn/down/52980.mp3'</span>,</span><br><span class="line">        cover: <span class="string">'http://p1.music.126.net/w8RFsMH8VJfPsBmVudYGsA==/109951163020569833.jpg?param=130y130'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">'Wonderful U'</span>,</span><br><span class="line">        artist: <span class="string">'AGA'</span>,</span><br><span class="line">        url: <span class="string">'http://www.ytmp3.cn/down/51181.mp3'</span>,</span><br><span class="line">        cover: <span class="string">'http://p1.music.126.net/Blb_Gi0AJTWIEBLr189F4A==/18791753232142320.jpg?param=130y130'</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">'æµ®å¤¸'</span>,</span><br><span class="line">        artist: <span class="string">'é™ˆå¥•è¿…'</span>,</span><br><span class="line">        url: <span class="string">'http://www.ytmp3.cn/down/49639.mp3'</span>,</span><br><span class="line">        cover: <span class="string">'http://p1.music.126.net/Bl1hEdJbMSj5YJsTqUjr-w==/109951163520311175.jpg?param=130y130'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æºç å‚æ•°è§£é‡Š<a href="https://aplayer.js.org/#/zh-Hans/" target="_blank" rel="noopener">APlayer ä¸­æ–‡æ–‡æ¡£</a></p>
<p>audioå¯¹åº”çš„ä¾¿æ˜¯éŸ³é¢‘æ–‡ä»¶ï¼Œæ‰€ä»¥éŸ³ä¹æ’­æ”¾å™¨éœ€è¦æ’­æ”¾çš„éŸ³ä¹æ˜¯éœ€è¦è‡ªå·±è¿›è¡Œç›¸å…³ä¿¡æ¯ï¼ˆå¦‚æ­Œæ›²é“¾æ¥ã€æ­Œè¯ã€å°é¢ç­‰ï¼‰çš„é…ç½®ã€‚è¿™é‡Œæ”¾ä¸€ä¸ªmp3éŸ³ä¹å¤–é“¾ç½‘ç«™ï¼š<a href="http://up.mcyt.net/" target="_blank" rel="noopener">http://up.mcyt.net/</a> ï¼Œæœç´¢å¯¹åº”çš„éŸ³ä¹ï¼Œç„¶åå¤åˆ¶urlå’Œå³å‡»å°é¢å›¾ç‰‡é“¾æ¥ç²˜è´´åˆ°å¯¹åº”çš„ä½ç½®ä¸Šå°±è¡Œäº†ã€‚</p>
<p><strong>_layout.swig</strong><br>æ‰“å¼€themes\next\layout_layout.swigæ–‡ä»¶,åœ¨<body><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":300,"height":600},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body> é‡Œé¢æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"/dist/APlayer.min.css"</span>&gt;</span><br><span class="line">&lt;div id=<span class="string">"aplayer"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/dist/APlayer.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/dist/music.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°ç”Ÿæˆï¼Œè®¿é—®é¡µé¢ï¼Œå°±èƒ½çœ‹åˆ°å·¦ä¸‹è§’çš„éŸ³ä¹æ’­æ”¾å™¨äº†ã€‚</p>
<h2 id="3-DaoVoiceåœ¨çº¿è”ç³»åŠŸèƒ½"><a href="#3-DaoVoiceåœ¨çº¿è”ç³»åŠŸèƒ½" class="headerlink" title="3.DaoVoiceåœ¨çº¿è”ç³»åŠŸèƒ½"></a>3.DaoVoiceåœ¨çº¿è”ç³»åŠŸèƒ½</h2><p><a href="https://yfzhou.coding.me/2018/08/08/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E9%9B%86%E6%88%90DaoVoice%E5%9C%A8%E7%BA%BF%E8%81%94%E7%B3%BB%E5%8A%9F%E8%83%BD%EF%BC%89/" target="_blank" rel="noopener">https://yfzhou.coding.me/2018/08/08/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E9%9B%86%E6%88%90DaoVoice%E5%9C%A8%E7%BA%BF%E8%81%94%E7%B3%BB%E5%8A%9F%E8%83%BD%EF%BC%89/</a></p>
<h1 id="è‡ªå®šä¹‰æ ·å¼æ”¯æŒ"><a href="#è‡ªå®šä¹‰æ ·å¼æ”¯æŒ" class="headerlink" title="è‡ªå®šä¹‰æ ·å¼æ”¯æŒ"></a>è‡ªå®šä¹‰æ ·å¼æ”¯æŒ</h1><h2 id="1-æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°"><a href="#1-æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°" class="headerlink" title="1.æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°"></a>1.æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°</h2><p>ä¸»é¢˜é…ç½®æ–‡ä»¶å–æ¶ˆæ³¨é‡Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  postBodyEnd: <span class="built_in">source</span>/_data/post-body-end.swig</span><br></pre></td></tr></table></figure>
<p>æ¥ç€æ‰“å¼€\themes\next\layout_macro\post.swigæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">    &#123;% include <span class="string">'passage-end-tag.swig'</span> %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨è·¯å¾„ /source/_data ä¸‹åˆ›å»º/ä¿®æ”¹ post-body-end.swigæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">        &lt;div style=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;-------------æœ¬æ–‡ç»“æŸ&lt;i class=<span class="string">"fa fa-paw"</span>&gt;&lt;/i&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="2-ä¸»é¢˜åŠæ ‡é¢˜æ èƒŒæ™¯å›¾"><a href="#2-ä¸»é¢˜åŠæ ‡é¢˜æ èƒŒæ™¯å›¾" class="headerlink" title="2.ä¸»é¢˜åŠæ ‡é¢˜æ èƒŒæ™¯å›¾"></a>2.ä¸»é¢˜åŠæ ‡é¢˜æ èƒŒæ™¯å›¾</h2><p>é¦–å…ˆä¸»é¢˜é…ç½®æ–‡ä»¶å–æ¶ˆæ³¨é‡Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  style: <span class="built_in">source</span>/_data/styles.styl</span><br></pre></td></tr></table></figure>
<p> åœ¨è·¯å¾„~/hexo_blog/source/_dataåˆ›å»º/ä¿®æ”¹ styles.stylæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// æ·»åŠ èƒŒæ™¯å›¾ç‰‡</span><br><span class="line">body &#123;</span><br><span class="line">      background: url(https://source.unsplash.com/random/1600x900?wallpapers);//è‡ªå·±å–œæ¬¢çš„å›¾ç‰‡åœ°å€</span><br><span class="line">      background-size: cover;</span><br><span class="line">      background-repeat: no-repeat;</span><br><span class="line">      background-attachment: fixed;</span><br><span class="line">      background-position: 50% 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// æ ‡é¢˜æ èƒŒæ™¯</span><br><span class="line">.site-meta &#123;</span><br><span class="line">    padding: 20px 0;</span><br><span class="line">    color: <span class="comment">#fff;</span></span><br><span class="line">    background: <span class="variable">$blue</span>;</span><br><span class="line">    background-repeat: no-repeat;</span><br><span class="line">    background-attachment:fixed;</span><br><span class="line">    background-position:center;</span><br><span class="line">    background-size:cover;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">// ä¿®æ”¹ä¸»ä½“é€æ˜åº¦</span><br><span class="line">.main-inner&#123;</span><br><span class="line">    background: <span class="comment">#fff;</span></span><br><span class="line">    opacity: 0.95;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¿®æ”¹èœå•æ é€æ˜åº¦ï¼Œä¼šå¼•èµ·æœ¬åœ°æœç´¢èœå•bug</span><br><span class="line">//.header-inner &#123;</span><br><span class="line">//    opacity: 0.95;</span><br><span class="line">//&#125;</span><br><span class="line"></span><br><span class="line">// ä¸»é¡µæ–‡ç« æ·»åŠ é˜´å½±æ•ˆæœ</span><br><span class="line">.post &#123;</span><br><span class="line">   margin-top: 60px;</span><br><span class="line">   margin-bottom: 60px;</span><br><span class="line">   padding: 25px;</span><br><span class="line">   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class="line">   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-ä¿®æ”¹ä¸»å‰¯æ ‡é¢˜å­—ä½“é¢œè‰²"><a href="#3-ä¿®æ”¹ä¸»å‰¯æ ‡é¢˜å­—ä½“é¢œè‰²" class="headerlink" title="3.ä¿®æ”¹ä¸»å‰¯æ ‡é¢˜å­—ä½“é¢œè‰²"></a>3.ä¿®æ”¹ä¸»å‰¯æ ‡é¢˜å­—ä½“é¢œè‰²</h2><p>ç»§ç»­åœ¨/source/_data/styles.stylæ–‡ä»¶ä¸­æ·»åŠ ï¼Œå¸®ä½ æŒ‘é€‰é¢œè‰²çš„ç½‘ç«™ï¼š <a href="https://www.color-hex.com/" target="_blank" rel="noopener">color-hex</a></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸»æ ‡é¢˜é¢œè‰²</span></span><br><span class="line">.brand&#123;</span><br><span class="line">    color: $white</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰¯æ ‡é¢˜é¢œè‰²</span></span><br><span class="line">.site-subtitle &#123;</span><br><span class="line">    margin-top: <span class="number">10</span>px;</span><br><span class="line">    font-size: <span class="number">13</span>px;</span><br><span class="line">    color: <span class="meta">#ffffff;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-ä¿®æ”¹æŒ‰é’®ï¼Œé€‰æ‹©åŒºåŸŸï¼Œä»£ç å—ï¼Œè¡¨æ ¼ç­‰æ ·å¼"><a href="#4-ä¿®æ”¹æŒ‰é’®ï¼Œé€‰æ‹©åŒºåŸŸï¼Œä»£ç å—ï¼Œè¡¨æ ¼ç­‰æ ·å¼" class="headerlink" title="4.ä¿®æ”¹æŒ‰é’®ï¼Œé€‰æ‹©åŒºåŸŸï¼Œä»£ç å—ï¼Œè¡¨æ ¼ç­‰æ ·å¼"></a>4.ä¿®æ”¹æŒ‰é’®ï¼Œé€‰æ‹©åŒºåŸŸï¼Œä»£ç å—ï¼Œè¡¨æ ¼ç­‰æ ·å¼</h2><p>é¦–å…ˆä¸»é¢˜é…ç½®æ–‡ä»¶å–æ¶ˆæ³¨é‡Š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">custom_file_path:</span><br><span class="line">  style: source/_data/variables.styl</span><br></pre></td></tr></table></figure>
<p>åœ¨è·¯å¾„ /source/_data ä¸‹åˆ›å»º/ä¿®æ”¹ variables.stylæ–‡ä»¶ï¼ˆç›¸å½“äºä¿®æ”¹ä¸»é¢˜æ–‡ä»¶ next/source/css/_variables/base.stylï¼‰ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Buttons</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line">$btn-<span class="keyword">default</span>-bg                 = white;</span><br><span class="line">$btn-<span class="keyword">default</span>-color              = #<span class="number">49b</span>1f5;</span><br><span class="line">$btn-<span class="keyword">default</span>-font-size          = $font-size-small;</span><br><span class="line">$btn-<span class="keyword">default</span>-border-width       = <span class="number">2</span>px;</span><br><span class="line">$btn-<span class="keyword">default</span>-border-color       = #<span class="number">49b</span>1f5;</span><br><span class="line">$btn-<span class="keyword">default</span>-hover-bg           = #<span class="number">49b</span>1f5;</span><br><span class="line">$btn-<span class="keyword">default</span>-hover-color        = white;</span><br><span class="line">$btn-<span class="keyword">default</span>-hover-border-color = #<span class="number">49b</span>1f5;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Selection</span></span><br><span class="line">$selection-bg                 = #<span class="number">49b</span>1f5;</span><br><span class="line">$selection-color              = white;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Code &amp; Code Blocks</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line">$code-font-family               = $font-family-monospace;</span><br><span class="line">$code-border-radius             = <span class="number">3</span>px;</span><br><span class="line">$code-foreground                = $black-light;</span><br><span class="line">$code-background                = #edf1ff;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Table</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line">$table-width                    = normal;  <span class="comment">//nexté»˜è®¤100%</span></span><br><span class="line">$table-border-color             = $gray-lighter;</span><br><span class="line">$table-font-size                = $font-size-small;</span><br><span class="line">$table-content-alignment        = left;</span><br><span class="line">$table-content-vertical         = middle;</span><br><span class="line">$table-th-font-weight           = <span class="number">700</span>;</span><br><span class="line">$table-cell-padding             = <span class="number">8</span>px;</span><br><span class="line">$table-cell-border-right-color  = $gainsboro;</span><br><span class="line">$table-cell-border-bottom-color = $gray-lighter;</span><br><span class="line">$table-row-odd-bg-color         = #f9f9f9;</span><br><span class="line">$table-row-hover-bg-color       = $whitesmoke;</span><br></pre></td></tr></table></figure>
<h1 id="é€Ÿåº¦ä¼˜åŒ–"><a href="#é€Ÿåº¦ä¼˜åŒ–" class="headerlink" title="é€Ÿåº¦ä¼˜åŒ–"></a>é€Ÿåº¦ä¼˜åŒ–</h1><h2 id="æ‰˜ç®¡-Hexo-åšå®¢åˆ°-Coding"><a href="#æ‰˜ç®¡-Hexo-åšå®¢åˆ°-Coding" class="headerlink" title="æ‰˜ç®¡ Hexo åšå®¢åˆ° Coding"></a>æ‰˜ç®¡ Hexo åšå®¢åˆ° Coding</h2><p>æ³¨æ„ï¼šcodingè´¦å·æ³¨å†Œæ—¶è¯·é€‰æ‹©ä¸ªäººç‰ˆï¼ˆå¦‚æœæ³¨å†Œäº†å›¢é˜Ÿç‰ˆï¼Œä½ ä¼šå‘ç°è·Ÿç½‘ä¸Šç»™çš„æ•™ç¨‹ä¸å¤ªä¸€æ ·ï¼Œè€Œä¸”ï¼Œéƒ¨ç½²å‡ºæ¥çš„ç½‘é¡µåœ°å€æ— æ³•ä¿®æ”¹æˆxxx.coding.meï¼‰ã€‚</p>
<ul>
<li>åˆ›å»ºé¡¹ç›®<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191027145840374.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></li>
<li>é…ç½®SSHå…¬é’¥<br>é¦–å…ˆç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒ-ä¸ªäººè®¾ç½®-SSHå…¬é’¥-æ–°å¢å…¬åŒ™-è¾“å…¥ä½ è‡ªå·±çš„SSHå…¬åŒ™-æ°¸ä¹…æœ‰æ•ˆ(æ¨è)-ç¡®å®šå³å¯ã€‚</li>
<li>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶<br>å¯¹è¯¥é…ç½®è¿›è¡Œä¿®æ”¹å¦‚ä¸‹(æ³¨æ„ç¼©è¿›)ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: </span><br><span class="line">    github: https://github.com/Xiao-Hu-Z/Xiao-Hu-Z.github.io.git</span><br><span class="line">    coding: git@git.dev.tencent.com:Xiao-Hu-Z/Xiao-Hu-Z.coding.me.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>è¯¥é…ç½®æŒ‡å®šäº†Codingä»“åº“çš„åœ°å€ï¼Œå¹¶é€šè¿‡HTTPSæ–¹å¼è¿›è¡Œè¿æ¥ã€‚åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡SSHæ–¹å¼ã€‚<br>å®‰è£…å®Œæˆåï¼Œå¼€å§‹é¡¹ç›®çš„éƒ¨ç½²æ“ä½œï¼Œç”¨çš„æ˜¯HTTPSæ–¹å¼ï¼Œä¼šå¼¹å‡ºè¾“å…¥ç”¨æˆ·åå¯†ç çš„è¾“å…¥æ¡†ï¼Œé”®å…¥ä½ çš„codingç”¨æˆ·åå¯†ç å³å¯ã€‚</p>
<h2 id="gulp-4-0å®ç°é™æ€èµ„æºå‹ç¼©"><a href="#gulp-4-0å®ç°é™æ€èµ„æºå‹ç¼©" class="headerlink" title="gulp 4.0å®ç°é™æ€èµ„æºå‹ç¼©"></a>gulp 4.0å®ç°é™æ€èµ„æºå‹ç¼©</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install gulp</span><br></pre></td></tr></table></figure>
<ul>
<li>å®‰è£…è¿™äº›åŠŸèƒ½æ¨¡å—</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify --save</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºä»»åŠ¡åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ–°å»ºgulpfile.jsæ–‡ä»¶</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">var gulp = require(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line">//Pluginsæ¨¡å—è·å–</span><br><span class="line">var minifycss = require(<span class="string">'gulp-minify-css'</span>);</span><br><span class="line">var uglify = require(<span class="string">'gulp-uglify'</span>);</span><br><span class="line">var htmlmin = require(<span class="string">'gulp-htmlmin'</span>);</span><br><span class="line">var htmlclean = require(<span class="string">'gulp-htmlclean'</span>);</span><br><span class="line">//å‹ç¼©css</span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line"><span class="built_in">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span><br><span class="line">.pipe(minifycss())</span><br><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">//å‹ç¼©html</span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line"><span class="built_in">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span><br><span class="line">.pipe(htmlclean())</span><br><span class="line">.pipe(htmlmin(&#123;</span><br><span class="line">removeComments: <span class="literal">true</span>,</span><br><span class="line">minifyJS: <span class="literal">true</span>,</span><br><span class="line">minifyCSS: <span class="literal">true</span>,</span><br><span class="line">minifyURLs: <span class="literal">true</span>,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>))</span><br><span class="line">&#125;);</span><br><span class="line">//å‹ç¼©js ä¸å‹ç¼©min.js</span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line"><span class="built_in">return</span> gulp.src([<span class="string">'./public/**/*.js'</span>, <span class="string">'!./public/**/*.min.js'</span>])</span><br><span class="line">.pipe(uglify())</span><br><span class="line">.pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//4.0ä»¥å‰çš„å†™æ³•</span><br><span class="line">//gulp.task(<span class="string">'default'</span>, [</span><br><span class="line">  //  <span class="string">'minify-html'</span>, <span class="string">'minify-css'</span>, <span class="string">'minify-js'</span></span><br><span class="line">//]);</span><br><span class="line">//4.0ä»¥åçš„å†™æ³•</span><br><span class="line">// æ‰§è¡Œ gulp å‘½ä»¤æ—¶æ‰§è¡Œçš„ä»»åŠ¡</span><br><span class="line">gulp.task(<span class="string">'default'</span>, gulp.parallel(<span class="string">'minify-html'</span>, <span class="string">'minify-css'</span>, <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  // Do something after a, b, and c are finished.</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_41518277/article/details/101766036#_355" target="_blank" rel="noopener">NexTä¸»é¢˜è¿›é˜¶</a><br><a href="https://blog.csdn.net/colton_null/article/details/97622079" target="_blank" rel="noopener">Hexo Theme NexT ä¸»é¢˜ä¸ªæ€§åŒ–é…ç½®æœ€ä½³å®è·µ</a><br><a href="https://blog.csdn.net/Fitz1318/article/details/86556971" target="_blank" rel="noopener">Hexo+Codingæ­å»ºè‡ªå·±çš„åšå®¢ç½‘ç«™ç³»åˆ—4-åŠ é€ŸHexoåšå®¢</a><br><a href="https://blog.csdn.net/Fitz1318/article/details/86538306" target="_blank" rel="noopener">Hexo+Codingæ­å»ºè‡ªå·±çš„åšå®¢ç½‘ç«™ç³»åˆ—2-éƒ¨ç½²åšå®¢åˆ°Codingä¸Š</a><br><a href="https://hanhanhanxu.github.io/2019/05/15/coding/" target="_blank" rel="noopener">ä½¿ç”¨codingåŠ å¿«åšå®¢ç½‘ç«™è®¿é—®é€Ÿåº¦</a><br><a href="http://ju.outofmemory.cn/entry/105418" target="_blank" rel="noopener">æ‰˜ç®¡ Hexo åšå®¢åˆ° Coding</a><br><a href="https://www.cnblogs.com/aoguai/p/11405829.html" target="_blank" rel="noopener">2019hexoåšå®¢éƒ¨ç½²åˆ°codingè¯¥ç»•çš„å‘</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>VINS-Monoâ€”â€”è§†è§‰å‰æ®µå¤„ç†</title>
    <url>/2019/10/23/VINS-Mono%E2%80%94%E2%80%94%E8%A7%86%E8%A7%89%E5%89%8D%E6%AE%B5%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è®ºæ–‡ï¼š"><a href="#è®ºæ–‡ï¼š" class="headerlink" title="è®ºæ–‡ï¼š"></a>è®ºæ–‡ï¼š</h1><p>æ¯å½“è¿›å…¥æ–°çš„å›¾åƒï¼Œéƒ½ä¼šä½¿ç”¨KLTç¨€ç–å…‰æµæ³•è¿›è¡Œè·Ÿè¸ªï¼ŒåŒæ—¶æå–100-300ä¸ªè§’ç‚¹ä¿¡æ¯ï¼Œæˆ‘çš„ç†è§£æ˜¯è§’ç‚¹æ˜¯ç”¨æ¥å»ºç«‹å›¾åƒï¼Œå…‰æµè·Ÿè¸ªæ˜¯ç”¨æ¥å¿«é€Ÿå®šä½ã€‚åŒæ—¶åœ¨è¿™é‡Œè¿˜è¿›è¡Œäº†å…³é”®å¸§çš„é€‰å–ï¼ˆæ³¨æ„è¿™ä¸€è¿‡ç¨‹åœ¨ä»£ç ä¸­æ˜¯ç”±vins_estimateæ–‡ä»¶ä¸­å®ç°çš„ï¼‰ï¼Œä¸»è¦æ˜¯ä¸¤ä¸ªå‰”é™¤å…³é”®å¸§çš„ç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯å¹³å‡è§†å·®æ³•å’Œè·Ÿè¸ªè´¨é‡æ³•ã€‚å¹³å‡è§†å·®æ³•ï¼šå¦‚æœå½“å‰å¸§çš„å’Œä¸Šä¸€ä¸ªå…³é”®å¸§è·Ÿè¸ªç‚¹çš„å¹³å‡è§†å·®è¶…å‡ºäº†ä¸€ä¸ªè®¾å®šçš„é˜ˆå€¼ï¼Œå°±å°†å½“å‰å¸§è®¾ä¸ºå…³é”®å¸§ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ—‹è½¬å’Œå¹³ç§»éƒ½ä¼šäº§ç”Ÿè§†å·®ï¼ˆä¸åªæ˜¯å¹³ç§»å“¦ï¼‰ï¼Œå½“å‡ºç°çº¯æ—‹è½¬çš„æ—¶å€™ç‰¹å¾ç‚¹æ— æ³•è¢«ä¸‰è§’åŒ–ï¼Œæ— æ³•è®¡ç®—å‡ºæ—‹è½¬å€¼ï¼Œä¹Ÿå°±æ— æ³•è®¡ç®—è·Ÿè¸ªç‚¹é—´çš„å¹³å‡è§†å·®ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œé‡‡ç”¨çŸ­æ—¶çš„é™€èºä»ªè§‚æµ‹å€¼æ¥è¡¥å¿æ—‹è½¬ï¼Œä»è€Œè®¡ç®—å‡ºè§†å·®ï¼Œè¿™ä¸€è¿‡ç¨‹åªåº”ç”¨åˆ°å¹³å‡è§†å·®çš„è®¡ç®—ï¼Œä¸ä¼šå½±å“çœŸå®çš„æ—‹è½¬ç»“æœã€‚</p><a id="more"></a>
<h1 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191023190400778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p>
<h1 id="èŠ‚ç‚¹æ¦‚è§ˆ"><a href="#èŠ‚ç‚¹æ¦‚è§ˆ" class="headerlink" title="èŠ‚ç‚¹æ¦‚è§ˆ"></a>èŠ‚ç‚¹æ¦‚è§ˆ</h1><p>è¯¥èŠ‚ç‚¹çš„åŠŸèƒ½æ˜¯ï¼šæ¥æ”¶å›¾åƒæ•°æ®ï¼Œè¿›è¡Œè§’ç‚¹æå–å’Œå…‰æµè·Ÿè¸ªï¼Œè¾“å‡ºè·Ÿè¸ªçš„ç‰¹å¾ç‚¹ï¼ˆè§’ç‚¹ï¼‰ã€‚feature_tracker_nodeçš„æ¶ˆæ¯è®¢é˜…å‘å¸ƒå¦‚ä¸‹è¡¨ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191023221410832.png"></p>
<h1 id="ä»£ç ç»†èŠ‚"><a href="#ä»£ç ç»†èŠ‚" class="headerlink" title="ä»£ç ç»†èŠ‚"></a>ä»£ç ç»†èŠ‚</h1><p>ä¸»è¦è´Ÿè´£å›¾åƒè§’ç‚¹æå–å’Œå…‰æµè·Ÿè¸ªï¼Œä¸»è¦æ˜¯ä¸‰ä¸ªæºç¨‹åºï¼Œåˆ†åˆ«æ˜¯feature_trackerã€feature_tracker_nodeä»¥åŠparametersã€‚feature_tracker_nodeæ˜¯ç‰¹å¾è·Ÿè¸ªçº¿ç¨‹çš„ç³»ç»Ÿå…¥å£ï¼Œfeature_trackeræ˜¯ç‰¹å¾è·Ÿè¸ªç®—æ³•çš„å…·ä½“å®ç°ï¼Œparametersæ˜¯è®¾å¤‡ç­‰å‚æ•°çš„è¯»å–å’Œå­˜æ”¾ã€‚</p>
<h2 id="ç¨‹åºå…¥å£main-å‡½æ•°"><a href="#ç¨‹åºå…¥å£main-å‡½æ•°" class="headerlink" title="ç¨‹åºå…¥å£main()å‡½æ•°"></a>ç¨‹åºå…¥å£main()å‡½æ•°</h2><ul>
<li>1ã€rosåˆå§‹åŒ–å’Œè®¾ç½®å¥æŸ„ï¼Œè®¾ç½®loggerçº§åˆ«</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">ros::init(argc, argv, <span class="string">"feature_tracker"</span>);</span><br><span class="line">ros::<span class="function">NodeHandle <span class="title">n</span><span class="params">(<span class="string">"~"</span>)</span></span>;</span><br><span class="line">ros::console::set_logger_level(ROSCONSOLE_DEFAULT_NAME, ros::console::levels::Info);</span><br></pre></td></tr></table></figure>
<ul>
<li>2ã€readParameters(n);è¯»å–å‚æ•°ï¼Œå¦‚config-&gt;euroc-&gt;euroc_config.yamlä¸­çš„ä¸€äº›é…ç½®å‚æ•°</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">readParameters(n);</span><br></pre></td></tr></table></figure>
<ul>
<li>3ã€è¯»å–æ¯ä¸ªç›¸æœºå®ä¾‹è¯»å–å¯¹åº”çš„ç›¸æœºå†…å‚ï¼ŒNUM_OF_CAM=1ä¸ºå•ç›®</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_OF_CAM; i++) </span><br><span class="line">       trackerData[i].readIntrinsicParameter(CAM_NAMES[i]);</span><br></pre></td></tr></table></figure>
<p>èŠ‚ç‚¹åœ¨å¯åŠ¨æ—¶ä¼šå…ˆè¯»å–ç›¸æœºå†…å‚ï¼Œæ ¹æ®config_fileæ–‡ä»¶ä¸­model_typeçš„å€¼å†³å®šé‡‡ç”¨ä½•ç§ç›¸æœºæ¨¡å‹ï¼Œå¹¶åˆ›å»ºç›¸åº”æ¨¡å‹çš„å¯¹è±¡æŒ‡é’ˆï¼Œè¯»å–åœ¨è¯¥æ¨¡å‹ä¸‹éœ€è¦çš„å‚æ•°<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> FeatureTracker::readIntrinsicParameter(<span class="keyword">const</span> <span class="built_in">string</span> &amp;calib_file)</span><br><span class="line">&#123;</span><br><span class="line">    ROS_INFO(<span class="string">"reading paramerter of camera %s"</span>, calib_file.c_str());</span><br><span class="line">    m_camera = CameraFactory::instance()-&gt;generateCameraFromYamlFile(calib_file);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">CameraPtr</span><br><span class="line">CameraFactory::generateCameraFromYamlFile(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; filename)</span><br><span class="line">&#123;</span><br><span class="line">    cv::<span class="function">FileStorage <span class="title">fs</span><span class="params">(filename, cv::FileStorage::READ)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!fs.isOpened())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> CameraPtr();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Camera::ModelType modelType = Camera::MEI;</span><br><span class="line">    <span class="keyword">if</span> (!fs[<span class="string">"model_type"</span>].isNone())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> sModelType;</span><br><span class="line">        fs[<span class="string">"model_type"</span>] &gt;&gt; sModelType;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¡ç‰¹é±¼çœ¼ç›¸æœº</span></span><br><span class="line">        <span class="keyword">if</span> (boost::iequals(sModelType, <span class="string">"kannala_brandt"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            modelType = Camera::KANNALA_BRANDT;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (boost::iequals(sModelType, <span class="string">"mei"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            modelType = Camera::MEI;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (boost::iequals(sModelType, <span class="string">"scaramuzza"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            modelType = Camera::SCARAMUZZA;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (boost::iequals(sModelType, <span class="string">"pinhole"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            modelType = Camera::PINHOLE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"# ERROR: Unknown camera model: "</span> &lt;&lt; sModelType &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> CameraPtr();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (modelType)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> Camera::KANNALA_BRANDT:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">EquidistantCameraPtr <span class="title">camera</span><span class="params">(<span class="keyword">new</span> EquidistantCamera)</span></span>;</span><br><span class="line"></span><br><span class="line">        EquidistantCamera::Parameters params = camera-&gt;getParameters();</span><br><span class="line">        params.readFromYamlFile(filename);</span><br><span class="line">        camera-&gt;setParameters(params);</span><br><span class="line">        <span class="keyword">return</span> camera;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> Camera::PINHOLE:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">PinholeCameraPtr <span class="title">camera</span><span class="params">(<span class="keyword">new</span> PinholeCamera)</span></span>;</span><br><span class="line"></span><br><span class="line">        PinholeCamera::Parameters params = camera-&gt;getParameters();</span><br><span class="line">        params.readFromYamlFile(filename);</span><br><span class="line">        camera-&gt;setParameters(params);</span><br><span class="line">        <span class="keyword">return</span> camera;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> Camera::SCARAMUZZA:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">OCAMCameraPtr <span class="title">camera</span><span class="params">(<span class="keyword">new</span> OCAMCamera)</span></span>;</span><br><span class="line"></span><br><span class="line">        OCAMCamera::Parameters params = camera-&gt;getParameters();</span><br><span class="line">        params.readFromYamlFile(filename);</span><br><span class="line">        camera-&gt;setParameters(params);</span><br><span class="line">        <span class="keyword">return</span> camera;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> Camera::MEI:</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">CataCameraPtr <span class="title">camera</span><span class="params">(<span class="keyword">new</span> CataCamera)</span></span>;</span><br><span class="line"></span><br><span class="line">        CataCamera::Parameters params = camera-&gt;getParameters();</span><br><span class="line">        params.readFromYamlFile(filename);</span><br><span class="line">        camera-&gt;setParameters(params);</span><br><span class="line">        <span class="keyword">return</span> camera;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> CameraPtr();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>4ã€åˆ¤æ–­æ˜¯å¦åŠ å…¥é±¼çœ¼maskæ¥å»é™¤è¾¹ç¼˜å™ªå£°</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(FISHEYE)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_OF_CAM; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//FISHEYE_MASK  fisheye_mask.jpg è·¯å¾„</span></span><br><span class="line">        trackerData[i].fisheye_mask = cv::imread(FISHEYE_MASK, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(!trackerData[i].fisheye_mask.data)</span><br><span class="line">        &#123;</span><br><span class="line">            ROS_INFO(<span class="string">"load mask fail"</span>);</span><br><span class="line">            ROS_BREAK();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ROS_INFO(<span class="string">"load mask success"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>5ã€è®¢é˜…è¯é¢˜IMAGE_TOPIC(å¦‚/cam0/image_raw)ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°img_callbackï¼Œå¯¹æ–°æ¥çš„å›¾åƒè¿›è¡Œç‰¹å¾ç‚¹è¿½è¸ªã€å¤„ç†å’Œå‘å¸ƒ<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">ros::Subscriber sub_img = n.subscribe(IMAGE_TOPIC, <span class="number">100</span>, img_callback);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å•ç›®æ—¶ï¼šFeatureTracker::readImage() å‡½æ•°è¯»å–å›¾åƒæ•°æ®è¿›è¡Œå¤„ç†<br>å•ç›®i=0<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">trackerData[i].readImage(ptr-&gt;image.rowRange(ROW * i, ROW * (i + <span class="number">1</span>)), img_msg-&gt;header.stamp.toSec());</span><br></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> FeatureTracker::readImage(<span class="keyword">const</span> cv::Mat &amp;_img, <span class="keyword">double</span> _cur_time)</span><br><span class="line">&#123;</span><br><span class="line">    cv::Mat img;</span><br><span class="line">    TicToc t_r;</span><br><span class="line">    cur_time = _cur_time;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (EQUALIZE)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Contrast Limited AHE(Adaptive histogram equalization)</span></span><br><span class="line">        cv::Ptr&lt;cv::CLAHE&gt; clahe = cv::createCLAHE(<span class="number">3.0</span>, cv::Size(<span class="number">8</span>, <span class="number">8</span>));</span><br><span class="line">        TicToc t_c;</span><br><span class="line">        clahe-&gt;apply(_img, img);</span><br><span class="line">        ROS_DEBUG(<span class="string">"CLAHE costs: %fms"</span>, t_c.toc());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        img = _img;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (forw_img.empty())</span><br><span class="line">        prev_img = cur_img = forw_img = img;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        forw_img = img;</span><br><span class="line"></span><br><span class="line">    forw_pts.clear();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cur_pts.size() &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        TicToc t_o;</span><br><span class="line">        <span class="built_in">vector</span>&lt;uchar&gt; status;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">float</span>&gt; err;</span><br><span class="line">        cv::calcOpticalFlowPyrLK(cur_img, forw_img, cur_pts, forw_pts, status, err, cv::Size(<span class="number">21</span>, <span class="number">21</span>), <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">int</span>(forw_pts.size()); i++)</span><br><span class="line">            <span class="keyword">if</span> (status[i] &amp;&amp; !inBorder(forw_pts[i]))</span><br><span class="line">                status[i] = <span class="number">0</span>;</span><br><span class="line">        reduceVector(prev_pts, status);</span><br><span class="line">        reduceVector(cur_pts, status);</span><br><span class="line">        reduceVector(forw_pts, status);</span><br><span class="line">        reduceVector(ids, status);</span><br><span class="line">        reduceVector(cur_un_pts, status);</span><br><span class="line">        reduceVector(track_cnt, status);</span><br><span class="line">        ROS_DEBUG(<span class="string">"temporal optical flow costs: %fms"</span>, t_o.toc());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;n : track_cnt)</span><br><span class="line">        n++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (PUB_THIS_FRAME)</span><br><span class="line">    &#123;</span><br><span class="line">        rejectWithF();</span><br><span class="line">        ROS_DEBUG(<span class="string">"set mask begins"</span>);</span><br><span class="line">        TicToc t_m;</span><br><span class="line">        setMask();</span><br><span class="line">        ROS_DEBUG(<span class="string">"set mask costs %fms"</span>, t_m.toc());</span><br><span class="line"></span><br><span class="line">        ROS_DEBUG(<span class="string">"detect feature begins"</span>);</span><br><span class="line">        TicToc <span class="keyword">t_t</span>;</span><br><span class="line">        <span class="keyword">int</span> n_max_cnt = MAX_CNT - <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(forw_pts.size());</span><br><span class="line">        <span class="keyword">if</span> (n_max_cnt &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(mask.empty())</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"mask is empty "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">if</span> (mask.type() != CV_8UC1)</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"mask type wrong "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">if</span> (mask.size() != forw_img.size())</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; <span class="string">"wrong size "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">            cv::goodFeaturesToTrack(forw_img, n_pts, n_max_cnt, <span class="number">0.01</span>, MIN_DIST, mask);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            n_pts.clear();</span><br><span class="line">        ROS_DEBUG(<span class="string">"detect feature costs: %fms"</span>, <span class="keyword">t_t</span>.toc());</span><br><span class="line"></span><br><span class="line">        ROS_DEBUG(<span class="string">"add feature begins"</span>);</span><br><span class="line">        TicToc t_a;</span><br><span class="line">        addPoints();</span><br><span class="line">        ROS_DEBUG(<span class="string">"selectFeature costs: %fms"</span>, t_a.toc());</span><br><span class="line">    &#125;</span><br><span class="line">    prev_img = cur_img;</span><br><span class="line">    prev_pts = cur_pts;</span><br><span class="line">    prev_un_pts = cur_un_pts;</span><br><span class="line">    cur_img = forw_img;</span><br><span class="line">    cur_pts = forw_pts;</span><br><span class="line">    undistortedPoints();</span><br><span class="line">    prev_time = cur_time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>6ã€å‘å¸ƒfeatureï¼Œå®ä¾‹feature_pointsï¼Œè·Ÿè¸ªçš„ç‰¹å¾ç‚¹ï¼Œç»™åç«¯ä¼˜åŒ–ç”¨<br>å‘å¸ƒfeature_imgï¼Œå®ä¾‹ptrï¼Œè·Ÿè¸ªçš„ç‰¹å¾ç‚¹å›¾ï¼Œç»™RVIZç”¨å’Œè°ƒè¯•ç”¨<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">pub_img = n.advertise&lt;sensor_msgs::PointCloud&gt;(<span class="string">"feature"</span>, <span class="number">1000</span>);</span><br><span class="line">pub_match = n.advertise&lt;sensor_msgs::Image&gt;(<span class="string">"feature_img"</span>,<span class="number">1000</span>);</span><br><span class="line">pub_restart = n.advertise&lt;std_msgs::Bool&gt;(<span class="string">"restart"</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å›è°ƒå‡½æ•°img-callback"><a href="#å›è°ƒå‡½æ•°img-callback" class="headerlink" title="å›è°ƒå‡½æ•°img_callback()"></a>å›è°ƒå‡½æ•°img_callback()</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">img_callback</span><span class="params">(<span class="keyword">const</span> sensor_msgs::ImageConstPtr &amp;img_msg)</span></span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ˜¯ROSçš„å›è°ƒå‡½æ•°ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šreadImage()å‡½æ•°å¯¹æ–°æ¥çš„å›¾åƒä½¿ç”¨å…‰æµæ³•è¿›è¡Œç‰¹å¾ç‚¹è·Ÿè¸ªï¼Œå¹¶å°†è¿½è¸ªçš„ç‰¹å¾ç‚¹å°è£…æˆfeature_pointså‘å¸ƒåˆ°pub_imgçš„è¯é¢˜ä¸‹ï¼Œå°†å›¾åƒå°è£…æˆptrå‘å¸ƒåœ¨pub_matchä¸‹ã€‚</p>
<ul>
<li>1ã€åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€å¸§</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç¬¬ä¸€å¸§</span></span><br><span class="line"><span class="keyword">if</span>(first_image_flag)</span><br><span class="line">&#123;</span><br><span class="line">    first_image_flag = <span class="literal">false</span>;</span><br><span class="line">    first_image_time = img_msg-&gt;header.stamp.toSec();</span><br><span class="line">    last_image_time  = img_msg-&gt;header.stamp.toSec();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>2ã€åˆ¤æ–­æ—¶é—´é—´éš”æ˜¯å¦æ­£ç¡®ï¼Œæœ‰é—®é¢˜åˆ™restart</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (img_msg-&gt;header.stamp.toSec() - last_image_time &gt; <span class="number">1.0</span> || img_msg-&gt;header.stamp.toSec() &lt; last_image_time)</span><br><span class="line">&#123;</span><br><span class="line">    ROS_WARN(<span class="string">"image discontinue! reset the feature tracker!"</span>);</span><br><span class="line">    first_image_flag = <span class="literal">true</span>; </span><br><span class="line">    last_image_time = <span class="number">0</span>;</span><br><span class="line">    pub_count = <span class="number">1</span>;</span><br><span class="line">    std_msgs::Bool restart_flag;</span><br><span class="line">    restart_flag.data = <span class="literal">true</span>;</span><br><span class="line">    pub_restart.publish(restart_flag);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>3ã€å‘å¸ƒé¢‘ç‡æ§åˆ¶ï¼Œå¹¶ä¸æ˜¯æ¯è¯»å…¥ä¸€å¸§å›¾åƒï¼Œå°±è¦å‘å¸ƒç‰¹å¾ç‚¹ï¼Œé€šè¿‡åˆ¤æ–­é—´éš”æ—¶é—´å†…çš„å‘å¸ƒæ¬¡æ•°</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">double</span> tmp_freq = <span class="number">1.0</span> * pub_count / (img_msg-&gt;header.stamp.toSec() - first_image_time);</span><br><span class="line"> <span class="keyword">if</span> (round(tmp_freq) &lt;= FREQ)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">//PUB_THIS_FRAME æ˜¯å¦éœ€è¦å‘å¸ƒç‰¹å¾ç‚¹</span></span><br><span class="line">     PUB_THIS_FRAME = <span class="literal">true</span>;</span><br><span class="line">     <span class="comment">// // æ—¶é—´é—´éš”å†…çš„å‘å¸ƒé¢‘ç‡ååˆ†æ¥è¿‘è®¾å®šé¢‘ç‡æ—¶ï¼Œæ›´æ–°æ—¶é—´é—´éš”èµ·å§‹æ—¶åˆ»ï¼Œå¹¶å°†æ•°æ®å‘å¸ƒæ¬¡æ•°ç½®0</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">abs</span>(tmp_freq - FREQ) &lt; <span class="number">0.01</span> * FREQ)</span><br><span class="line">     &#123;</span><br><span class="line">         first_image_time = img_msg-&gt;header.stamp.toSec();</span><br><span class="line">         pub_count = <span class="number">0</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">     PUB_THIS_FRAME = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>4ã€å°†å›¾åƒç¼–ç 8UC1è½¬æ¢ä¸ºmono8</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv_bridge::CvImageConstPtr ptr;</span><br><span class="line"><span class="keyword">if</span> (img_msg-&gt;encoding == <span class="string">"8UC1"</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å°†å›¾åƒç¼–ç 8UC1è½¬æ¢ä¸ºmono8</span></span><br><span class="line">    sensor_msgs::Image img;</span><br><span class="line">    img.header = img_msg-&gt;header;</span><br><span class="line">    img.height = img_msg-&gt;height;</span><br><span class="line">    img.width = img_msg-&gt;width;</span><br><span class="line">    img.is_bigendian = img_msg-&gt;is_bigendian;</span><br><span class="line">    img.step = img_msg-&gt;step;</span><br><span class="line">    img.data = img_msg-&gt;data;</span><br><span class="line">    img.encoding = <span class="string">"mono8"</span>;</span><br><span class="line">    ptr = cv_bridge::toCvCopy(img, sensor_msgs::image_encodings::MONO8);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    ptr = cv_bridge::toCvCopy(img_msg, sensor_msgs::image_encodings::MONO8);</span><br></pre></td></tr></table></figure>
<ul>
<li>5ã€å•ç›®æ—¶ï¼šFeatureTracker::readImage() å‡½æ•°è¯»å–å›¾åƒæ•°æ®è¿›è¡Œå¤„ç†</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_OF_CAM; i++)</span><br><span class="line">&#123;</span><br><span class="line">    ROS_DEBUG(<span class="string">"processing camera %d"</span>, i);</span><br><span class="line">    <span class="comment">//åŒç›®è·Ÿè¸ªåˆ™ä¸º1,å•ç›®false</span></span><br><span class="line">    <span class="keyword">if</span> (i != <span class="number">1</span> || !STEREO_TRACK) <span class="comment">// é’ˆå¯¹å•ç›®ç›¸æœºè¯»å…¥å›¾åƒï¼Œè¿›å…¥KLTè·Ÿè¸ªé˜¶æ®µ</span></span><br><span class="line">        <span class="comment">//ROW = fsSettings["image_height"]  rowRangeå’ŒcolRangeå‡½æ•°å¯ä»¥è·å–æŸäº›èŒƒå›´å†…è¡Œæˆ–åˆ—çš„æŒ‡é’ˆ</span></span><br><span class="line">        trackerData[i].readImage(ptr-&gt;image.rowRange(ROW * i, ROW * (i + <span class="number">1</span>)), img_msg-&gt;header.stamp.toSec());</span><br></pre></td></tr></table></figure>
<ul>
<li>6ã€æ›´æ–°ç‰¹å¾ç‚¹ID</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>;; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> completed = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; NUM_OF_CAM; j++)</span><br><span class="line">            <span class="keyword">if</span> (j != <span class="number">1</span> || !STEREO_TRACK)</span><br><span class="line">                <span class="comment">////æ›´æ–°ç‰¹å¾ç‚¹id</span></span><br><span class="line">                completed |= trackerData[j].updateID(i);</span><br><span class="line">        <span class="keyword">if</span> (!completed)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//åˆå§‹FeatureTracker::n_id = 0;idåˆå§‹åŒ–-1</span></span><br><span class="line"><span class="keyword">bool</span> FeatureTracker::updateID(<span class="keyword">unsigned</span> <span class="keyword">int</span> i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; ids.size()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ids[i] == <span class="number">-1</span>)</span><br><span class="line">            ids[i] = n_id++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>7ã€å¦‚æœPUB_THIS_FRAME=1åˆ™è¿›è¡Œå‘å¸ƒ<blockquote>
<ul>
<li>å°†ç‰¹å¾ç‚¹idï¼ŒçŸ«æ­£åå½’ä¸€åŒ–å¹³é¢çš„3Dç‚¹(x,y,z=1)ï¼Œåƒç´ 2Dç‚¹(u,v)ï¼Œåƒç´ çš„é€Ÿåº¦(vx,vy)ï¼Œå°è£…æˆsensor_msgs::PointCloudPtrç±»å‹çš„feature_pointså®ä¾‹ä¸­,å‘å¸ƒåˆ°pub_img;</li>
<li>å°†å›¾åƒå°è£…åˆ°cv_bridge::cvtColorç±»å‹çš„ptrå®ä¾‹ä¸­å‘å¸ƒåˆ°pub_match</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="å›¾åƒç‰¹å¾è·Ÿè¸ªFeatureTracker-readImage"><a href="#å›¾åƒç‰¹å¾è·Ÿè¸ªFeatureTracker-readImage" class="headerlink" title="å›¾åƒç‰¹å¾è·Ÿè¸ªFeatureTracker::readImage()"></a>å›¾åƒç‰¹å¾è·Ÿè¸ªFeatureTracker::readImage()</h2><ul>
<li>1ã€é€šè¿‡EQUALIZEå€¼åˆ¤æ–­æ˜¯å¦è¿›è¡Œè‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œå¦‚æœEQUALIZE=1ï¼ˆè¡¨ç¤ºå¤ªäº®æˆ–åˆ™å¤ªæš—)ï¼Œè°ƒç”¨cv::CLAHEå¯¹å›¾åƒåšç›´æ–¹å›¾å‡è¡¡åŒ–</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœEQUALIZE=1ï¼Œè¡¨ç¤ºå¤ªäº®æˆ–åˆ™å¤ªæš—</span></span><br><span class="line"><span class="keyword">if</span> (EQUALIZE)<span class="comment">//åˆ¤æ–­æ˜¯å¦è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–å¤„ç†</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Contrast Limited AHE(Adaptive histogram equalization)</span></span><br><span class="line">    cv::Ptr&lt;cv::CLAHE&gt; clahe = cv::createCLAHE(<span class="number">3.0</span>, cv::Size(<span class="number">8</span>, <span class="number">8</span>));</span><br><span class="line">    TicToc t_c;</span><br><span class="line">    clahe-&gt;apply(_img, img);</span><br><span class="line">    ROS_DEBUG(<span class="string">"CLAHE costs: %fms"</span>, t_c.toc());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    img = _img;</span><br></pre></td></tr></table></figure>
<ul>
<li>2ã€ åŒºåˆ†æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡è¯»å–</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (forw_img.empty())</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰å¸§çš„å›¾åƒæ•°æ®forw_imgä¸ºç©ºï¼Œè¯´æ˜å½“å‰æ˜¯ç¬¬ä¸€æ¬¡è¯»å…¥å›¾åƒæ•°æ®</span></span><br><span class="line">    <span class="comment">//å°†è¯»å…¥çš„å›¾åƒèµ‹ç»™å‰å¸§forw_img</span></span><br><span class="line">    <span class="comment">//åŒæ—¶ï¼Œè¿˜å°†è¯»å…¥çš„å›¾åƒèµ‹ç»™prev_imgã€cur_imgï¼Œè¿™æ˜¯ä¸ºäº†é¿å…åé¢ä½¿ç”¨åˆ°è¿™äº›æ•°æ®æ—¶ï¼Œå®ƒä»¬æ˜¯ç©ºçš„</span></span><br><span class="line">    prev_img = cur_img = forw_img = img;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment">//å¦åˆ™ï¼Œè¯´æ˜ä¹‹å‰å°±å·²ç»æœ‰å›¾åƒè¯»å…¥</span></span><br><span class="line">    <span class="comment">//æ‰€ä»¥åªéœ€è¦æ›´æ–°å‰å¸§forw_imgçš„æ•°æ®</span></span><br><span class="line">    forw_img = img;</span><br></pre></td></tr></table></figure>
<ul>
<li>3ã€calcOpticalFlowPyrLK() ä»cur_ptsåˆ°forw_ptsåšLKé‡‘å­—å¡”å…‰æµæ³•</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨cv::calcOpticalFlowPyrLK()å¯¹å‰ä¸€å¸§çš„ç‰¹å¾ç‚¹cur_ptsè¿›è¡ŒLKé‡‘å­—å¡”å…‰æµè·Ÿè¸ªï¼Œå¾—åˆ°forw_pts</span></span><br><span class="line"><span class="comment">//statusæ ‡è®°äº†ä»å‰ä¸€å¸§cur_imgåˆ°forw_imgç‰¹å¾ç‚¹çš„è·Ÿè¸ªçŠ¶æ€ï¼Œæ— æ³•è¢«è¿½è¸ªåˆ°çš„ç‚¹æ ‡è®°ä¸º0</span></span><br><span class="line">cv::calcOpticalFlowPyrLK(cur_img, forw_img, cur_pts, forw_pts, status, err, cv::Size(<span class="number">21</span>, <span class="number">21</span>), <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>4ã€æ ¹æ®statusï¼ŒæŠŠè·Ÿè¸ªå¤±è´¥çš„å’Œä½äºå›¾åƒè¾¹ç•Œå¤–çš„ç‚¹å‰”é™¤ï¼Œå‰”é™¤æ—¶ä¸ä»…è¦ä»å½“å‰å¸§æ•°æ®forw_ptsä¸­å‰”é™¤ï¼Œè€Œä¸”è¿˜è¦ä»cur_un_ptsã€prev_ptsã€cur_ptsï¼Œè®°å½•ç‰¹å¾ç‚¹idçš„idsï¼Œå’Œè®°å½•ç‰¹å¾ç‚¹è¢«è·Ÿè¸ªæ¬¡æ•°çš„track_cntä¸­å‰”é™¤ï¼›</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">   <span class="comment">//å°†ä½äºå›¾åƒè¾¹ç•Œå¤–çš„ç‚¹æ ‡è®°ä¸º0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">int</span>(forw_pts.size()); i++)</span><br><span class="line">        <span class="keyword">if</span> (status[i] &amp;&amp; !inBorder(forw_pts[i]))</span><br><span class="line">            status[i] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®status,æŠŠè·Ÿè¸ªå¤±è´¥çš„ç‚¹å‰”é™¤</span></span><br><span class="line">    <span class="comment">//ä¸ä»…è¦ä»å‰å¸§æ•°æ®forw_ptsä¸­å‰”é™¤ï¼Œè€Œä¸”è¿˜è¦ä»cur_un_ptsã€prev_ptså’Œcur_ptsä¸­å‰”é™¤</span></span><br><span class="line">    <span class="comment">//prev_ptså’Œcur_ptsä¸­çš„ç‰¹å¾ç‚¹æ˜¯ä¸€ä¸€å¯¹åº”çš„</span></span><br><span class="line">    <span class="comment">//è®°å½•ç‰¹å¾ç‚¹idçš„idsï¼Œå’Œè®°å½•ç‰¹å¾ç‚¹è¢«è·Ÿè¸ªæ¬¡æ•°çš„track_cntä¹Ÿè¦å‰”é™¤</span></span><br><span class="line">    reduceVector(prev_pts, status);</span><br><span class="line">    reduceVector(cur_pts, status);</span><br><span class="line">    reduceVector(forw_pts, status);</span><br><span class="line">    reduceVector(ids, status);</span><br><span class="line">    reduceVector(cur_un_pts, status);</span><br><span class="line">    reduceVector(track_cnt, status);</span><br><span class="line">    ROS_DEBUG(<span class="string">"temporal optical flow costs: %fms"</span>, t_o.toc());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>5ã€æ ¹æ®PUB_THIS_FRAMEæ˜¯å¦å‘å¸ƒç‰¹å¾ï¼Œ<ul>
<li>å¦‚æœä¸éœ€è¦å‘å¸ƒç‰¹å¾ç‚¹,åˆ™åˆ°è¿™æ­¥å°±å®Œäº†,æŠŠå½“å‰å¸§forwèµ‹ç»™ä¸Šä¸€å¸§cur, ç„¶åé€€å‡º </li>
<li>å¦‚æœå‘å¸ƒç‰¹å¾ï¼š<blockquote>
<p>1ã€å…ˆè°ƒç”¨rejectWithF()å¯¹prev_ptså’Œforw_ptsåšransacå‰”é™¤outlier.(å®é™…å°±æ˜¯è°ƒç”¨äº†findFundamentalMatå‡½æ•°), åœ¨å…‰æµè¿½è¸ªæˆåŠŸå°±è®°è¢«è¿½è¸ª+1ï¼Œæ•°å€¼ä»£è¡¨è¢«è¿½è¸ªçš„æ¬¡æ•°ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¯´æ˜è¢«è¿½è¸ªçš„å°±è¶Šä¹…<br>2ã€è°ƒç”¨setMask(), å…ˆå¯¹è·Ÿè¸ªç‚¹forw_ptsæŒ‰è·Ÿè¸ªæ¬¡æ•°é™æ’åº, ç„¶åä¾æ¬¡é€‰ç‚¹, é€‰ä¸€ä¸ªç‚¹, åœ¨maskä¸­å°†è¯¥ç‚¹å‘¨å›´ä¸€å®šåŠå¾„çš„åŒºåŸŸè®¾ä¸º0, åé¢ä¸å†é€‰å–è¯¥åŒºåŸŸå†…çš„ç‚¹. æœ‰ç‚¹ç±»ä¼¼ä¸non-max suppression, ä½†åŒºåˆ«æ˜¯è¿™é‡Œä¿ç•™track_cntæœ€é«˜çš„ç‚¹<br>3ã€åœ¨maskä¸­ä¸ä¸º0çš„åŒºåŸŸ,è°ƒç”¨goodFeaturesToTrack() å¯»æ‰¾æ–°çš„ç‰¹å¾ç‚¹(shi-tomasiè§’ç‚¹)ï¼Œæ·»åŠ (MAX_CNT - forw_pts.size())ä¸ªç‚¹ä»¥ç¡®ä¿æ¯å¸§éƒ½æœ‰è¶³å¤Ÿçš„ç‰¹å¾ç‚¹<br>4ã€é€šè¿‡addPoints()å‡½æ•°pushåˆ°forw_ptsä¸­, idåˆå§‹åŒ–-1,track_cntåˆå§‹åŒ–ä¸º1.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (PUB_THIS_FRAME)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ä¸»è¦æ˜¯é€šè¿‡åŸºæœ¬çŸ©é˜µï¼ˆFï¼‰å»é™¤å¤–ç‚¹outliers</span></span><br><span class="line">    rejectWithF();</span><br><span class="line">    ROS_DEBUG(<span class="string">"set mask begins"</span>);</span><br><span class="line">    TicToc t_m;</span><br><span class="line">    <span class="comment">//å¯¹è·Ÿè¸ªç‚¹è¿›è¡Œæ’åºå¹¶å»é™¤å¯†é›†ç‚¹ã€‚</span></span><br><span class="line">    setMask();</span><br><span class="line">    ROS_DEBUG(<span class="string">"set mask costs %fms"</span>, t_m.toc());</span><br><span class="line"></span><br><span class="line">    ROS_DEBUG(<span class="string">"detect feature begins"</span>);</span><br><span class="line">    TicToc <span class="keyword">t_t</span>;</span><br><span class="line">    <span class="comment">//è®¡ç®—æ˜¯å¦éœ€è¦æå–æ–°çš„ç‰¹å¾ç‚¹,MAX_CNT:ç‰¹å¾ç‚¹æœ€å¤§ä¸ªæ•°150</span></span><br><span class="line">    <span class="keyword">int</span> n_max_cnt = MAX_CNT - <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(forw_pts.size());</span><br><span class="line">    <span class="keyword">if</span> (n_max_cnt &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(mask.empty())</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"mask is empty "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (mask.type() != CV_8UC1)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"mask type wrong "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (mask.size() != forw_img.size())</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"wrong size "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//MIN_DIST:ç‰¹å¾ç‚¹ä¹‹é—´çš„æœ€å°é—´éš”30</span></span><br><span class="line">        <span class="comment">//å¯»æ‰¾æ–°çš„ç‰¹å¾ç‚¹(shi-tomasiè§’ç‚¹),æ·»åŠ (MAX_CNT - forw_pts.size())ä¸ªç‚¹ä»¥ç¡®ä¿æ¯å¸§éƒ½æœ‰è¶³å¤Ÿçš„ç‰¹å¾ç‚¹</span></span><br><span class="line">        cv::goodFeaturesToTrack(forw_img, n_pts, n_max_cnt, <span class="number">0.01</span>, MIN_DIST, mask);</span><br><span class="line">    &#125;</span><br><span class="line">                  </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        n_pts.clear();</span><br><span class="line">    ROS_DEBUG(<span class="string">"detect feature costs: %fms"</span>, <span class="keyword">t_t</span>.toc());</span><br><span class="line"></span><br><span class="line">    ROS_DEBUG(<span class="string">"add feature begins"</span>);</span><br><span class="line">    TicToc t_a;</span><br><span class="line">    <span class="comment">//æ·»å°†æ–°æ£€æµ‹åˆ°çš„ç‰¹å¾ç‚¹n_ptsæ·»åŠ åˆ°forw_ptsä¸­ï¼Œidåˆå§‹åŒ–-1,track_cntåˆå§‹åŒ–ä¸º1.</span></span><br><span class="line">    addPoints();</span><br><span class="line">    ROS_DEBUG(<span class="string">"selectFeature costs: %fms"</span>, t_a.toc());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>6ã€undistortedPoints() å¯¹ç‰¹å¾ç‚¹çš„å›¾åƒåæ ‡æ ¹æ®ä¸åŒçš„ç›¸æœºæ¨¡å‹è¿›è¡Œå»ç•¸å˜çŸ«æ­£å’Œæ·±åº¦å½’ä¸€åŒ–ï¼Œè®¡ç®—æ¯ä¸ªè§’ç‚¹çš„é€Ÿåº¦</li>
</ul>
<p>å¾…å†™ï¼ï¼ï¼</p>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_41839222/article/details/85797156" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”è§†è§‰è·Ÿè¸ª feature_trackers</a><br><a href="https://blog.csdn.net/wangshuailpp/article/details/78719401" target="_blank" rel="noopener">VINSç†è®ºä¸ä»£ç è¯¦è§£2â€”â€”å•ç›®è§†è§‰è·Ÿè¸ª</a><br><a href="https://blog.csdn.net/q597967420/article/details/76099425" target="_blank" rel="noopener">VINS-Monoæºç è§£æï¼ˆäºŒï¼‰å‰ç«¯ï¼šç‰¹å¾è·Ÿè¸ª</a></p>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
      <tags>
        <tag>VINS</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16ä¸‹Github+Hexoæ­å»ºåšå®¢æ•™ç¨‹</title>
    <url>/2019/10/23/Ubuntu16%E4%B8%8BGithub+Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ï»¿åšå®¢ç½‘å€</p><p>==<a href="https://xiao-hu.com.cn/">https://xiao-hu.com.cn/</a>==</p><h1 id="å®‰è£…gitã€nodejs"><a href="#å®‰è£…gitã€nodejs" class="headerlink" title="å®‰è£…gitã€nodejs"></a>å®‰è£…gitã€nodejs</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install git</span><br><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure><p>å‡çº§nodejsç‰ˆæœ¬ï¼Œç›®å‰çš„æœ€æ–°ç‰ˆæœ¬v10.6.0<br>å‚è€ƒï¼š<a href="https://blog.csdn.net/u010277553/article/details/80938829" target="_blank" rel="noopener">Ubuntu16 å‡çº§nodejsç‰ˆæœ¬</a><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm install n -g</span><br><span class="line"></span><br><span class="line">sudo n stable</span><br></pre></td></tr></table></figure><br>åŠ é€Ÿä¸‹è½½ï¼š<a href="https://blog.csdn.net/ibmall/article/details/81390639" target="_blank" rel="noopener">npm å®‰è£… hexo å¡ä½é—®é¢˜è§£å†³</a><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p><a id="more"></a>



<h1 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo hexo init xiaohu</span><br><span class="line"><span class="built_in">cd</span> xiaohu </span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line">sudo npm install</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹ç›®å½•ä¸‹æœ‰ï¼š</p>
<blockquote>
<p>   node_modules: ä¾èµ–åŒ…<br>publicï¼šå­˜æ”¾ç”Ÿæˆçš„é¡µé¢<br>scaffoldsï¼šç”Ÿæˆæ–‡ç« çš„ä¸€äº›æ¨¡æ¿<br>sourceï¼šç”¨æ¥å­˜æ”¾ä½ çš„æ–‡ç« <br>themesï¼šä¸»é¢˜<br>_config.yml: åšå®¢çš„é…ç½®æ–‡ä»¶</p>
</blockquote>
<p>å†æ¬¡è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo hexo g <span class="comment">#ç”Ÿæˆé™æ€é¡µé¢</span></span><br><span class="line">sudo hexo server <span class="comment">#å¯åŠ¨æœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šè¿™æ—¶å€™å°±å¯ä»¥ç”¨æµè§ˆå™¨æ‰“å¼€ç½‘å€ï¼š <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> æ¥è¿›è¡Œé¢„è§ˆäº†ã€‚</p>
<h1 id="githubåˆ›å»º"><a href="#githubåˆ›å»º" class="headerlink" title="githubåˆ›å»º"></a>githubåˆ›å»º</h1><p>ä»¥å‰åˆ›å¥½äº†ï¼š<a href="https://mp.csdn.net/mdeditor/94998475#" target="_blank" rel="noopener">Ubuntu16.04 gitå®‰è£…ä¸é…ç½®</a></p>
<h1 id="åˆ›å»ºrepo"><a href="#åˆ›å»ºrepo" class="headerlink" title="åˆ›å»ºrepo"></a>åˆ›å»ºrepo</h1><p>åœ¨githubä¸Šé¢åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåä¸ºXiao-Hu-Z+github.io </p>
<h1 id="å°†hexoéƒ¨ç½²åˆ°github"><a href="#å°†hexoéƒ¨ç½²åˆ°github" class="headerlink" title="å°†hexoéƒ¨ç½²åˆ°github"></a>å°†hexoéƒ¨ç½²åˆ°github</h1><p>æ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼Œç¿»åˆ°æœ€åï¼Œè¿›è¡Œä¿®æ”¹ã€‚å…¶ä¸­YourgithubNameå°±æ˜¯ä½ çš„GitHubè´¦æˆ·ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/Xiao-Hu-Z/Xiao-Hu-Z.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™éœ€è¦å…ˆå®‰è£…deploy-git ï¼Œä¹Ÿå°±æ˜¯éƒ¨ç½²çš„å‘½ä»¤,è¿™æ ·ä½ æ‰èƒ½ç”¨å‘½ä»¤éƒ¨ç½²åˆ°GitHubã€‚<br>deployæ—¶è¦ä½ è¾“å…¥usernameå’Œpasswordã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨ç«™ç‚¹ç›®å½•ä¸‹è¾“å…¥ä¸‹é¢çš„æ’ä»¶å®‰è£…</span></span><br><span class="line">sudo npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">sudo hexo clean</span><br><span class="line">sudo hexo generate</span><br><span class="line">sudo hexo deploy</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ hexo cleanæ¸…é™¤äº†ä½ ä¹‹å‰ç”Ÿæˆçš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚<br>hexo generateé¡¾åæ€ä¹‰ï¼Œç”Ÿæˆé™æ€æ–‡ç« ï¼Œå¯ä»¥ç”¨ hexo gç¼©å†™<br>hexo deploy éƒ¨ç½²æ–‡ç« ï¼Œå¯ä»¥ç”¨hexo dç¼©å†™</p>
<p>è¾“å…¥ï¼š<a href="https://Xiao-Hu-Z.github.io/çœ‹åˆ°è‡ªå·±çš„åšå®¢" target="_blank" rel="noopener">https://Xiao-Hu-Z.github.io/çœ‹åˆ°è‡ªå·±çš„åšå®¢</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://Xiao-Hu-Z.github.io/</span><br></pre></td></tr></table></figure>
<h1 id="ç»‘å®šåŸŸåï¼š"><a href="#ç»‘å®šåŸŸåï¼š" class="headerlink" title="ç»‘å®šåŸŸåï¼š"></a>ç»‘å®šåŸŸåï¼š</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping Xiao-Hu-Z.github.io</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/e3169b681038" target="_blank" rel="noopener">[Hexoä¸ªäººåšå®¢]åŸŸåç»‘å®š ç®€æ˜æ•™ç¨‹ï¼ˆå°ç™½ç¯‡ï¼‰</a></p>
</blockquote>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/zxwsbg/article/details/97487666" target="_blank" rel="noopener">Ubuntu18ä¸‹Github+Hexoæ­å»ºåšå®¢æ•™ç¨‹</a><br><a href="https://blog.csdn.net/wang_da_bing/article/details/82818445" target="_blank" rel="noopener">Ubuntu18ä¸‹Github+Hexoæ­å»ºåšå®¢æ•™ç¨‹</a><br><a href="https://www.cnblogs.com/yangzhaonan/p/9351838.html" target="_blank" rel="noopener">ä½¿ç”¨GitHub+Hexoå»ºç«‹ä¸ªäººç½‘ç«™ï¼Œå¹¶ç»‘å®šè‡ªå·±çš„åŸŸåï¼ˆUbuntuç¯å¢ƒä¸‹ï¼‰</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>11.æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</title>
    <url>/2019/10/22/11.%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®ï¼š<br>æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚è¾“å…¥ä¸€ä¸ªéé€’å‡æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚æ•°ç»„{3,4,5,1,2}ä¸º{1,2,3,4,5}çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚<br>NOTEï¼šç»™å‡ºçš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äº0ï¼Œè‹¥æ•°ç»„å¤§å°ä¸º0ï¼Œè¯·è¿”å›0ã€‚</p><p> <strong>æ€è·¯1ï¼š</strong><br>æš´åŠ›è§£æ³•ï¼šæ ¹æ®ç»™å®šçš„æ•°ç»„ç‰¹ç‚¹ï¼Œä»å·¦åˆ°å³éå†æ•°ç»„å…ƒç´ ï¼Œå½“é¦–æ¬¡é‡åˆ°æ•°ç»„ä¸­æŸä¸ªå…ƒç´ æ¯”ä¸Šä¸€ä¸ªå…ƒç´ å°æ—¶ï¼Œè¯¥å…ƒç´ å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å…ƒç´ </p><a id="more"></a>

<p><strong>æ€è·¯2ï¼š</strong></p>
<ul>
<li>äºŒåˆ†æŸ¥æ‰¾ï¼š<blockquote>
<ul>
<li>ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ </li>
<li>æ¥ç€æ‰¾åˆ°ä¸­é—´å…ƒç´ ï¼Œå¦‚æœä¸­é—´å…ƒç´ ä½äºå‰é¢çš„é€’å¢å­æ•°ç»„ï¼ˆä¸­é—´å…ƒç´ å¤§äºæˆ–ç­‰äºç¬¬ä¸€ä¸ªå…ƒæŒ‡é’ˆæŒ‡å‘å…ƒç´ ï¼‰æŠŠç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸­é—´å…ƒç´ </li>
<li>å¦‚æœä¸­é—´å…ƒç´ ä½äºåé¢çš„é€’å¢å­æ•°ç»„ï¼ˆä¸­é—´å…ƒç´ å¤§äºæˆ–ç­‰äºç¬¬ä¸€ä¸ªå…ƒæŒ‡é’ˆæŒ‡å‘å…ƒç´ ï¼‰ï¼ŒæŠŠç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘ä¸­é—´å…ƒç´ </li>
<li>æœ€ç»ˆï¼Œä¸¤æŒ‡é’ˆä¼šæŒ‡å‘ç›¸é‚»çš„å…ƒç´ ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆåˆšå¥½æŒ‡å‘æ˜¯æœ€å°å…ƒç´ </li>
</ul>
</blockquote>
</li>
</ul>
<p><strong>C++</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minNumberInRotateArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rotateArray)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rotateArray.size()==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(rotateArray[i]&lt;=rotateArray[i+<span class="number">1</span>])</span><br><span class="line">            i++;</span><br><span class="line">        <span class="keyword">return</span> rotateArray[i+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>äºŒåˆ†æŸ¥æ‰¾ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minNumberInRotateArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rotateArray)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rotateArray.size()&lt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> low=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> high=rotateArray.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = low;<span class="comment">//é˜²æ­¢æ•°ç»„çš„å‰é¢0ä¸ªå…ƒç´ æ¬åˆ°æœ€åé¢</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(rotateArray[low]&gt;=rotateArray[high])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(high-low==<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                mid=high;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            mid=(low+high)/<span class="number">2</span>;</span><br><span class="line">            <span class="comment">//ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(rotateArray[low]==rotateArray[high] &amp;&amp; rotateArray[low]==rotateArray[mid])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> result=rotateArray[low];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=low;i&lt;=high;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(rotateArray[i]&lt;result)</span><br><span class="line">                        result=rotateArray[i];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(rotateArray[mid]&gt;=rotateArray[low])</span><br><span class="line">                low=mid;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(rotateArray[mid]&lt;=rotateArray[high])</span><br><span class="line">                high=mid;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> rotateArray[mid];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumberInRotateArray</span><span class="params">(self, rotateArray)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> len(rotateArray)==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(rotateArray)==<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> rotateArray[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(rotateArray)):</span><br><span class="line">            <span class="keyword">if</span>(rotateArray[i<span class="number">-1</span>]&gt;rotateArray[i]):</span><br><span class="line">                <span class="keyword">return</span> rotateArray[i]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minNumberInRotateArray</span><span class="params">(self, rotateArray)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> rotateArray:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        low=<span class="number">0</span>;</span><br><span class="line">        high=len(rotateArray)<span class="number">-1</span></span><br><span class="line">        mid=low</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> rotateArray[low]&gt;=rotateArray[high]:</span><br><span class="line">            <span class="keyword">if</span> high-low==<span class="number">1</span>:</span><br><span class="line">                mid=high</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">            mid=(low+high)//<span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> rotateArray[low]==rotateArray[high] <span class="keyword">and</span> rotateArray[low]==rotateArray[mid]:</span><br><span class="line">                result = rotateArray[low]</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> range(low,high+<span class="number">1</span>):</span><br><span class="line">                    <span class="keyword">if</span> result &gt; rotateArray[i]:</span><br><span class="line">                        result = rotateArray[i]</span><br><span class="line">                <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">if</span> rotateArray[mid]&gt;=rotateArray[low]:</span><br><span class="line">                low=mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                high=mid</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> rotateArray[mid]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>10.æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆè·³å°é˜¶ï¼‰</title>
    <url>/2019/10/20/10.%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97%EF%BC%88%E8%B7%B3%E5%8F%B0%E9%98%B6%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ï»¿é¢˜ç›®ä¸€ï¼š<br>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ªnçº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•</p><p>æ€è·¯</p><ul>
<li>å¦‚æœåªæœ‰ä¸€é˜¶å°é˜¶ï¼Œä¸€ç§è·³æ³•ï¼Œå¦‚æœåªæœ‰ä¸¤é˜¶å°é˜¶ï¼Œä¸¤ç§è·³æ³•</li>
<li>æŠŠné˜¶å°é˜¶æ—¶çš„è·³æ³•çœ‹æˆnçš„å‡½æ•°ï¼Œè®°æ³•f(n)ï¼Œf(n)=f(n-1)+f(n-2)</li>
</ul><p>é‡‡ç”¨å¾ªç¯æ–¹å¼å®ç°ï¼Œé€’å½’å®è·µæ•ˆç‡å¤ªä½<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result[<span class="number">3</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> result[n];         </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> fibOne=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> fibTwo=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> fibN;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            fibN=fibOne+fibTwo;</span><br><span class="line">            fibOne=fibTwo;</span><br><span class="line">            fibTwo=fibN;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fibN;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><a id="more"></a>



<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    def climbStairs(self, n: int) -&gt; int:</span><br><span class="line">        result=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">if</span> n&lt;<span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> result[n]</span><br><span class="line">        </span><br><span class="line">        f1=<span class="number">1</span></span><br><span class="line">        f2=<span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i in range(<span class="number">3</span>,n+<span class="number">1</span>):</span><br><span class="line">            fn=f1+f2</span><br><span class="line">            f1=f2</span><br><span class="line">            f2=fn</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> fn</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jumpFloorII</span><span class="params">(self, number)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>**(number<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<p><strong>ç›¸å…³é¢˜ç›®ï¼š</strong><br>æˆ‘ä»¬å¯ä»¥ç”¨2<em>1çš„å°çŸ©å½¢æ¨ªç€æˆ–è€…ç«–ç€å»è¦†ç›–æ›´å¤§çš„çŸ©å½¢ã€‚è¯·é—®ç”¨nä¸ª2</em>1çš„å°çŸ©å½¢æ— é‡å åœ°è¦†ç›–ä¸€ä¸ª2*nçš„å¤§çŸ©å½¢ï¼Œæ€»å…±æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rectCover</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result[]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br><span class="line">        <span class="keyword">if</span>(number&lt;<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">return</span> result[number];</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">int</span> f1=<span class="number">1</span>,f2=<span class="number">2</span>,fn;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=number;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            fn=f1+f2;</span><br><span class="line">            f1=f2;</span><br><span class="line">            f2=fn;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> fn;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>æ‰©å±•</strong><br>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§â€¦â€¦å®ƒä¹Ÿå¯ä»¥è·³ä¸Šnçº§ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ªnçº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚<br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">jumpFloorII</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> f=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(number&lt;<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> f;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=number;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            f=<span class="number">2</span>*f;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//return pow(2,number-1);</span></span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>KLT å…‰æµç®—æ³•</title>
    <url>/2019/10/20/KLT-%E5%85%89%E6%B5%81%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Optical-Flow"><a href="#Optical-Flow" class="headerlink" title="Optical Flow"></a>Optical Flow</h1><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020132123717.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020132137931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p><h1 id="KLT"><a href="#KLT" class="headerlink" title="KLT"></a>KLT</h1><p>KLT ç®—æ³•æœ¬è´¨ä¸Šä¹ŸåŸºäºå…‰æµçš„ä¸‰ä¸ªå‡è®¾ï¼Œä¸åŒäºå‰è¿°ç›´æ¥æ¯”è¾ƒåƒç´ ç‚¹ç°åº¦å€¼çš„ä½œæ³•ï¼ŒKLT æ¯”è¾ƒåƒç´ ç‚¹å‘¨å›´çš„çª—å£åƒç´ ï¼Œæ¥å¯»æ‰¾æœ€ç›¸ä¼¼çš„åƒç´ ç‚¹ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019102013215737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p><p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020132228980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br>å‚è€ƒï¼š<a href="https://blog.csdn.net/sgfmby1994/article/details/68489944" target="_blank" rel="noopener">æ€»ç»“ï¼šå…‰æµâ€”LKå…‰æµâ€”åŸºäºé‡‘å­—å¡”åˆ†å±‚çš„LKå…‰æµâ€”ä¸­å€¼æµ</a><br><a href="https://leijiezhang001.github.io/KLT/" target="_blank" rel="noopener">KLT å…‰æµç®—æ³•è¯¦è§£</a><br><a href="https://blog.csdn.net/irobot_davinci/article/details/29635199" target="_blank" rel="noopener">KLTè§’ç‚¹è·Ÿè¸ªç®—æ³•(LK)å­¦ä¹ ï¼ˆä¸€ï¼‰â€”â€”ç®—æ³•åŸç†</a></p>]]></content>
      <categories>
        <category>VINS</category>
      </categories>
  </entry>
  <entry>
    <title>9.ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
    <url>/2019/10/20/9.%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®æè¿°<br>ç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®Œæˆé˜Ÿåˆ—çš„Pushå’ŒPopæ“ä½œã€‚ é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ºintç±»å‹ã€‚</p><p>æ€è·¯ï¼š</p><ul>
<li>é¦–å…ˆæŠŠå…ƒç´ æ’å…¥stack1;</li>
<li>å½“stack2ä¸ºç©ºæ—¶ï¼ŒæŠŠstack1çš„å…ƒç´ é€ä¸ªå¼¹å‡ºå¹¶å‹å…¥stack2</li>
<li>å½“stack2æ­¥ä¸ºç©ºæ—¶ï¼Œåœ¨stack2çš„æ ˆé¡¶å…ƒç´ æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ ï¼Œå¯ä»¥å¼¹å‡º</li>
</ul><p><strong>C++</strong></p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">s.empty();         //å¦‚æœæ ˆä¸ºç©ºåˆ™è¿”å›true, å¦åˆ™è¿”å›false;</span></span><br><span class="line"><span class="comment">s.size();          //è¿”å›æ ˆä¸­å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">s.top();           //è¿”å›æ ˆé¡¶å…ƒç´ , ä½†ä¸åˆ é™¤è¯¥å…ƒç´ </span></span><br><span class="line"><span class="comment">s.pop();           //å¼¹å‡ºæ ˆé¡¶å…ƒç´ , ä½†ä¸è¿”å›å…¶å€¼</span></span><br><span class="line"><span class="comment">s.push();          //å°†å…ƒç´ å‹å…¥æ ˆé¡¶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">        stack1.push(node);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack2.size()==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(stack1.size()&gt;<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> data=stack1.top();</span><br><span class="line">                stack1.pop();</span><br><span class="line">                stack2.push(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> head=stack2.top();</span><br><span class="line">        stack2.pop();</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stack1;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stack2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><a id="more"></a>




<p><strong>Python</strong><br><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.stack1 = []</span><br><span class="line">        self.stack2 = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        self.stack1.append(node)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># return xx</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stack2:</span><br><span class="line">            <span class="keyword">while</span> self.stack1:</span><br><span class="line">                <span class="comment">#.pop(i)å°†åˆ—è¡¨ä¸­ç¬¬ié¡¹å…ƒç´ å–å‡ºå¹¶åˆ é™¤è¯¥å…ƒç´ </span></span><br><span class="line">                self.stack2.append(self.stack1.pop(<span class="number">-1</span>))</span><br><span class="line">        <span class="keyword">return</span> self.stack2.pop(<span class="number">-1</span>)</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>Harrisè§’ç‚¹æ£€æµ‹</title>
    <url>/2019/10/20/Harris%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä½•ä¸ºè§’ç‚¹"><a href="#ä½•ä¸ºè§’ç‚¹" class="headerlink" title="ä½•ä¸ºè§’ç‚¹"></a>ä½•ä¸ºè§’ç‚¹</h1><p>ä¸‹é¢æœ‰ä¸¤å¹…ä¸åŒè§†è§’çš„å›¾åƒï¼Œé€šè¿‡æ‰¾å‡ºå¯¹åº”çš„è§’ç‚¹è¿›è¡ŒåŒ¹é…ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020095257386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å†çœ‹ä¸‹å›¾æ‰€ç¤ºï¼Œæ”¾å¤§å›¾åƒçš„ä¸¤å¤„è§’ç‚¹åŒºåŸŸï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020095313814.png#pic_center"><br>è§’ç‚¹åœ¨ä¿ç•™å›¾åƒå›¾å½¢é‡è¦ç‰¹å¾çš„åŒæ—¶ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ä¿¡æ¯çš„æ•°æ®é‡ï¼Œä½¿å…¶ä¿¡æ¯çš„å«é‡å¾ˆé«˜ï¼Œæœ‰æ•ˆåœ°æé«˜äº†è®¡ç®—çš„é€Ÿåº¦ï¼Œæœ‰åˆ©äºå›¾åƒçš„å¯é åŒ¹é…ï¼Œä½¿å¾—å®æ—¶å¤„ç†æˆä¸ºå¯èƒ½ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´è§‚çš„æ¦‚æ‹¬ä¸‹è§’ç‚¹æ‰€å…·æœ‰çš„ç‰¹å¾ï¼š</p><ul>
<li>è½®å»“ä¹‹é—´çš„äº¤ç‚¹ï¼›</li>
<li>å¯¹äºåŒä¸€åœºæ™¯ï¼Œå³ä½¿è§†è§’å‘ç”Ÿå˜åŒ–ï¼Œé€šå¸¸å…·å¤‡ç¨³å®šæ€§è´¨çš„ç‰¹å¾ï¼›<ul>
<li>è¯¥ç‚¹é™„è¿‘åŒºåŸŸçš„åƒç´ ç‚¹æ— è®ºåœ¨æ¢¯åº¦æ–¹å‘ä¸Šè¿˜æ˜¯å…¶æ¢¯åº¦å¹…å€¼ä¸Šæœ‰ç€è¾ƒå¤§å˜åŒ–ï¼›<h1 id="è§’ç‚¹æ£€æµ‹ç®—æ³•åŸºæœ¬æ€æƒ³"><a href="#è§’ç‚¹æ£€æµ‹ç®—æ³•åŸºæœ¬æ€æƒ³" class="headerlink" title="è§’ç‚¹æ£€æµ‹ç®—æ³•åŸºæœ¬æ€æƒ³"></a>è§’ç‚¹æ£€æµ‹ç®—æ³•åŸºæœ¬æ€æƒ³</h1>ç®—æ³•åŸºæœ¬æ€æƒ³æ˜¯ä½¿ç”¨ä¸€ä¸ªå›ºå®šçª—å£åœ¨å›¾åƒä¸Šè¿›è¡Œä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œæ¯”è¾ƒæ»‘åŠ¨å‰ä¸æ»‘åŠ¨åä¸¤ç§æƒ…å†µï¼Œçª—å£ä¸­çš„åƒç´ ç°åº¦å˜åŒ–ç¨‹åº¦ï¼Œå¦‚æœå­˜åœ¨ä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œéƒ½æœ‰ç€è¾ƒå¤§ç°åº¦å˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¯¥çª—å£ä¸­å­˜åœ¨è§’ç‚¹ã€‚<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1></li>
</ul>
</li>
</ul><a id="more"></a>


<p>å½“çª—å£å‘ç”Ÿ[u,v]ç§»åŠ¨æ—¶ï¼Œé‚£ä¹ˆæ»‘åŠ¨å‰ä¸æ»‘åŠ¨åå¯¹åº”çš„çª—å£ä¸­çš„åƒç´ ç‚¹ç°åº¦å˜åŒ–æè¿°å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">E(u, v)=\sum_{x_{s}, y} w(x, y)[I(x+u, y+v)-I(x, y)]^{2}</script><p>[u,v]æ˜¯çª—å£çš„åç§»é‡<br>(x,y)æ˜¯çª—å£å†…æ‰€å¯¹åº”çš„åƒç´ åæ ‡ä½ç½®ï¼Œçª—å£æœ‰å¤šå¤§ï¼Œå°±æœ‰å¤šå°‘ä¸ªä½ç½®<br>w(x,y)æ˜¯çª—å£å‡½æ•°ï¼Œæœ€ç®€å•æƒ…å½¢å°±æ˜¯çª—å£å†…çš„æ‰€æœ‰åƒç´ æ‰€å¯¹åº”çš„wæƒé‡ç³»æ•°å‡ä¸º1ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†w(x,y)å‡½æ•°è®¾å®šä¸ºä»¥çª—å£ä¸­å¿ƒä¸ºåŸç‚¹çš„äºŒå…ƒæ­£æ€åˆ†å¸ƒã€‚å¦‚æœçª—å£ä¸­å¿ƒç‚¹æ˜¯è§’ç‚¹æ—¶ï¼Œç§»åŠ¨å‰ä¸ç§»åŠ¨åï¼Œè¯¥ç‚¹çš„ç°åº¦å˜åŒ–åº”è¯¥æœ€ä¸ºå‰§çƒˆï¼Œæ‰€ä»¥è¯¥ç‚¹æƒé‡ç³»æ•°å¯ä»¥è®¾å®šå¤§äº›ï¼Œè¡¨ç¤ºçª—å£ç§»åŠ¨æ—¶ï¼Œè¯¥ç‚¹åœ¨ç°åº¦å˜åŒ–è´¡çŒ®è¾ƒå¤§ï¼›è€Œç¦»çª—å£ä¸­å¿ƒ(è§’ç‚¹)è¾ƒè¿œçš„ç‚¹ï¼Œè¿™äº›ç‚¹çš„ç°åº¦å˜åŒ–å‡ è¿‘å¹³ç¼“ï¼Œè¿™äº›ç‚¹çš„æƒé‡ç³»æ•°ï¼Œå¯ä»¥è®¾å®šå°ç‚¹ï¼Œä»¥ç¤ºè¯¥ç‚¹å¯¹ç°åº¦å˜åŒ–è´¡çŒ®è¾ƒå°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æƒ³åˆ°ä½¿ç”¨äºŒå…ƒé«˜æ–¯å‡½æ•°æ¥è¡¨ç¤ºçª—å£å‡½æ•°ï¼Œæ‰€ä»¥é€šå¸¸çª—å£å‡½æ•°æœ‰å¦‚ä¸‹ä¸¤ç§å½¢å¼ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020095759748.png#pic_center"><br>æ ¹æ®ä¸Šè¿°è¡¨è¾¾å¼ï¼Œå½“çª—å£å¤„åœ¨å¹³å¦åŒºåŸŸä¸Šæ»‘åŠ¨ï¼Œå¯ä»¥æƒ³è±¡çš„åˆ°ï¼Œç°åº¦ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆE(u,v) = 0ï¼›å¦‚æœçª—å£å¤„åœ¨æ¯”çº¹ç†æ¯”è¾ƒä¸°å¯Œçš„åŒºåŸŸä¸Šæ»‘åŠ¨ï¼Œé‚£ä¹ˆç°åº¦å˜åŒ–ä¼šå¾ˆå¤§ã€‚ç®—æ³•æœ€ç»ˆæ€æƒ³å°±æ˜¯è®¡ç®—ç°åº¦å‘ç”Ÿè¾ƒå¤§å˜åŒ–æ—¶æ‰€å¯¹åº”çš„ä½ç½®ï¼Œå½“ç„¶è¿™ä¸ªè¾ƒå¤§æ˜¯æŒ‡é’ˆä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œå¹¶éå•æŒ‡æŸä¸ªæ–¹å‘ã€‚</p>
<p>$I(x+u, y+v)$æ³°å‹’å±•å¼€å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">I(x+u, y+v)=I(x, y)+I_{x} u+I_{y} v+O\left(u^{2}, v^{2}\right)</script><p>å½“å‘ç”Ÿå¾®å°ä½ç§»æ—¶ï¼Œå¿½ç•¥æ— ç©·å°é‡ï¼Œå†™æˆçŸ©é˜µå½¢å¼ï¼š</p>
<script type="math/tex; mode=display">E(u, v)=\sum_w[u, v]\left[\begin{array}{cc}{I_{x}^{2}} & {I_{x} I_{y}} \\ {I_{x} I_{y}} & {I_{y}^{2}}\end{array}\right]\left[\begin{array}{l}{u} \\ {v}\end{array}\right]=[u, v]M\left[\begin{array}{l}{u} \\ {v}\end{array}\right]</script><p>æ‰€ä»¥E(u,v)è¡¨è¾¾å¼å¯ä»¥æ›´æ–°ä¸ºï¼š</p>
<script type="math/tex; mode=display">E(u,v)\cong \begin{bmatrix}
u\\ v\end{bmatrix}M\begin{bmatrix}
u & 
v\end{bmatrix}</script><p>çŸ©é˜µMä¸º:</p>
<script type="math/tex; mode=display">M(x,y)=\Sigma_w \left[ \begin{matrix} I_x^2& I_xI_y \\ I_xI_y & I_y^2\end{matrix} \right]</script><p>E(u,v)æ˜¯ä¸€ä¸ªäºŒæ¬¡å‹ï¼Œè€Œç”±ä¸‹è¿°å®šç†å¯çŸ¥<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020101744919.png#pic_center"><br>Måˆ†è§£å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">M=X\Sigma X^T = X \left[ \begin{matrix} \lambda_1& 0\\ 0& \lambda_2\end{matrix} \right] X^T</script><p>ä»¤E(u,v)=å¸¸æ•°ï¼Œæˆ‘ä»¬å¯ç”¨ä¸€ä¸ªæ¤­åœ†æ¥æç»˜è¿™ä¸€å‡½æ•°<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020101810715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>æ¤­åœ†çš„é•¿çŸ­è½´æ˜¯ä¸ç»“æ„å¼ é‡Mçš„ä¸¤ä¸ªç‰¹å¾å€¼ç›¸å¯¹åº”çš„é‡ã€‚é€šè¿‡åˆ¤æ–­çš„æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥åŒºåˆ†å‡ºâ€˜flatâ€™ï¼Œâ€˜edgeâ€™ï¼Œâ€˜cornerâ€™è¿™ä¸‰ç§åŒºåŸŸï¼Œå› ä¸ºæœ€ç›´è§‚çš„å°è±¡ï¼š</p>
<ul>
<li>cornerï¼šåœ¨æ°´å¹³ã€ç«–ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šå˜åŒ–å‡è¾ƒå¤§çš„ç‚¹ï¼Œå³Ixã€Iyéƒ½è¾ƒå¤§ <ul>
<li>edge ï¼šä»…åœ¨æ°´å¹³ã€æˆ–è€…ä»…åœ¨ç«–ç›´æ–¹å‘æœ‰è¾ƒå¤§çš„ç‚¹ï¼Œå³Ixå’ŒIyåªæœ‰å…¶ä¸€è¾ƒå¤§ </li>
<li>flat   ï¼š åœ¨æ°´å¹³ã€ç«–ç›´æ–¹å‘çš„å˜åŒ–é‡å‡è¾ƒå°çš„ç‚¹ï¼Œå³Ixã€Iyéƒ½è¾ƒå°</li>
</ul>
</li>
</ul>
<p>Mæ˜¯ç”±Ixï¼ŒIyæ„æˆï¼Œå®ƒçš„ç‰¹å¾å€¼æ­£å¥½å¯ä»¥åæ˜ Ixï¼ŒIyçš„æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¥ä¸€ç§æ›´å®¹æ˜“ç†è§£çš„æ–¹å¼æ¥è®²è¿°æ¤­åœ†çš„ç‰©ç†æ„ä¹‰ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020101904206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br>ä¸‹å›¾æ˜¯å¯¹è¿™ä¸‰ç§æƒ…å†µçª—å£ä¸­çš„å¯¹åº”åƒç´ çš„æ¢¯åº¦åˆ†å¸ƒè¿›è¡Œç»˜åˆ¶ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020101940485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å¦‚æœä½¿ç”¨æ¤­åœ†è¿›è¡Œæ•°æ®é›†è¡¨ç¤ºï¼Œåˆ™ç»˜åˆ¶å›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020103310120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å¯ä»¥å¾—å‡ºä¸‹åˆ—ç»“è®ºï¼š</p>
<blockquote>
<p>ç‰¹å¾å€¼éƒ½æ¯”è¾ƒå¤§æ—¶ï¼Œå³çª—å£ä¸­å«æœ‰è§’ç‚¹<br>ç‰¹å¾å€¼ä¸€ä¸ªè¾ƒå¤§ï¼Œä¸€ä¸ªè¾ƒå°ï¼Œçª—å£ä¸­å«æœ‰è¾¹ç¼˜<br>ç‰¹å¾å€¼éƒ½æ¯”è¾ƒå°ï¼Œçª—å£å¤„åœ¨å¹³å¦åŒºåŸŸ<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020102013942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
</blockquote>
<h1 id="åº¦é‡è§’ç‚¹å“åº”"><a href="#åº¦é‡è§’ç‚¹å“åº”" class="headerlink" title="åº¦é‡è§’ç‚¹å“åº”"></a>åº¦é‡è§’ç‚¹å“åº”</h1><p>ç‰¹å¾å€¼è®¡ç®—ä¸€èˆ¬æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æŠŠMå†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">M(x,y)=\Sigma_w \left[ \begin{matrix} I_x^2& I_xI_y \\ I_xI_y & I_y^2\end{matrix} \right] = \left[ \begin{matrix} A& C\\ C& B\end{matrix} \right]</script><p>å®šä¹‰è§’ç‚¹å“åº”å‡½æ•°Rï¼ˆcorner response functionï¼‰ï¼Œé‡‡ç”¨è¿‘ä¼¼çš„å½¢å¼ï¼ŒÎ±ä¸ºå¸¸æ•°ï¼Œä¸€èˆ¬å–0.04-0.06ï¼š</p>
<script type="math/tex; mode=display">R = detM-\alpha (traceM)^2\\
detM=\lambda_1 \lambda_2=AB-C^2\\
traceM=\lambda_1 + \lambda_2 = A+B</script><blockquote>
<p>å¯ä»¥é€šè¿‡åˆ¤æ–­Rçš„å€¼æ¥åˆ¤æ–­æŸä¸ªç‚¹æ˜¯ä¸æ˜¯è§’ç‚¹äº†ã€‚</p>
<ul>
<li>è§’ç‚¹ï¼šRä¸ºå¤§æ•°å€¼æ•´æ•°</li>
<li>è¾¹ç¼˜ï¼šRä¸ºå¤§æ•°å€¼è´Ÿæ•°</li>
<li>å¹³å¦åŒºï¼šç»å¯¹å€¼Ræ˜¯å°æ•°å€¼<img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020102127533.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center#pic_center"><h1 id="harrisè§’ç‚¹æ€§è´¨"><a href="#harrisè§’ç‚¹æ€§è´¨" class="headerlink" title="harrisè§’ç‚¹æ€§è´¨"></a>harrisè§’ç‚¹æ€§è´¨</h1>å‚æ•°Î±å¯¹è§’ç‚¹æ£€æµ‹çš„å½±å“ï¼šå¢å¤§Î±çš„å€¼ï¼Œå°†å‡å°è§’ç‚¹å“åº”å€¼Rï¼Œå‡å°‘è¢«æ£€æµ‹è§’ç‚¹çš„æ•°é‡ï¼›å‡å°Î±çš„å€¼ï¼Œå°†å¢å¤§è§’ç‚¹å“åº”å€¼Rï¼Œå¢åŠ è¢«æ£€æµ‹è§’ç‚¹çš„æ•°é‡ã€‚</li>
</ul>
</blockquote>
<ul>
<li>Harrisè§’ç‚¹æ£€æµ‹å¯¹äº®åº¦å’Œå¯¹æ¯”åº¦çš„å˜åŒ–ä¸æ•æ„Ÿã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020104945973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></li>
<li>Harrisè§’ç‚¹æ£€æµ‹å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä¸å…·å¤‡å°ºåº¦ä¸å˜æ€§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å°å°ºåº¦ä¸‹çš„è§’ç‚¹è¢«æ”¾å¤§åå¯èƒ½ä¼šè¢«è®¤ä¸ºæ˜¯å›¾åƒè¾¹ç¼˜ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191020105015840.png#pic_center"></li>
</ul>
<h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><p>harrisè§’ç‚¹æ£€æµ‹ç®—æ³•æ­¥éª¤</p>
<ol>
<li><p>åˆ©ç”¨Sobleè®¡ç®—å‡ºXYæ–¹å‘çš„æ¢¯åº¦å€¼</p>
</li>
<li><p>è®¡ç®—å‡º$I_x^2,I_y^2,I_xI_y$</p>
</li>
<li><p>åˆ©ç”¨é«˜æ–¯å‡½æ•°å¯¹$I_x^2,I_y^2,I_xI_y$è¿›è¡Œæ»¤æ³¢</p>
</li>
<li><p>è®¡ç®—å±€éƒ¨ç‰¹å¾ç»“æœçŸ©é˜µMçš„ç‰¹å¾å€¼å’Œå“åº”å‡½æ•°$C(i,j)=Det(M)-k(trace(M))^2   (0.04&lt;=k&lt;=0.06)$</p>
</li>
<li><p>å°†è®¡ç®—å‡ºå“åº”å‡½æ•°çš„å€¼Cè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œæ»¤é™¤ä¸€äº›ä¸æ˜¯è§’ç‚¹çš„ç‚¹ï¼ŒåŒæ—¶è¦æ»¡è¶³å¤§äºè®¾å®šçš„é˜ˆå€¼</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#include "opencv2/imgproc/imgproc.hpp"  </span></span><br><span class="line"><span class="comment">#include "opencv2/highgui/highgui.hpp"  </span></span><br><span class="line"><span class="comment">#include &lt;iostream&gt;  </span></span><br><span class="line"><span class="comment">#include &lt;cmath&gt;</span></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace std;</span><br><span class="line">/*</span><br><span class="line">RGBè½¬æ¢æˆç°åº¦å›¾åƒçš„ä¸€ä¸ªå¸¸ç”¨å…¬å¼æ˜¯ï¼š</span><br><span class="line">Gray = R*0.299 + G*0.587 + B*0.114</span><br><span class="line">*/</span><br><span class="line">//******************ç°åº¦è½¬æ¢å‡½æ•°*************************  </span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°imageè¾“å…¥çš„å½©è‰²RGBå›¾åƒçš„å¼•ç”¨ï¼›  </span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°imageGrayæ˜¯è½¬æ¢åè¾“å‡ºçš„ç°åº¦å›¾åƒçš„å¼•ç”¨ï¼›  </span><br><span class="line">//*******************************************************</span><br><span class="line">void ConvertRGB2GRAY(const Mat &amp;image, Mat &amp;imageGray);</span><br><span class="line"> </span><br><span class="line">//******************Sobelå·ç§¯å› å­è®¡ç®—Xã€Yæ–¹å‘æ¢¯åº¦å’Œæ¢¯åº¦æ–¹å‘è§’********************  </span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°imageSourcåŸå§‹ç°åº¦å›¾åƒï¼›  </span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°imageSobelXæ˜¯Xæ–¹å‘æ¢¯åº¦å›¾åƒï¼›  </span><br><span class="line">//ç¬¬ä¸‰ä¸ªå‚æ•°imageSobelYæ˜¯Yæ–¹å‘æ¢¯åº¦å›¾åƒï¼›  </span><br><span class="line">//ç¬¬å››ä¸ªå‚æ•°pointDrectionæ˜¯æ¢¯åº¦æ–¹å‘è§’æ•°ç»„æŒ‡é’ˆ  </span><br><span class="line">//*************************************************************  </span><br><span class="line">void SobelGradDirction(Mat &amp;imageSource, Mat &amp;imageSobelX, Mat &amp;imageSobelY);</span><br><span class="line"> </span><br><span class="line">//******************è®¡ç®—Sobelçš„Xæ–¹å‘æ¢¯åº¦å¹…å€¼çš„å¹³æ–¹*************************  </span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°imageGradXæ˜¯Xæ–¹å‘æ¢¯åº¦å›¾åƒï¼›    </span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°SobelAmpXXæ˜¯è¾“å‡ºçš„Xæ–¹å‘æ¢¯åº¦å›¾åƒçš„å¹³æ–¹  </span><br><span class="line">//*************************************************************  </span><br><span class="line">void SobelXX(const Mat imageGradX, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpXX);</span><br><span class="line"> </span><br><span class="line">//******************è®¡ç®—Sobelçš„Yæ–¹å‘æ¢¯åº¦å¹…å€¼çš„å¹³æ–¹*************************    </span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°imageGradYæ˜¯Yæ–¹å‘æ¢¯åº¦å›¾åƒï¼›  </span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°SobelAmpXXæ˜¯è¾“å‡ºçš„Yæ–¹å‘æ¢¯åº¦å›¾åƒçš„å¹³æ–¹  </span><br><span class="line">//*************************************************************  </span><br><span class="line">void SobelYY(const Mat imageGradY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpYY);</span><br><span class="line"> </span><br><span class="line">//******************è®¡ç®—Sobelçš„XYæ–¹å‘æ¢¯åº¦å¹…å€¼çš„ä¹˜ç§¯*************************    </span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°imageGradXæ˜¯Xæ–¹å‘æ¢¯åº¦å›¾åƒï¼›</span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°imageGradYæ˜¯Yæ–¹å‘æ¢¯åº¦å›¾åƒï¼›</span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°SobelAmpXYæ˜¯è¾“å‡ºçš„XYæ–¹å‘æ¢¯åº¦å›¾åƒ </span><br><span class="line">//*************************************************************  </span><br><span class="line">void SobelXY(const Mat imageGradX, const Mat imageGradY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpXY);</span><br><span class="line"> </span><br><span class="line">//****************è®¡ç®—ä¸€ç»´é«˜æ–¯çš„æƒå€¼æ•°ç»„*****************</span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°sizeæ˜¯ä»£è¡¨çš„å·ç§¯æ ¸çš„è¾¹é•¿çš„å¤§å°</span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°sigmaè¡¨ç¤ºçš„æ˜¯sigmaçš„å¤§å°</span><br><span class="line">//*******************************************************</span><br><span class="line">double *getOneGuassionArray(int size, double sigma);</span><br><span class="line"> </span><br><span class="line">//****************é«˜æ–¯æ»¤æ³¢å‡½æ•°çš„å®ç°*****************</span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°srcImageæ˜¯ä»£è¡¨çš„è¾“å…¥çš„åŸå›¾</span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°dstè¡¨ç¤ºçš„æ˜¯è¾“å‡ºçš„å›¾</span><br><span class="line">//ç¬¬ä¸‰ä¸ªå‚æ•°sizeè¡¨ç¤ºçš„æ˜¯å·ç§¯æ ¸çš„è¾¹é•¿çš„å¤§å°</span><br><span class="line">//*******************************************************</span><br><span class="line">void MyGaussianBlur(Mat_&lt;<span class="built_in">float</span>&gt; &amp;srcImage, Mat_&lt;<span class="built_in">float</span>&gt; &amp;dst, int size);</span><br><span class="line"> </span><br><span class="line">//****è®¡ç®—å±€éƒ¨ç‰¹æ¶¨ç»“æœçŸ©é˜µMçš„ç‰¹å¾å€¼å’Œå“åº”å‡½æ•°H = (A*B - C) - k*(A+B)^2******</span><br><span class="line">//M</span><br><span class="line">//A  C</span><br><span class="line">//C  B</span><br><span class="line">//Tr(M)=a+b=A+B</span><br><span class="line">//Det(M)=a*b=A*B-C^2</span><br><span class="line">//è®¡ç®—è¾“å‡ºå“åº”å‡½æ•°çš„å€¼å¾—çŸ©é˜µ</span><br><span class="line">//****************************************************************************</span><br><span class="line">void harrisResponse(Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussXX, Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussYY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussXY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;resultData,<span class="built_in">float</span> k);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//***********éæå¤§å€¼æŠ‘åˆ¶å’Œæ»¡è¶³é˜ˆå€¼åŠæŸé‚»åŸŸå†…çš„å±€éƒ¨æå¤§å€¼ä¸ºè§’ç‚¹**************</span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å“åº”å‡½æ•°çš„çŸ©é˜µ</span><br><span class="line">//ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥çš„ç°åº¦å›¾åƒ</span><br><span class="line">//ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯è¾“å‡ºçš„è§’ç‚¹æ£€æµ‹åˆ°çš„ç»“æœå›¾</span><br><span class="line">void LocalMaxValue(Mat_&lt;<span class="built_in">float</span>&gt; &amp;resultData, Mat &amp;srcGray, Mat &amp;ResultImage,int kSize);</span><br><span class="line"> </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	const Mat srcImage = imread(<span class="string">"3.jpg"</span>);</span><br><span class="line">	<span class="keyword">if</span> (!srcImage.data)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"could not load image...\n"</span>);</span><br><span class="line">		<span class="built_in">return</span> -1;</span><br><span class="line">	&#125;</span><br><span class="line">	imshow(<span class="string">"srcImage"</span>, srcImage);</span><br><span class="line">	Mat srcGray;</span><br><span class="line">	ConvertRGB2GRAY(srcImage, srcGray);</span><br><span class="line">	Mat imageSobelX;</span><br><span class="line">	Mat imageSobelY;</span><br><span class="line">	Mat resultImage;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; imageSobelXX;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; imageSobelYY;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; imageSobelXY;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; GaussianXX;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; GaussianYY;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; GaussianXY;</span><br><span class="line">	Mat_&lt;<span class="built_in">float</span>&gt; HarrisRespond;</span><br><span class="line">	//è®¡ç®—Sobleçš„XYæ¢¯åº¦</span><br><span class="line">	SobelGradDirction(srcGray, imageSobelX, imageSobelY);</span><br><span class="line">	//è®¡ç®—Xæ–¹å‘çš„æ¢¯åº¦çš„å¹³æ–¹</span><br><span class="line">	SobelXX(imageSobelX, imageSobelXX);</span><br><span class="line">	SobelYY(imageSobelY, imageSobelYY);</span><br><span class="line">	SobelXY(imageSobelX, imageSobelY, imageSobelXY);</span><br><span class="line">	//è®¡ç®—é«˜æ–¯æ¨¡ç³ŠXX YY XY</span><br><span class="line">	MyGaussianBlur(imageSobelXX, GaussianXX,3);</span><br><span class="line">	MyGaussianBlur(imageSobelYY, GaussianYY, 3);</span><br><span class="line">	MyGaussianBlur(imageSobelXY, GaussianXY, 3);</span><br><span class="line">	harrisResponse(GaussianXX, GaussianYY, GaussianXY, HarrisRespond, 0.05);</span><br><span class="line">	LocalMaxValue(HarrisRespond, srcGray, resultImage, 3);</span><br><span class="line">	imshow(<span class="string">"imageSobelX"</span>, imageSobelX);</span><br><span class="line">	imshow(<span class="string">"imageSobelY"</span>, imageSobelY);</span><br><span class="line">	imshow(<span class="string">"resultImage"</span>, resultImage);</span><br><span class="line">	waitKey(0);</span><br><span class="line">	<span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line">void ConvertRGB2GRAY(const Mat &amp;image, Mat &amp;imageGray)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (!image.data || image.channels() != 3)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	//åˆ›å»ºä¸€å¼ å•é€šé“çš„ç°åº¦å›¾åƒ</span><br><span class="line">	imageGray = Mat::zeros(image.size(), CV_8UC1);</span><br><span class="line">	//å–å‡ºå­˜å‚¨å›¾åƒåƒç´ çš„æ•°ç»„çš„æŒ‡é’ˆ</span><br><span class="line">	uchar *pointImage = image.data;</span><br><span class="line">	uchar *pointImageGray = imageGray.data;</span><br><span class="line">	//å–å‡ºå›¾åƒæ¯è¡Œæ‰€å çš„å­—èŠ‚æ•°</span><br><span class="line">	size_t stepImage = image.step;</span><br><span class="line">	size_t stepImageGray = imageGray.step;</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; imageGray.rows; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 0; j &lt; imageGray.cols; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			pointImageGray[i*stepImageGray + j] = (uchar)(0.114*pointImage[i*stepImage + 3 * j] + 0.587*pointImage[i*stepImage + 3 * j + 1] + 0.299*pointImage[i*stepImage + 3 * j + 2]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//å­˜å‚¨æ¢¯åº¦è†œé•¿</span><br><span class="line">void SobelGradDirction(Mat &amp;imageSource, Mat &amp;imageSobelX, Mat &amp;imageSobelY)</span><br><span class="line">&#123;</span><br><span class="line">	imageSobelX = Mat::zeros(imageSource.size(), CV_32SC1);</span><br><span class="line">	imageSobelY = Mat::zeros(imageSource.size(), CV_32SC1);</span><br><span class="line">	//å–å‡ºåŸå›¾å’ŒXå’ŒYæ¢¯åº¦å›¾çš„æ•°ç»„çš„é¦–åœ°å€</span><br><span class="line">	uchar *P = imageSource.data;</span><br><span class="line">	uchar *PX = imageSobelX.data;</span><br><span class="line">	uchar *PY = imageSobelY.data;</span><br><span class="line"> </span><br><span class="line">	//å–å‡ºæ¯è¡Œæ‰€å æ®çš„å­—èŠ‚æ•°</span><br><span class="line">	int step = imageSource.step;</span><br><span class="line">	int stepXY = imageSobelX.step;</span><br><span class="line"> </span><br><span class="line">	int index = 0;//æ¢¯åº¦æ–¹å‘è§’çš„ç´¢å¼•</span><br><span class="line">	<span class="keyword">for</span> (int i = 1; i &lt; imageSource.rows - 1; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 1; j &lt; imageSource.cols - 1; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			//é€šè¿‡æŒ‡é’ˆéå†å›¾åƒä¸Šæ¯ä¸€ä¸ªåƒç´    </span><br><span class="line">			double gradY = P[(i + 1)*step + j - 1] + P[(i + 1)*step + j] * 2 + P[(i + 1)*step + j + 1] - P[(i - 1)*step + j - 1] - P[(i - 1)*step + j] * 2 - P[(i - 1)*step + j + 1];</span><br><span class="line">			PY[i*stepXY + j*(stepXY / step)] = abs(gradY);</span><br><span class="line"> </span><br><span class="line">			double gradX = P[(i - 1)*step + j + 1] + P[i*step + j + 1] * 2 + P[(i + 1)*step + j + 1] - P[(i - 1)*step + j - 1] - P[i*step + j - 1] * 2 - P[(i + 1)*step + j - 1];</span><br><span class="line">			PX[i*stepXY + j*(stepXY / step)] = abs(gradX);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//å°†æ¢¯åº¦æ•°ç»„è½¬æ¢æˆ8ä½æ— ç¬¦å·æ•´å‹</span><br><span class="line">	convertScaleAbs(imageSobelX, imageSobelX);</span><br><span class="line">	convertScaleAbs(imageSobelY, imageSobelY);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">void SobelXX(const Mat imageGradX, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpXX)</span><br><span class="line">&#123;</span><br><span class="line">	SobelAmpXX = Mat_&lt;<span class="built_in">float</span>&gt;(imageGradX.size(), CV_32FC1);</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; SobelAmpXX.rows; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 0; j &lt; SobelAmpXX.cols; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			SobelAmpXX.at&lt;<span class="built_in">float</span>&gt;(i, j) = imageGradX.at&lt;uchar&gt;(i, j)*imageGradX.at&lt;uchar&gt;(i, j);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//convertScaleAbs(SobelAmpXX, SobelAmpXX);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void SobelYY(const Mat imageGradY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpYY)</span><br><span class="line">&#123;</span><br><span class="line">	SobelAmpYY = Mat_&lt;<span class="built_in">float</span>&gt;(imageGradY.size(), CV_32FC1);</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; SobelAmpYY.rows; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 0; j &lt; SobelAmpYY.cols; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			SobelAmpYY.at&lt;<span class="built_in">float</span>&gt;(i, j) = imageGradY.at&lt;uchar&gt;(i, j)*imageGradY.at&lt;uchar&gt;(i, j);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//convertScaleAbs(SobelAmpYY, SobelAmpYY);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void SobelXY(const Mat imageGradX, const Mat imageGradY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;SobelAmpXY)</span><br><span class="line">&#123;</span><br><span class="line">	SobelAmpXY = Mat_&lt;<span class="built_in">float</span>&gt;(imageGradX.size(), CV_32FC1);</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; SobelAmpXY.rows; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 0; j &lt; SobelAmpXY.cols; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			SobelAmpXY.at&lt;<span class="built_in">float</span>&gt;(i, j) = imageGradX.at&lt;uchar&gt;(i, j)*imageGradY.at&lt;uchar&gt;(i, j);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//convertScaleAbs(SobelAmpXY, SobelAmpXY);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//è®¡ç®—ä¸€ç»´é«˜æ–¯çš„æƒå€¼æ•°ç»„</span><br><span class="line">double *getOneGuassionArray(int size, double sigma)</span><br><span class="line">&#123;</span><br><span class="line">	double sum = 0.0;</span><br><span class="line">	//å®šä¹‰é«˜æ–¯æ ¸åŠå¾„</span><br><span class="line">	int kerR = size / 2;</span><br><span class="line"> </span><br><span class="line">	//å»ºç«‹ä¸€ä¸ªsizeå¤§å°çš„åŠ¨æ€ä¸€ç»´æ•°ç»„</span><br><span class="line">	double *arr = new double[size];</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; size; i++)</span><br><span class="line">	&#123;</span><br><span class="line"> </span><br><span class="line">		// é«˜æ–¯å‡½æ•°å‰çš„å¸¸æ•°å¯ä»¥ä¸ç”¨è®¡ç®—ï¼Œä¼šåœ¨å½’ä¸€åŒ–çš„è¿‡ç¨‹ä¸­ç»™æ¶ˆå»</span><br><span class="line">		arr[i] = exp(-((i - kerR)*(i - kerR)) / (2 * sigma*sigma));</span><br><span class="line">		sum += arr[i];//å°†æ‰€æœ‰çš„å€¼è¿›è¡Œç›¸åŠ </span><br><span class="line"> </span><br><span class="line">	&#125;</span><br><span class="line">	//è¿›è¡Œå½’ä¸€åŒ–	</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; size; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		arr[i] /= sum;</span><br><span class="line">		cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void MyGaussianBlur(Mat_&lt;<span class="built_in">float</span>&gt; &amp;srcImage, Mat_&lt;<span class="built_in">float</span>&gt; &amp;dst, int size)</span><br><span class="line">&#123;</span><br><span class="line">	CV_Assert(srcImage.channels() == 1 || srcImage.channels() == 3); // åªå¤„ç†å•é€šé“æˆ–è€…ä¸‰é€šé“å›¾åƒ</span><br><span class="line">	int kerR = size / 2;</span><br><span class="line">	dst = srcImage.clone();</span><br><span class="line">	int channels = dst.channels();</span><br><span class="line">	double* arr;</span><br><span class="line">	arr = getOneGuassionArray(size, 1);//å…ˆæ±‚å‡ºé«˜æ–¯æ•°ç»„</span><br><span class="line"> </span><br><span class="line">									   //éå†å›¾åƒ æ°´å¹³æ–¹å‘çš„å·ç§¯</span><br><span class="line">	<span class="keyword">for</span> (int i = kerR; i &lt; dst.rows - kerR; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = kerR; j &lt; dst.cols - kerR; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">float</span> GuassionSum[3] = &#123; 0 &#125;;</span><br><span class="line">			//æ»‘çª—æœç´¢å®Œæˆé«˜æ–¯æ ¸å¹³æ»‘</span><br><span class="line">			<span class="keyword">for</span> (int k = -kerR; k &lt;= kerR; k++)</span><br><span class="line">			&#123;</span><br><span class="line"> </span><br><span class="line">				<span class="keyword">if</span> (channels == 1)//å¦‚æœåªæ˜¯å•é€šé“</span><br><span class="line">				&#123;</span><br><span class="line">					GuassionSum[0] += arr[kerR + k] * dst.at&lt;<span class="built_in">float</span>&gt;(i, j + k);//è¡Œä¸å˜ï¼Œåˆ—å˜æ¢ï¼Œå…ˆåšæ°´å¹³æ–¹å‘çš„å·ç§¯</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (channels == 3)//å¦‚æœæ˜¯ä¸‰é€šé“çš„æƒ…å†µ</span><br><span class="line">				&#123;</span><br><span class="line">					Vec3f bgr = dst.at&lt;Vec3f&gt;(i, j + k);</span><br><span class="line">					auto a = arr[kerR + k];</span><br><span class="line">					GuassionSum[0] += a*bgr[0];</span><br><span class="line">					GuassionSum[1] += a*bgr[1];</span><br><span class="line">					GuassionSum[2] += a*bgr[2];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span> (int k = 0; k &lt; channels; k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (GuassionSum[k] &lt; 0)</span><br><span class="line">					GuassionSum[k] = 0;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (GuassionSum[k] &gt; 255)</span><br><span class="line">					GuassionSum[k] = 255;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (channels == 1)</span><br><span class="line">				dst.at&lt;<span class="built_in">float</span>&gt;(i, j) = static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[0]);</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (channels == 3)</span><br><span class="line">			&#123;</span><br><span class="line">				Vec3f bgr = &#123; static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[0]), static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[1]), static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[2]) &#125;;</span><br><span class="line">				dst.at&lt;Vec3f&gt;(i, j) = bgr;</span><br><span class="line">			&#125;</span><br><span class="line"> </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	//ç«–ç›´æ–¹å‘</span><br><span class="line">	<span class="keyword">for</span> (int i = kerR; i &lt; dst.rows - kerR; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = kerR; j &lt; dst.cols - kerR; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">float</span> GuassionSum[3] = &#123; 0 &#125;;</span><br><span class="line">			//æ»‘çª—æœç´¢å®Œæˆé«˜æ–¯æ ¸å¹³æ»‘</span><br><span class="line">			<span class="keyword">for</span> (int k = -kerR; k &lt;= kerR; k++)</span><br><span class="line">			&#123;</span><br><span class="line"> </span><br><span class="line">				<span class="keyword">if</span> (channels == 1)//å¦‚æœåªæ˜¯å•é€šé“</span><br><span class="line">				&#123;</span><br><span class="line">					GuassionSum[0] += arr[kerR + k] * dst.at&lt;<span class="built_in">float</span>&gt;(i + k, j);//è¡Œå˜ï¼Œåˆ—ä¸æ¢ï¼Œå†åšç«–ç›´æ–¹å‘çš„å·ç§¯</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (channels == 3)//å¦‚æœæ˜¯ä¸‰é€šé“çš„æƒ…å†µ</span><br><span class="line">				&#123;</span><br><span class="line">					Vec3f bgr = dst.at&lt;Vec3f&gt;(i + k, j);</span><br><span class="line">					auto a = arr[kerR + k];</span><br><span class="line">					GuassionSum[0] += a*bgr[0];</span><br><span class="line">					GuassionSum[1] += a*bgr[1];</span><br><span class="line">					GuassionSum[2] += a*bgr[2];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span> (int k = 0; k &lt; channels; k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (GuassionSum[k] &lt; 0)</span><br><span class="line">					GuassionSum[k] = 0;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span> (GuassionSum[k] &gt; 255)</span><br><span class="line">					GuassionSum[k] = 255;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (channels == 1)</span><br><span class="line">				dst.at&lt;<span class="built_in">float</span>&gt;(i, j) = static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[0]);</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (channels == 3)</span><br><span class="line">			&#123;</span><br><span class="line">				Vec3f bgr = &#123; static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[0]), static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[1]), static_cast&lt;<span class="built_in">float</span>&gt;(GuassionSum[2]) &#125;;</span><br><span class="line">				dst.at&lt;Vec3f&gt;(i, j) = bgr;</span><br><span class="line">			&#125;</span><br><span class="line"> </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	delete[] arr;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">void harrisResponse(Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussXX, Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussYY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;GaussXY, Mat_&lt;<span class="built_in">float</span>&gt; &amp;resultData,<span class="built_in">float</span> k)</span><br><span class="line">&#123;</span><br><span class="line">	//åˆ›å»ºä¸€å¼ å“åº”å‡½æ•°è¾“å‡ºçš„çŸ©é˜µ</span><br><span class="line">	resultData = Mat_&lt;<span class="built_in">float</span>&gt;(GaussXX.size(), CV_32FC1);</span><br><span class="line">	<span class="keyword">for</span> (int i = 0; i &lt; resultData.rows; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = 0; j &lt; resultData.cols; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">float</span> a = GaussXX.at&lt;<span class="built_in">float</span>&gt;(i, j);</span><br><span class="line">			<span class="built_in">float</span> b = GaussYY.at&lt;<span class="built_in">float</span>&gt;(i, j);</span><br><span class="line">			<span class="built_in">float</span> c = GaussXY.at&lt;<span class="built_in">float</span>&gt;(i, j);</span><br><span class="line">			resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) = a*b - c*c - k*(a + b)*(a + b);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">//éæå¤§å€¼æŠ‘åˆ¶</span><br><span class="line">void LocalMaxValue(Mat_&lt;<span class="built_in">float</span>&gt; &amp;resultData, Mat &amp;srcGray, Mat &amp;ResultImage, int kSize)</span><br><span class="line">&#123;</span><br><span class="line">	int r = kSize / 2;</span><br><span class="line">	ResultImage = srcGray.clone();</span><br><span class="line">	<span class="keyword">for</span> (int i = r; i &lt; ResultImage.rows - r; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (int j = r; j &lt; ResultImage.cols - r; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i - 1, j - 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i - 1, j) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i - 1, j - 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i - 1, j + 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i, j - 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i, j + 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i + 1, j - 1) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i + 1, j) &amp;&amp;</span><br><span class="line">				resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; resultData.at&lt;<span class="built_in">float</span>&gt;(i + 1, j + 1))</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> ((int)resultData.at&lt;<span class="built_in">float</span>&gt;(i, j) &gt; 18000)</span><br><span class="line">				&#123;</span><br><span class="line">					circle(ResultImage, Point(i, j), 5, Scalar(0,0,255), 2, 8, 0);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"> </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/linqianbi/article/details/78930239" target="_blank" rel="noopener">https://blog.csdn.net/linqianbi/article/details/78930239</a></p>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
  </entry>
  <entry>
    <title>ã€VINS-Monoã€‘A Robust and Versatile Monocular Visual-Inertial State Estimator</title>
    <url>/2019/10/19/%E3%80%90VINS%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91%E3%80%91VINS-Mono-A-Robust-and-Versatile-Monocular-Visual-Inertial-State-Estimator/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><font color="gray" size="10"><center>VINS-Monoï¼šä¸€ç§é²æ£’ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨</center></font><p><strong>æ‘˜è¦</strong>ï¼šç”±ä¸€ä¸ªç›¸æœºå’Œä¸€ä¸ªä½æˆæœ¬æƒ¯æ€§æµ‹é‡å•å…ƒ(IMU)ç»„æˆçš„å•ç›®è§†è§‰æƒ¯æ€§ç³»ç»Ÿ(VINS)ï¼Œæ„æˆäº†ç”¨äºåº¦é‡å…­è‡ªç”±åº¦çŠ¶æ€ä¼°è®¡çš„æœ€å°ä¼ æ„Ÿå™¨å¥—ä»¶ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹ç›´æ¥è·ç¦»æµ‹é‡ï¼Œåœ¨IMUå¤„ç†ã€ä¼°è®¡å™¨åˆå§‹åŒ–ã€å¤–éƒ¨æ ‡å®šå’Œéçº¿æ€§ä¼˜åŒ–ç­‰æ–¹é¢æå‡ºäº†é‡å¤§æŒ‘æˆ˜ã€‚æœ¬æ–‡æå‡ºäº†VINS-Monoï¼šä¸€ç§å…·æœ‰é²æ£’æ€§å’Œé€šç”¨æ€§çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ã€‚è¯¥æ–¹æ³•ä»ç”¨äºä¼°è®¡å™¨åˆå§‹åŒ–å’Œæ•…éšœæ¢å¤çš„é²æ£’çš„ç¨‹åºå¼€å§‹ã€‚é‡‡ç”¨ä¸€ç§åŸºäºç´§è€¦åˆã€éçº¿æ€§ä¼˜åŒ–çš„æ–¹æ³•ï¼Œé€šè¿‡èåˆé¢„ç§¯åˆ†åçš„IMUæµ‹é‡å€¼å’Œç‰¹å¾è§‚æµ‹å€¼ï¼Œè·å¾—é«˜ç²¾åº¦çš„è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ã€‚ç»“åˆç´§è€¦åˆæ–¹æ³•ï¼Œå›ç¯æ£€æµ‹æ¨¡å—èƒ½å¤Ÿä»¥æœ€å°çš„è®¡ç®—ä»£ä»·å®ç°é‡å®šä½ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è¿›è¡Œå››è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–ï¼Œä»¥åŠ å¼ºå…¨å±€ä¸€è‡´æ€§ã€‚æˆ‘ä»¬éªŒè¯äº†è¯¥ç³»ç»Ÿåœ¨å…¬å…±æ•°æ®é›†å’ŒçœŸå®ç¯å¢ƒå®éªŒçš„æ€§èƒ½ï¼Œå¹¶ä¸å…¶ä»–æœ€å…ˆè¿›çš„ç®—æ³•è¿›è¡Œäº†æ¯”è¾ƒã€‚æˆ‘ä»¬è¿˜åœ¨MAVå¹³å°ä¸Šæ‰§è¡Œæœºè½½é—­ç¯è‡ªä¸»é£è¡Œï¼Œå¹¶å°†ç®—æ³•ç§»æ¤åˆ°åŸºäºiOSçš„demoä¸­ã€‚ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼Œæœ¬æ–‡æå‡ºçš„å·¥ä½œæ˜¯ä¸€ä¸ªå¯é ã€å®Œæ•´å’Œé€šç”¨çš„ç³»ç»Ÿï¼Œé€‚ç”¨äºéœ€è¦é«˜ç²¾åº¦å®šä½çš„ä¸åŒåº”ç”¨ã€‚æˆ‘ä»¬ä¸ºPCå’ŒiOSç§»åŠ¨è®¾å¤‡å¼€æºäº†æˆ‘ä»¬çš„å®ç°æ–¹æ³•ã€‚<br>å…³é”®è¯ï¼šå•ç›®è§†è§‰æƒ¯æ€§ç³»ç»Ÿï¼ŒçŠ¶æ€ä¼°è®¡ï¼Œä¼ æ„Ÿå™¨èåˆï¼ŒSLAM</p><a id="more"></a>


<h1 id="I-å¼•è¨€"><a href="#I-å¼•è¨€" class="headerlink" title="I. å¼•è¨€"></a>I. å¼•è¨€</h1><p>çŠ¶æ€ä¼°è®¡æ— ç–‘æ˜¯æœºå™¨äººå¯¼èˆªã€è‡ªä¸»é©¾é©¶ã€è™šæ‹Ÿç°å®(VR)å’Œå¢å¼ºç°å®(AR)ç­‰å¹¿æ³›åº”ç”¨ä¸­æœ€åŸºæœ¬çš„æ¨¡å—ã€‚ä»…ä½¿ç”¨å•ç›®æ‘„åƒæœºçš„æ–¹æ³•ç”±äºå…¶ä½“ç§¯å°ã€æˆæœ¬ä½å’Œç¡¬ä»¶è®¾ç½®ç®€å•è€Œè·å¾—äº†ç¤¾ä¼šçš„æå¤§å…´è¶£[1]-[5]ã€‚ç„¶è€Œï¼Œå•ç›®è§†è§‰ç³»ç»Ÿæ— æ³•æ¢å¤åº¦é‡å°ºåº¦ï¼Œå› æ­¤é™åˆ¶äº†å®ƒä»¬åœ¨å®é™…æœºå™¨äººä¸­çš„åº”ç”¨ã€‚è¿‘å¹´æ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ç§å‘å±•è¶‹åŠ¿ï¼Œå³ç”¨ä½æˆæœ¬æƒ¯æ€§æµ‹é‡å•å…ƒ(IMU)è¾…åŠ©å•ç›®è§†è§‰ç³»ç»Ÿã€‚è¿™ç§å•ç›®è§†è§‰-æƒ¯æ€§ç³»ç»Ÿ(VINS)çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å…·æœ‰å¯è§‚æµ‹çš„åº¦é‡å°ºåº¦ï¼Œä»¥åŠç¿»æ»šè§’(roll)å’Œä¿¯ä»°è§’(pitch)ã€‚è¿™è®©éœ€è¦æœ‰å°ºåº¦çš„çŠ¶æ€ä¼°è®¡çš„å¯¼èˆªä»»åŠ¡æˆä¸ºå¯èƒ½ã€‚æ­¤å¤–ï¼Œ==å¯¹IMUæµ‹é‡å€¼çš„ç§¯åˆ†å¯ä»¥æ˜¾è‘—æé«˜è¿åŠ¨è·Ÿè¸ªæ€§èƒ½ï¼Œå¼¥è¡¥å…‰ç…§å˜åŒ–ã€ç¼ºå°‘çº¹ç†çš„åŒºåŸŸæˆ–è¿åŠ¨æ¨¡ç³Šçš„è§†è§‰è½¨è¿¹æŸå¤±çš„å·®è·==ã€‚äº‹å®ä¸Šï¼Œå•ç›®VINSä¸ä»…å¹¿æ³›åº”ç”¨äºç§»åŠ¨æœºå™¨äººã€æ— äººæœºå’Œç§»åŠ¨è®¾å¤‡ä¸Šï¼Œè¿˜æ˜¯æ»¡è¶³å……åˆ†è‡ªæˆ‘æ„ŸçŸ¥å’Œç¯å¢ƒæ„ŸçŸ¥çš„æœ€å°ä¼ æ„Ÿå™¨ã€‚</p>
<p>ç„¶è€Œï¼Œæ‰€æœ‰è¿™äº›ä¼˜ç‚¹éƒ½æ˜¯æœ‰ä»£ä»·çš„ã€‚å¯¹äºå•ç›®VINSï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œéœ€è¦åŠ é€Ÿåº¦æ¿€åŠ±ä»¥æµ‹é‡å°ºåº¦ã€‚è¿™æ„å‘³ç€==å•ç›®VINä¼°è®¡å™¨ä¸èƒ½ä»é™æ­¢çŠ¶æ€å¯åŠ¨ï¼Œè€Œæ˜¯ä»æœªçŸ¥çš„ç§»åŠ¨çŠ¶æ€å‘åŠ¨==ã€‚åŒæ—¶è¦è®¤è¯†åˆ°è§†è§‰æƒ¯æ€§ç³»ç»Ÿé«˜åº¦éçº¿æ€§çš„äº‹å®ï¼Œåœ¨ä¼°è®¡å™¨åˆå§‹åŒ–æ–¹é¢è¿˜æœ‰é‡å¤§æŒ‘æˆ˜ã€‚ä¸¤ä¸ªä¼ æ„Ÿå™¨çš„å­˜åœ¨ä¹Ÿä½¿å¾—æ‘„åƒæœº-IMUçš„å¤–éƒ¨æ ¡å‡†è‡³å…³é‡è¦ã€‚æœ€åï¼Œä¸ºäº†æ¶ˆé™¤åœ¨å¯æ¥å—çš„å¤„ç†çª—å£å†…çš„é•¿æœŸæ¼‚ç§»ï¼Œæå‡ºäº†ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ã€å›ç¯æ£€æµ‹ã€é‡å®šä½å’Œå…¨å±€ä¼˜åŒ–ã€‚</p>
<p>ä¸ºäº†è§£å†³æ‰€æœ‰è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†VINS-Monoï¼Œä¸€ä¸ªé²æ£’ä¸”é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨ã€‚æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå¼€å§‹äºå³æ—¶ä¼°è®¡åˆå§‹åŒ–ã€‚è¿™ä¸ªåˆå§‹åŒ–æ¨¡å—ä¹Ÿç”¨äºæ•…éšœæ¢å¤ã€‚æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªé²æ£’çš„åŸºäºç´§è€¦åˆçš„æ»‘åŠ¨çª—éçº¿æ€§ä¼˜åŒ–çš„å•ç›®è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡(VIO)ã€‚==å•ç›®VIOæ¨¡å—ä¸ä»…æä¾›ç²¾ç¡®çš„å±€éƒ¨å§¿æ€ã€é€Ÿåº¦å’Œæ–¹ä½ä¼°è®¡ï¼Œè€Œä¸”è¿˜ä»¥åœ¨çº¿æ–¹å¼æ‰§è¡Œæ‘„åƒæœºIMUå¤–éƒ¨æ ¡å‡†å’ŒIMUåç½®æ ¡æ­£==ã€‚ä½¿ç”¨DBoW2[6]è¿›è¡Œå›ç¯æ£€æµ‹ã€‚==é‡æ–°å®šä½æ˜¯åœ¨å¯¹å•ç›®VIOè¿›è¡Œç‰¹å¾çº§åˆ«èåˆçš„ç´§è€¦åˆè®¾ç½®ä¸­å®Œæˆ==ã€‚è¿™ä½¿å¾—é‡æ–°å®šä½å…·æœ‰é²æ£’æ€§å’Œç²¾ç¡®æ€§ä¸”æœ‰æœ€å°çš„è®¡ç®—ä»£ä»·ã€‚æœ€åï¼Œå‡ ä½•éªŒè¯çš„å›ç¯è¢«æ·»åŠ åˆ°ä½å§¿å›¾ä¸­ï¼Œå¹¶ä¸”ç”±äºæ¥è‡ªå•ç›®VIOçš„å¯è§‚æµ‹çš„ç¿»æ»šè§’å’Œä¿¯ä»°è§’ï¼Œç”Ÿæˆå››è‡ªç”±åº¦(DOF)ä½å§¿å›¾ä»¥ç¡®ä¿å…¨å±€ä¸€è‡´æ€§ã€‚</p>
<p>VINS-Monoç»“åˆå¹¶æ”¹è¿›äº†æˆ‘ä»¬å…ˆå‰åœ¨å•ç›®è§†è§‰-æƒ¯æ€§èåˆæ–¹é¢çš„å·¥ä½œ[7]-[10]ã€‚å®ƒå»ºç«‹åœ¨æˆ‘ä»¬ç´§è€¦åˆã€åŸºäºä¼˜åŒ–çš„å•ç›®VIOçš„å…¬å¼ä¹‹ä¸Š[7][8]ï¼Œå¹¶ç»“åˆäº†[9]ä¸­å¼•å…¥çš„æ”¹è¿›åˆå§‹åŒ–è¿‡ç¨‹ã€‚[10]ä¸­ç»™å‡ºäº†ç§»æ¤åˆ°ç§»åŠ¨è®¾å¤‡çš„ç¬¬ä¸€æ¬¡å°è¯•ã€‚ä¸æˆ‘ä»¬ä»¥å‰çš„å·¥ä½œç›¸æ¯”ï¼ŒVINS-Monoçš„è¿›ä¸€æ­¥æ”¹è¿›åŒ…æ‹¬æ”¹è¿›çš„å«åç½®æ ¡æ­£çš„IMUé¢„ç§¯åˆ†ã€ç´§è€¦åˆé‡å®šä½ã€å…¨å±€ä½å§¿å›¾ä¼˜åŒ–ã€å¹¿æ³›çš„å®éªŒè¯„ä¼°ä»¥åŠé²æ£’å’Œé€šç”¨çš„å¼€æºå®ç°ã€‚</p>
<p>æ•´ä¸ªç³»ç»Ÿå®Œæ•´ä¸”æ˜“äºä½¿ç”¨ã€‚å®ƒå·²ç»è¢«æˆåŠŸåº”ç”¨äºå°è§„æ¨¡ARåœºæ™¯ã€ä¸­å‹æ— äººæœºå¯¼èˆªå’Œå¤§è§„æ¨¡çŠ¶æ€ä¼°è®¡ä»»åŠ¡ã€‚ä¸å…¶ä»–æœ€å…ˆè¿›çš„æ–¹æ³•ç›¸æ¯”å…·æœ‰ä¼˜å¼‚çš„æ€§èƒ½ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ€»ç»“äº†æˆ‘ä»¬çš„è´¡çŒ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>1ã€ä¸€ä¸ªé²æ£’çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå®ƒèƒ½å¤Ÿä»æœªçŸ¥çš„åˆå§‹çŠ¶æ€å¼•å¯¼ç³»ç»Ÿã€‚<br>2ã€ä¸€ä¸ªç´§è€¦åˆã€åŸºäºä¼˜åŒ–çš„å•ç›®è§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ï¼Œå…·æœ‰ç›¸æœº-IMUå¤–éƒ¨æ ¡å‡†å’ŒIMUåç½®ä¼°è®¡ã€‚<br>3ã€åœ¨çº¿å›ç¯æ£€æµ‹ä¸ç´§è€¦åˆé‡å®šä½ã€‚<br>4ã€å››è‡ªç”±åº¦å…¨å±€ä½å§¿å›¾ä¼˜åŒ–ã€‚<br>5ã€ç”¨äºæ— äººæœºå¯¼èˆªã€å¤§è§„æ¨¡å®šä½å’Œç§»åŠ¨ARåº”ç”¨çš„å®æ—¶æ€§èƒ½æ¼”ç¤ºã€‚<br>6ã€å®Œå…¨é›†æˆäºrosçš„pcç‰ˆæœ¬ä»¥åŠå¯åœ¨iphone 6æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šè¿è¡Œçš„IOSç‰ˆæœ¬çš„å¼€æºä»£ç ã€‚</p>
<p>è®ºæ–‡çš„å…¶ä½™éƒ¨åˆ†å¦‚ä¸‹ï¼šåœ¨ç¬¬äºŒèŠ‚ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ç›¸å…³çš„æ–‡çŒ®ã€‚åœ¨ç¬¬ä¸‰èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¯¹å®Œæ•´çš„ç³»ç»Ÿæ¡†æ¶è¿›è¡Œäº†æ¦‚è¿°ã€‚åœ¨ç¬¬å››èŠ‚ä¸­ï¼Œç»™å‡ºäº†è§†è§‰çš„é¢„å¤„ç†å’ŒIMUæµ‹é‡å€¼çš„é¢„ç§¯åˆ†æ­¥éª¤ã€‚åœ¨ç¬¬äº”èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¼°è®¡å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚åœ¨ç¬¬å…­èŠ‚ä¸­æå‡ºäº†ä¸€ç§ç´§è€¦åˆã€è‡ªæ ‡å®šã€éçº¿æ€§ä¼˜åŒ–çš„å•ç›®VIOã€‚ç¬¬ä¸ƒèŠ‚å’Œç¬¬å…«èŠ‚åˆ†åˆ«ç»™å‡ºäº†ç´§è€¦åˆé‡å®šä½å’Œå…¨å±€ä½å§¿å›¾ä¼˜åŒ–ã€‚å®æ–½ç»†èŠ‚å’Œå®éªŒç»“æœè§ç¬¬ä¹èŠ‚ã€‚æœ€åï¼Œç¬¬åèŠ‚æœ¬æ–‡å¯¹ç ”ç©¶æ–¹å‘è¿›è¡Œäº†æ¢è®¨å’Œå±•æœ›ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019194830365.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h1 id="II-ç›¸å…³å·¥ä½œ"><a href="#II-ç›¸å…³å·¥ä½œ" class="headerlink" title="II. ç›¸å…³å·¥ä½œ"></a>II. ç›¸å…³å·¥ä½œ</h1><p>å…³äºåŸºäºå•ç›®è§†è§‰çš„çŠ¶æ€ä¼°è®¡/é‡Œç¨‹è®¡SLAMçš„å­¦æœ¯å·¥ä½œéå¸¸å¹¿æ³›ã€‚å€¼å¾—æ³¨æ„çš„æ–¹æ³•åŒ…æ‹¬PTAM[1]ã€SVO[2]ã€LSD-SLAM[3]ã€DSO[5]å’ŒORB-SLAM[4]ã€‚æ˜¾ç„¶ï¼Œå°è¯•å¯¹ä»»ä½•æ–¹æ³•è¿›è¡Œå…¨é¢å›é¡¾éƒ½æ— æ³•å®Œæ•´ã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è·³è¿‡äº†å…³äºåªä½¿ç”¨è§†è§‰çš„æ–¹æ³•çš„è®¨è®ºï¼Œè€Œåªä¸“æ³¨äºå…³äºå•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡çš„æœ€ç›¸å…³çš„ç»“æœã€‚<br>å¤„ç†è§†è§‰å’Œæƒ¯æ€§æµ‹é‡çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ¾è€¦åˆçš„ä¼ æ„Ÿå™¨èåˆ[11][12]ï¼Œå…¶ä¸­IMUè¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œç”¨äºè¾…åŠ©è¿åŠ¨çš„è§†è§‰ç»“æ„(sfm)è·å¾—çš„çº¯è§†è§‰ä½å§¿ä¼°è®¡ã€‚èåˆé€šå¸¸ç”±æ‰©å±•å¡å°”æ›¼æ»¤æ³¢(EKF)å®Œæˆï¼Œå…¶ä¸­IMUç”¨äºçŠ¶æ€ä¼ æ’­ï¼Œè€Œè§†è§‰ä½å§¿ç”¨äºæ›´æ–°ã€‚è¿›ä¸€æ­¥è¯´ï¼Œç´§è€¦åˆè§†è§‰æƒ¯æ€§ç®—æ³•è¦ä¹ˆåŸºäºEKF[13]-[15]ï¼Œè¦ä¹ˆåŸºäºå›¾ä¼˜åŒ–[7][8][16][17]ï¼Œå…¶ä¸­ç›¸æœºå’ŒIMUæµ‹é‡å€¼æ˜¯ä»åŸå§‹æµ‹é‡æ°´å¹³è”åˆä¼˜åŒ–çš„ã€‚ä¸€ç§æµè¡Œçš„åŸºäºEKFçš„VIOæ–¹æ³•æ˜¯MSCKF[13][14]ã€‚MSCKFåœ¨çŠ¶æ€å‘é‡ä¸­ç»´æŠ¤ä»¥å‰çš„å‡ ä¸ªæ‘„åƒæœºä½å§¿ï¼Œå¹¶ä½¿ç”¨å¤šä¸ªæ‘„åƒæœºè§†å›¾ä¸­ç›¸åŒç‰¹å¾çš„è§†è§‰æµ‹é‡æ¥å½¢æˆå¤šçº¦æŸæ›´æ–°ã€‚SR-ISWF[18][19]æ˜¯MSCKFçš„æ‰©å±•ã€‚å®ƒé‡‡ç”¨squarerootå½¢å¼[20]å®ç°å•ç²¾åº¦è¡¨ç¤ºï¼Œé¿å…äº†è¾ƒå·®çš„æ•°å€¼æ€§è´¨ã€‚è¯¥æ–¹æ³•é‡‡ç”¨é€†æ»¤æ³¢å™¨è¿›è¡Œè¿­ä»£å†çº¿æ€§åŒ–ï¼Œä½¿å…¶ä¸åŸºäºä¼˜åŒ–çš„ç®—æ³•ç›¸å½“ã€‚æ‰¹é‡å›¾ä¼˜åŒ–æˆ–é›†æŸè°ƒæ•´æŠ€æœ¯ï¼ˆBAï¼‰ç»´æŠ¤å’Œä¼˜åŒ–æ‰€æœ‰æµ‹é‡å€¼ä»¥è·å¾—æœ€ä¼˜çŠ¶æ€ä¼°è®¡ã€‚ä¸ºäº†è¾¾åˆ°æ’å®šçš„å¤„ç†æ—¶é—´ï¼Œ==æµè¡Œçš„åŸºäºå›¾çš„VIOæ–¹æ³•[8][16][17]é€šå¸¸é‡‡ç”¨è¾¹ç¼˜åŒ–è¿‡å»çš„çŠ¶æ€å’Œæµ‹é‡æ¥ä¼˜åŒ–æœ€è¿‘çŠ¶æ€çš„æœ‰ç•Œæ»‘åŠ¨çª—å£==ã€‚ç”±äºå¯¹éçº¿æ€§ç³»ç»Ÿè¿­ä»£æ±‚è§£çš„è®¡ç®—è¦æ±‚å¾ˆé«˜ï¼Œå¾ˆå°‘æœ‰åŸºäºå›¾çš„éçº¿æ€§ç³»ç»Ÿèƒ½å¤Ÿåœ¨èµ„æºå—é™çš„å¹³å°ï¼ˆå¦‚æ‰‹æœºä¸Šï¼‰å®ç°å®æ—¶æ€§èƒ½ã€‚</p>
<p>å¯¹äºè§†è§‰æµ‹é‡å¤„ç†ï¼Œæ ¹æ®è§†å·®æ¨¡å‹çš„å®šä¹‰ï¼Œç®—æ³•å¯åˆ†ä¸ºç›´æ¥æ³•å’Œé—´æ¥æ³•ã€‚ç›´æ¥æ³•[2][3][21]æœ€å°åŒ–å…‰åº¦è¯¯å·®ï¼Œè€Œé—´æ¥æ³•æœ€å°åŒ–å‡ ä½•ä½ç§»ã€‚ç›´æ¥æ³•å› å…¶å¸å¼•åŒºåŸŸå°ï¼Œéœ€è¦å¾ˆå¥½çš„åˆå§‹ä¼°è®¡ï¼Œè€Œé—´æ¥æ³•åœ¨æå–å’ŒåŒ¹é…ç‰¹å¾æ—¶éœ€è¦é¢å¤–çš„è®¡ç®—èµ„æºã€‚é—´æ¥æ³•ç”±äºå…¶æˆç†Ÿæ€§å’Œé²æ£’æ€§ï¼Œåœ¨å®é™…å·¥ç¨‹éƒ¨ç½²ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚ç„¶è€Œï¼Œç›´æ¥æ³•æ›´å®¹æ˜“æ‰©å±•åˆ°ç¨ å¯†å»ºå›¾ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç›´æ¥åœ¨åƒç´ çº§åˆ«ä¸Šæ“ä½œçš„ã€‚</p>
<p>åœ¨å®è·µä¸­ï¼ŒIMUé€šå¸¸ä»¥æ¯”æ‘„åƒæœºæ›´é«˜çš„é€Ÿç‡è·å–æ•°æ®ã€‚ä¸åŒçš„æ–¹æ³•è¢«æå‡ºæ¥å¤„ç†é«˜é€Ÿç‡çš„IMUæµ‹é‡å€¼ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨åŸºäºEKFçš„æ–¹æ³•ä¸­ä½¿ç”¨IMUè¿›è¡ŒçŠ¶æ€ä¼ æ’­[11][13]ã€‚åœ¨å›¾ä¼˜åŒ–å…¬å¼ä¸­ï¼Œä¸ºäº†é¿å…é‡å¤çš„IMUé‡å¤ç§¯åˆ†ï¼Œæå‡ºäº†ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå³IMUé¢„ç§¯åˆ†(IMU pre-integration)ã€‚è¿™ç§æ–¹æ³•åœ¨[22]ä¸­é¦–æ¬¡æå‡ºçš„ï¼Œå®ƒç”¨æ¬§æ‹‰è§’æ¥å‚æ•°åŒ–æ—‹è½¬è¯¯å·®ã€‚åœ¨æˆ‘ä»¬å…ˆå‰çš„å·¥ä½œä¸­[7]ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†æ—‹è½¬å…¬å¼ï¼Œåˆ©ç”¨è¿ç»­IMUè¯¯å·®çŠ¶æ€åŠ¨åŠ›å­¦æ¨å¯¼äº†åæ–¹å·®ä¼ é€’æ–¹ç¨‹ã€‚ç„¶è€ŒIMUåç½®è¢«å¿½ç•¥äº†ã€‚åœ¨[23]ä¸­é€šè¿‡å¢åŠ åéªŒIMUåç½®æ ¡æ­£ï¼Œè¿›ä¸€æ­¥æ”¹è¿›äº†é¢„ç§¯åˆ†ç†è®ºã€‚</p>
<p>ç²¾ç¡®çš„åˆå§‹å€¼å¯¹äºå¼•å¯¼ä»»ä½•å•ç›®VINSæ˜¯è‡³å…³é‡è¦çš„ã€‚åœ¨[8][24]ä¸­æå‡ºäº†ä¸€ç§åˆ©ç”¨çŸ­æœŸIMUé¢„ç§¯åˆ†ç›¸å¯¹æ—‹è½¬çš„çº¿æ€§ä¼°è®¡å™¨åˆå§‹åŒ–æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä¸å¯¹é™€èºä»ªåç½®è¿›è¡Œå»ºæ¨¡ï¼Œæ— æ³•åœ¨åŸå§‹æŠ•å½±æ–¹ç¨‹ä¸­å¯¹ç°ä»£ä¼ æ„Ÿå™¨å™ªå£°è¿›è¡Œå»ºæ¨¡ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“è§†è§‰ç‰¹æ€§è¿œç¦»ä¼ æ„Ÿå™¨å¥—ä»¶æ—¶ï¼Œè¿™ä¼šå¯¼è‡´ä¸å¯é çš„åˆå§‹åŒ–ã€‚åœ¨[25]ä¸­ç»™å‡ºäº†å•ç›®è§†è§‰æƒ¯æ€§åˆå§‹åŒ–é—®é¢˜çš„ä¸€ç§å°é—­è§£ã€‚éšåï¼Œåœ¨[26]ä¸­æå‡ºäº†å¯¹è¿™ç§å°é—­å½¢å¼çš„è§£å†³æ–¹æ¡ˆçš„æ‰©å±•ï¼Œå¢åŠ äº†é™€èºä»ªçš„åç½®æ ¡å‡†ã€‚è¿™äº›æ–¹æ³•ä¾èµ–äºé•¿æ—¶é—´å†…IMUæµ‹é‡çš„åŒé‡ç§¯åˆ†ï¼Œæ— æ³•æ¨¡æ‹Ÿæƒ¯æ€§ç§¯åˆ†çš„ä¸ç¡®å®šæ€§ã€‚åœ¨[27]ä¸­ï¼Œæå‡ºäº†ä¸€ç§åŸºäºSVOçš„é‡åˆå§‹åŒ–å’Œæ•…éšœæ¢å¤ç®—æ³•ã€‚è¿™æ˜¯ä¸€ç§åŸºäºæ¾è€¦åˆèåˆæ¡†æ¶çš„å®ç”¨æ–¹æ³•ã€‚ç„¶è€Œï¼Œéœ€è¦é¢å¤–çš„æœä¸‹çš„è·ç¦»ä¼ æ„Ÿå™¨æ¥æ¢å¤åº¦é‡å°ºåº¦ã€‚åœ¨[17]ä¸­å¼•å…¥äº†ä¸€ç§å»ºç«‹åœ¨ORB-SLAM[4]ä¸Šçš„åˆå§‹åŒ–ç®—æ³•ã€‚ç»™å‡ºäº†ä¸€ç»„ORB-SLAMçš„å…³é”®å¸§ï¼Œè®¡ç®—äº†è§†è§‰æƒ¯æ€§å…¨å±€BAçš„å°ºåº¦ã€é‡åŠ›æ–¹å‘ã€é€Ÿåº¦å’ŒIMUåç½®çš„åˆæ­¥ä¼°è®¡ã€‚ç„¶è€Œï¼Œå°ºåº¦æ”¶æ•›æ‰€éœ€çš„æ—¶é—´å¯èƒ½è¶…è¿‡10ç§’ã€‚è¿™å¯èƒ½ä¼šç»™éœ€è¦åœ¨ä¸€å¼€å§‹å°±è¿›è¡Œå°ºåº¦ä¼°è®¡çš„æœºå™¨äººå¯¼èˆªä»»åŠ¡å¸¦æ¥é—®é¢˜ã€‚</p>
<p>VIOæ–¹æ³•ï¼Œä¸ç®¡å®ƒä»¬æ‰€ä¾èµ–çš„åŸºæœ¬æ•°å­¦å…¬å¼ï¼Œåœ¨å…¨å±€çš„å¹³ç§»å’Œæ—‹è½¬ä¸­é•¿æœŸå—åˆ°æ¼‚ç§»çš„å½±å“ã€‚ä¸ºæ­¤ï¼Œå›ç¯æ£€æµ‹åœ¨é•¿æœŸæ“ä½œä¸­èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ORB-SLAM[4] åˆ©ç”¨äº†è¯è¢‹æ¨¡å‹èƒ½å¤Ÿé—­åˆå›ç¯å¹¶é‡ç”¨åœ°å›¾ã€‚å›ç¯æ£€æµ‹ä¹‹åè¿›è¡Œ7è‡ªç”±åº¦ï¼ˆä½ç½®ã€æ–¹å‘å’Œå°ºåº¦ï¼‰çš„ä½å§¿å›¾ä¼˜åŒ–ã€‚ç›¸å¯¹äºå•ç›®VINSï¼Œç”±äºIMUçš„åŠ å…¥ï¼Œæ¼‚ç§»åªå‘ç”Ÿåœ¨4è‡ªç”±åº¦ï¼Œå³ä¸‰ç»´å¹³ç§»ï¼Œå’Œå›´ç»•é‡åŠ›æ–¹å‘çš„æ—‹è½¬ï¼ˆåèˆªè§’ï¼‰ã€‚å› æ­¤ï¼Œæœ¬æ–‡é€‰æ‹©åœ¨æœ€å°å››è‡ªç”±åº¦è®¾å®šä¸‹ï¼Œä¼˜åŒ–å…·æœ‰å›ç¯çº¦æŸçš„ä½å§¿å›¾ã€‚</p>
<h1 id="III-æ¦‚è¿°"><a href="#III-æ¦‚è¿°" class="headerlink" title="III.æ¦‚è¿°"></a>III.æ¦‚è¿°</h1><p>æå‡ºçš„å•ç›®è§†è§‰æƒ¯æ€§çŠ¶æ€ä¼°è®¡å™¨çš„ç»“æ„å¦‚å›¾2æ‰€ç¤ºã€‚è¯¥ç³»ç»Ÿä»æµ‹é‡é¢„å¤„ç†(IV)å¼€å§‹ï¼Œåœ¨å…¶ä¸­æå–å’Œè·Ÿè¸ªç‰¹å¾ï¼Œå¯¹ä¸¤ä¸ªè¿ç»­å¸§é—´çš„IMUæµ‹é‡å€¼è¿›è¡Œé¢„ç§¯åˆ†ã€‚åˆå§‹åŒ–è¿‡ç¨‹(V)æä¾›äº†æ‰€æœ‰å¿…è¦çš„å€¼ï¼ŒåŒ…æ‹¬å§¿æ€ã€é€Ÿåº¦ã€é‡åŠ›å‘é‡ã€é™€èºä»ªåç½®å’Œä¸‰ç»´ç‰¹å¾ä½ç½®ï¼Œç”¨äºå¼•å¯¼éšåçš„åŸºäºéçº¿æ€§ä¼˜åŒ–çš„VIOã€‚VIO(VI)ä¸é‡å®šä½(VII)æ¨¡å—ç´§å¯†åœ°èåˆäº†é¢„å…ˆç§¯åˆ†çš„IMUæµ‹é‡ã€ç‰¹å¾è§‚æµ‹å’Œå›ç¯é‡æ–°æ£€æµ‹åˆ°çš„ç‰¹å¾ã€‚æœ€åï¼Œä½å§¿å›¾ä¼˜åŒ–æ¨¡å—(VIII)æ¥å—å‡ ä½•éªŒè¯çš„é‡å®šä½ç»“æœï¼Œå¹¶è¿›è¡Œå…¨å±€ä¼˜åŒ–ä»¥æ¶ˆé™¤æ¼‚ç§»ã€‚VIOã€é‡æ–°å®šä½å’Œä½å§¿å›¾ä¼˜åŒ–æ¨¡å—åœ¨å¤šçº¿ç¨‹è®¾ç½®ä¸­åŒæ—¶è¿è¡Œã€‚æ¯ä¸ªæ¨¡å—æœ‰ä¸åŒçš„è¿è¡Œé€Ÿåº¦å’Œå®æ—¶ä¿è¯ï¼Œä»¥ç¡®ä¿åœ¨ä»»ä½•æ—¶å€™å¯é è¿è¡Œã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101920013857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>æˆ‘ä»¬ç°åœ¨å¯¹æ•´ç¯‡è®ºæ–‡ä¸­ä½¿ç”¨çš„ç¬¦å·å’Œåæ ‡ç³»è¿›è¡Œå®šä¹‰ã€‚æˆ‘ä»¬è®¤ä¸º(.)w(.)wæ˜¯ä¸–ç•Œåæ ‡ç³»(world frame)ã€‚é‡åŠ›æ–¹å‘ä¸ä¸–ç•Œåæ ‡ç³»zè½´å¯¹é½ã€‚$(â‹…)b$æ˜¯æœ¬ä½“åæ ‡ç³»(body frame)ï¼Œæˆ‘ä»¬æŠŠå®ƒå®šä¹‰ä¸ºä¸IMUåæ ‡ç³»ç›¸åŒã€‚$(â‹…)c$æ˜¯ç›¸æœºåæ ‡ç³»(camera frame)ã€‚æˆ‘ä»¬åŒæ—¶ä½¿ç”¨æ—‹è½¬çŸ©é˜µRå’ŒHamiltonå››å…ƒæ•°qæ¥è¡¨ç¤ºæ—‹è½¬ã€‚æˆ‘ä»¬ä¸»è¦åœ¨çŠ¶æ€å‘é‡ä¸­ä½¿ç”¨å››å…ƒæ•°ï¼Œä¹Ÿç”¨æ—‹è½¬çŸ©é˜µæ¥è¡¨ç¤ºä¸‰ç»´å‘é‡çš„æ—‹è½¬ã€‚$q<em>{wb}ï¼Œp</em>{wb}$â€‹è¡¨ç¤ºä»æœ¬ä½“åæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»çš„æ—‹è½¬å’Œå¹³ç§»ã€‚$b_k$â€‹è¡¨ç¤ºè·å–ç¬¬kä¸ªå›¾åƒæ—¶çš„æœ¬ä½“åæ ‡ç³»ã€‚$c_k$è¡¨ç¤ºè·å–ç¬¬kä¸ªå›¾åƒæ—¶çš„ç›¸æœºåæ ‡ç³»ã€‚âŠ—è¡¨ç¤ºä¸¤ä¸ªå››å…ƒæ•°ä¹‹é—´çš„ä¹˜æ³•è¿ç®—ã€‚$g_w=[0,0,g]T$æ˜¯ä¸–ç•Œåæ ‡ç³»ä¸Šçš„é‡åŠ›å‘é‡ã€‚æœ€åï¼Œæˆ‘ä»¬å°†(^)è¡¨ç¤ºä¸ºæŸä¸€å…·ä½“é‡çš„å™ªå£°æµ‹é‡å€¼æˆ–ä¼°è®¡å€¼ã€‚</p>
<h1 id="IV-æµ‹é‡é¢„å¤„ç†"><a href="#IV-æµ‹é‡é¢„å¤„ç†" class="headerlink" title="IV.æµ‹é‡é¢„å¤„ç†"></a>IV.æµ‹é‡é¢„å¤„ç†</h1><p>æœ¬èŠ‚ä»‹ç»VIOçš„é¢„å¤„ç†æ­¥éª¤ã€‚å¯¹äºè§†è§‰æµ‹é‡ï¼Œæˆ‘ä»¬è·Ÿè¸ªè¿ç»­å¸§ä¹‹é—´çš„ç‰¹å¾ï¼Œå¹¶åœ¨æœ€æ–°å¸§ä¸­æ£€æµ‹æ–°ç‰¹å¾ã€‚å¯¹äºIMUæµ‹é‡ï¼Œæˆ‘ä»¬åœ¨ä¸¤ä¸ªè¿ç»­å¸§ä¹‹é—´åšé¢„ç§¯åˆ†ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä½æˆæœ¬IMUçš„æµ‹é‡å€¼å—åˆ°åç½®å’Œå™ªå£°çš„å½±å“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨IMUé¢„ç§¯åˆ†è¿‡ç¨‹ä¸­ç‰¹åˆ«è€ƒè™‘åç½®ã€‚</p>
<h2 id="A-è§†è§‰å¤„ç†å‰ç«¯"><a href="#A-è§†è§‰å¤„ç†å‰ç«¯" class="headerlink" title="A.è§†è§‰å¤„ç†å‰ç«¯"></a>A.è§†è§‰å¤„ç†å‰ç«¯</h2><p>å¯¹äºæ¯ä¸€å¹…æ–°å›¾åƒï¼ŒKLTç¨€ç–å…‰æµç®—æ³•å¯¹ç°æœ‰ç‰¹å¾è¿›è¡Œè·Ÿè¸ª[29]ã€‚åŒæ—¶ï¼Œæ£€æµ‹æ–°çš„è§’ç‚¹ç‰¹å¾[30]ä»¥ä¿è¯æ¯ä¸ªå›¾åƒç‰¹å¾çš„æœ€å°æ•°ç›®(100-300)ã€‚è¯¥æ£€æµ‹å™¨é€šè¿‡è®¾ç½®ä¸¤ä¸ªç›¸é‚»ç‰¹å¾ä¹‹é—´åƒç´ çš„æœ€å°é—´éš”æ¥æ‰§è¡Œå‡åŒ€çš„ç‰¹å¾åˆ†å¸ƒã€‚äºŒç»´ç‰¹å¾é¦–å…ˆæ˜¯ä¸å¤±çœŸçš„ï¼Œç„¶ååœ¨é€šè¿‡å¤–ç‚¹å‰”é™¤åæŠ•å½±åˆ°ä¸€ä¸ªå•ä½çƒé¢ä¸Šã€‚åˆ©ç”¨åŸºæœ¬çŸ©é˜µæ¨¡å‹çš„RANSACç®—æ³•è¿›è¡Œå¤–ç‚¹å‰”é™¤ã€‚<br>åœ¨æ­¤æ­¥éª¤ä¸­è¿˜é€‰æ‹©äº†å…³é”®å¸§ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªå…³é”®å¸§é€‰æ‹©æ ‡å‡†ã€‚ç¬¬ä¸€æ˜¯ä¸ä¸Šä¸€ä¸ªå…³é”®å¸§çš„å¹³å‡è§†å·®ã€‚å¦‚æœåœ¨å½“å‰å¸§å’Œæœ€æ–°å…³é”®å¸§ä¹‹é—´è·Ÿè¸ªçš„ç‰¹å¾ç‚¹çš„å¹³å‡è§†å·®è¶…å‡ºæŸä¸ªç‰¹å®šé˜ˆå€¼ï¼Œåˆ™å°†è¯¥å¸§è§†ä¸ºæ–°çš„å…³é”®å¸§ã€‚è¯·æ³¨æ„ï¼Œä¸ä»…å¹³ç§»ï¼Œæ—‹è½¬ä¹Ÿä¼šäº§ç”Ÿè§†å·®ã€‚ç„¶è€Œï¼Œç‰¹å¾ç‚¹æ— æ³•åœ¨çº¯æ—‹è½¬è¿åŠ¨ä¸­ä¸‰è§’åŒ–ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåœ¨è®¡ç®—è§†å·®æ—¶æˆ‘ä»¬ä½¿ç”¨é™€èºä»ªæµ‹é‡å€¼çš„çŸ­æ—¶ç§¯åˆ†æ¥è¡¥å¿æ—‹è½¬ã€‚è¯·æ³¨æ„ï¼Œæ­¤æ—‹è½¬è¡¥å¿ä»…ç”¨äºå…³é”®å¸§é€‰æ‹©ï¼Œè€Œä¸æ¶‰åŠVINSå…¬å¼ä¸­çš„æ—‹è½¬è®¡ç®—ã€‚ä¸ºæ­¤ï¼Œå³ä½¿é™€èºä»ªå«æœ‰è¾ƒå¤§çš„å™ªå£°æˆ–å­˜åœ¨åç½®ï¼Œä¹Ÿåªä¼šå¯¼è‡´æ¬¡ä¼˜çš„å…³é”®å¸§é€‰æ‹©ç»“æœï¼Œä¸ä¼šç›´æ¥å½±å“ä¼°è®¡è´¨é‡ã€‚å¦ä¸€ä¸ªæ ‡å‡†æ˜¯è·Ÿè¸ªè´¨é‡ã€‚å¦‚æœè·Ÿè¸ªçš„ç‰¹å¾æ•°é‡ä½äºæŸä¸€é˜ˆå€¼ï¼Œæˆ‘ä»¬å°†æ­¤å¸§è§†ä¸ºæ–°çš„å…³é”®å¸§ã€‚è¿™ä¸ªæ ‡å‡†æ˜¯ä¸ºäº†é¿å…è·Ÿè¸ªç‰¹å¾å®Œå…¨ä¸¢å¤±ã€‚</p>
<h1 id="B-IMUé¢„ç§¯åˆ†"><a href="#B-IMUé¢„ç§¯åˆ†" class="headerlink" title="B.IMUé¢„ç§¯åˆ†"></a>B.IMUé¢„ç§¯åˆ†</h1><p>IMUé¢„ç§¯åˆ†æ˜¯åœ¨[22]ä¸­é¦–æ¬¡æå‡ºçš„ï¼Œå®ƒå°†æ¬§æ‹‰è§’çš„æ—‹è½¬è¯¯å·®å‚æ•°åŒ–ã€‚åœ¨æˆ‘ä»¬å…ˆå‰çš„å·¥ä½œä¸­[7]ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæµå½¢ä¸Šçš„IMUé¢„ç§¯åˆ†æ—‹è½¬å…¬å¼ã€‚è¯¥æ–‡åˆ©ç”¨è¿ç»­æ—¶é—´çš„IMUè¯¯å·®çŠ¶æ€åŠ¨åŠ›å­¦æ¨å¯¼åæ–¹å·®ä¼ é€’å‡½æ•°ï¼Œä½†å¿½ç•¥äº†IMUåç½®ã€‚æ–‡[23]é€šè¿‡å¢åŠ åéªŒIMUåç½®æ ¡æ­£ï¼Œè¿›ä¸€æ­¥æ”¹è¿›äº†é¢„ç§¯åˆ†ç†è®ºã€‚æœ¬æ–‡é€šè¿‡å¼•å…¥IMUåç½®æ ¡æ­£ï¼Œæ‰©å±•äº†æˆ‘ä»¬åœ¨å‰é¢å·¥ä½œ[7]ä¸­æå‡ºçš„IMUé¢„ç§¯åˆ†ã€‚<br>IMUçš„åŸå§‹é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡æµ‹é‡ç»“æœ$\hat w$ å’Œ$\hat a$å¦‚ä¸‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019201549992.png#pic_center"><br>IMUæµ‹é‡å€¼æ˜¯åœ¨æœ¬ä½“åæ ‡ç³»ä¸­æµ‹é‡çš„ï¼Œå®ƒæ˜¯å¹³è¡¡é‡åŠ›å’Œå¹³å°åŠ¨åŠ›çš„åˆåŠ›ï¼Œå¹¶å—åˆ°åŠ é€Ÿåº¦åç½®$b<em>a$ã€é™€èºä»ªåç½®$b_w$å’Œé™„åŠ å™ªå£°çš„å½±å“ã€‚å‡è®¾åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªæµ‹é‡å€¼ä¸­çš„é™„åŠ å™ªå£°ä¸ºé«˜æ–¯å™ªå£°ï¼Œ$n_aï½N(0,sigma^2_a)$ï¼Œ$n_wï½N(0,sigma^2_w)$â€‹ã€‚åŠ é€Ÿåº¦è®¡åç½®å’Œé™€èºä»ªåç½®è¢«å»ºæ¨¡ä¸ºéšæœºæ¸¸èµ°ï¼Œå…¶å¯¼æ•°ä¸ºé«˜æ–¯æ€§çš„ï¼Œ$n</em>{ba}ï½N(0,Ïƒ^2<em>{ba})$ï¼Œ$n</em>{bw}ï½N(0,Ïƒ^2_{bw})$ã€‚</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019202057834.png#pic_center"></p>
<p>ç»™å®šå¯¹åº”äºä½“åæ ‡ç³»$b<em>k$å’Œ$b</em>{k+1}$çš„ä¸¤ä¸ªæ—¶åˆ»ï¼Œä½ç½®ã€é€Ÿåº¦å’Œæ–¹å‘çŠ¶æ€å¯ä»¥åœ¨æ—¶é—´é—´éš”$[t<em>k,t</em>{k+1}]$é—´ï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹ä¸­é€šè¿‡æƒ¯æ€§æµ‹é‡å€¼ä¼ é€’ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019202237245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>$âˆ†t<em>k$æ˜¯æ—¶é—´é—´éš”$[t_k,t</em>{k+1}]$ä¹‹é—´çš„æŒç»­æ—¶é—´ã€‚</p>
<p>å¯è§ï¼ŒIMUçŠ¶æ€ä¼ é€’éœ€è¦åæ ‡ç³»$b_k$çš„æ—‹è½¬ã€ä½ç½®å’Œé€Ÿåº¦ã€‚å½“è¿™äº›èµ·å§‹çŠ¶æ€æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ä¼ é€’IMUæµ‹é‡å€¼ã€‚ç‰¹åˆ«æ˜¯åœ¨åŸºäºä¼˜åŒ–çš„ç®—æ³•ä¸­ï¼Œæ¯æ¬¡è°ƒæ•´ä½å§¿æ—¶ï¼Œéƒ½éœ€è¦åœ¨å®ƒä»¬ä¹‹é—´é‡æ–°ä¼ é€’IMUæµ‹é‡å€¼ã€‚è¿™ç§ä¼ é€’ç­–ç•¥åœ¨è®¡ç®—ä¸Šè¦æ±‚å¾ˆé«˜ã€‚ä¸ºäº†é¿å…é‡æ–°ä¼ é€’ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†é¢„ç§¯åˆ†ç®—æ³•ã€‚<br>å°†å‚è€ƒåæ ‡ç³»ä»ä¸–ç•Œåæ ‡ç³»è½¬å˜ä¸ºå±€éƒ¨åæ ‡ç³»$b_k$åï¼Œæˆ‘ä»¬åªèƒ½å¯¹çº¿æ€§çš„åŠ é€Ÿåº¦$\hat a$å’Œè§’é€Ÿåº¦$\hat w$ç›¸å…³çš„éƒ¨åˆ†è¿›è¡Œé¢„ç§¯åˆ†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019202449110.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019202554843.png#pic_center"></p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101920251370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å¯ä»¥çœ‹å‡ºé¢„ç§¯åˆ†é¡¹(6)èƒ½é€šè¿‡å°†$b<em>k$è§†ä¸ºå‚è€ƒå¸§çš„IMUæµ‹é‡å€¼å•ç‹¬å¾—åˆ°ã€‚$Î±^{b_k}</em>{k+1}$ã€$Î²^{b-k}b<em>{k+1}$ã€$Î³^{b-k}</em>{k+1}$åªä¸$b<em>k$å’Œ$b</em>{k+1}$ä¸­çš„IMUåç½®æœ‰å…³ï¼Œä¸å…¶ä»–çŠ¶æ€æ— å…³ã€‚å½“åç½®ä¼°è®¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‹¥åç½®å˜åŒ–å¾ˆå°ï¼Œæˆ‘ä»¬å°†$Î±^{bk}<em>{k+1}ã€Î²^{bk}b</em>{k+1}ã€Î³^{bk}_{k+1}$æŒ‰å…¶å¯¹åç½®çš„ä¸€é˜¶è¿‘ä¼¼æ¥è°ƒæ•´ï¼Œå¦åˆ™å°±è¿›è¡Œé‡æ–°ä¼ é€’ã€‚è¿™ç§ç­–ç•¥ä¸ºåŸºäºä¼˜åŒ–çš„ç®—æ³•èŠ‚çœäº†å¤§é‡çš„è®¡ç®—èµ„æºï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦é‡å¤ä¼ é€’IMUæµ‹é‡å€¼ã€‚</p>
<p>å¯¹äºç¦»æ•£æ—¶é—´çš„å®ç°ï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ•°å€¼ç§¯åˆ†æ–¹æ³•ï¼Œå¦‚æ¬§æ‹‰ç§¯åˆ†ã€ä¸­ç‚¹ç§¯åˆ†ã€RK4ç§¯åˆ†ç­‰ã€‚è¿™é‡Œé€‰æ‹©äº†æ¬§æ‹‰ç§¯åˆ†æ¥æ¼”ç¤ºæ˜“äºç†è§£çš„è¿‡ç¨‹(æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ä¸­ç‚¹ç§¯åˆ†)ã€‚</p>
<p>åœ¨å¼€å§‹æ—¶ï¼Œ$\alpha^{bk}<em>{k}$ã€$Î²^{bk}</em>{k}$æ˜¯0ï¼Œ$\gamma^{bk}<em>{k}$æ˜¯å•ä½å››å…ƒæ•°ã€‚$Î±$ï¼Œ$Î²$ï¼Œ$Î³$åœ¨(6)ä¸­çš„å¹³å‡å€¼æ˜¯å¦‚ä¸‹é€æ­¥ä¼ é€’çš„ã€‚æ³¨æ„ï¼Œå¢åŠ çš„å™ªå£°é¡¹$n_a$ï¼Œ$n_w$æ˜¯æœªçŸ¥çš„ï¼Œåœ¨å®ç°ä¸­è¢«è§†ä¸ºé›¶ã€‚è¿™å¾—åˆ°äº†é¢„ç§¯åˆ†çš„ä¼°è®¡å€¼ï¼Œæ ‡è®°ä¸º$(\hatâ‹…)$ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203125870.png#pic_center"><br>iæ˜¯åœ¨$[t_k,t</em>{k+1}]$ä¸­IMUæµ‹é‡å€¼å¯¹åº”çš„ç¦»æ•£æ—¶åˆ»ï¼Œ$Î´_t$æ˜¯IMUæµ‹é‡å€¼iå’Œi+1ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚</p>
<p>ç„¶åè®¨è®ºåæ–¹å·®ä¼ é€’é—®é¢˜ã€‚ç”±äºå››ç»´æ—‹è½¬å››å…ƒæ•°$Î³^{b_k}_t$è¢«è¿‡å‚æ•°åŒ–ï¼Œæˆ‘ä»¬å°†å…¶è¯¯å·®é¡¹å®šä¹‰ä¸ºå›´ç»•å…¶å¹³å‡å€¼çš„æ‰°åŠ¨ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203259791.png#pic_center"><br>å…¶ä¸­$Î´Î¸^{b_k}_t$æ˜¯ä¸‰ç»´å°æ‰°åŠ¨ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¯¼å‡ºè¯¯å·®é¡¹çš„è¿ç»­æ—¶é—´çº¿æ€§åŒ–æ–¹ç¨‹(6)ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203414375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>$P^{bk}<em>{b</em>{k+1}}$å¯ä»¥é€šè¿‡åˆå§‹åæ–¹å·®$P^{b<em>k}</em>{b<em>k}=0$çš„ä¸€é˜¶ç¦»æ•£æ—¶é—´åæ–¹å·®æ›´æ–°é€’å½’è®¡ç®—ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203627976.png#pic_center"><br>å…¶ä¸­Qæ˜¯å™ªå£°çš„å¯¹è§’çº¿åæ–¹å·®çŸ©é˜µ$(Ïƒ^2_a,Ïƒ^2_w,Ïƒ^2</em>{b<em>a},Ïƒ^2</em>{b_w})$</p>
<p>åŒæ—¶ï¼Œ$Î´z<em>{b</em>{k+1}}^{b<em>k}$â€‹çš„ä¸€é˜¶é›…å¯æ¯”çŸ©é˜µ$J</em>{b<em>{k+1}}$â€‹â€‹ç›¸å¯¹äºÎ´zbkâ€‹bkâ€‹â€‹ä¹Ÿå¯ä»¥ç”¨åˆå§‹é›…å¯æ¯”çŸ©é˜µ$J</em>{b<em>k}=I$ é€’å½’è®¡ç®—ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203912837.png#pic_center"><br>åˆ©ç”¨è¿™ä¸ªé€’æ¨å…¬å¼ï¼Œå¾—åˆ°åæ–¹å·®çŸ©é˜µ$P^{b_k}</em>{b<em>{k+1}}$â€‹â€‹å’Œé›…å¯æ¯”çŸ©é˜µ$J^{b_k}</em>{b<em>{k+1}}$â€‹â€‹ã€$Î±^{b_k}</em>{b<em>{k+1}}$ã€$Î²^{b_k}</em>{b<em>{k+1}}$ã€$Î³^{b_k}</em>{b<em>{k+1}}$å…³äºåç½®çš„ä¸€é˜¶è¿‘ä¼¼å¯ä»¥å†™ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019203947220.png#pic_center"><br>å…¶ä¸­$J^Î±</em>{b<em>a}$æ˜¯$J_b{k+1}$ä¸­çš„å­å—çŸ©é˜µï¼Œå…¶ä½ç½®å¯¹åº”äº$\frac{Î´Î±^{b_k}</em>{b<em>{k+1}}}{Î´b</em>{a<em>k}}$ã€‚<br>$J^Î±</em>{b<em>w}ã€J^Î²</em>{b<em>a}ã€J^Î²</em>{b<em>w}ã€J^Î³</em>{b_w}$ä¹Ÿä½¿ç”¨åŒæ ·çš„å«ä¹‰ã€‚å½“åç½®ä¼°è®¡å‘ç”Ÿè½»å¾®å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨(12)è¿‘ä¼¼æ ¡æ­£é¢„ç§¯åˆ†ç»“æœï¼Œè€Œä¸é‡æ–°ä¼ é€’ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å†™ä¸‹IMUæµ‹é‡æ¨¡å‹æ‰€å…¶å¯¹åº”çš„åæ–¹å·®$P^{b<em>k}</em>{b_{k+1}}$ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204124533.png#pic_center"></p>
<h1 id="V-ä¼°è®¡å™¨åˆå§‹åŒ–"><a href="#V-ä¼°è®¡å™¨åˆå§‹åŒ–" class="headerlink" title="V.ä¼°è®¡å™¨åˆå§‹åŒ–"></a>V.ä¼°è®¡å™¨åˆå§‹åŒ–</h1><p>å•ç›®ç´§è€¦åˆVIOæ˜¯ä¸€ä¸ªé«˜åº¦éçº¿æ€§çš„ç³»ç»Ÿã€‚ç”±äºå•ç›®ç›¸æœºæ— æ³•ç›´æ¥è§‚æµ‹åˆ°å°ºåº¦ï¼Œå› æ­¤ï¼Œå¦‚æœæ²¡æœ‰è‰¯å¥½çš„åˆå§‹å€¼ï¼Œå¾ˆéš¾ç›´æ¥å°†è¿™ä¸¤ç§æµ‹é‡ç»“æœèåˆåœ¨ä¸€èµ·ã€‚å¯ä»¥å‡è®¾ä¸€ä¸ªé™æ­¢çš„åˆå§‹æ¡ä»¶æ¥å¯åŠ¨å•ç›®VINSä¼°è®¡å™¨ã€‚ç„¶è€Œï¼Œè¿™ç§å‡è®¾æ˜¯ä¸åˆé€‚çš„ï¼Œå› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ç»å¸¸ä¼šé‡åˆ°è¿åŠ¨ä¸‹çš„åˆå§‹åŒ–ã€‚å½“IMUæµ‹é‡ç»“æœè¢«å¤§åç½®ç ´åæ—¶ï¼Œæƒ…å†µå°±å˜å¾—æ›´åŠ å¤æ‚äº†ã€‚äº‹å®ä¸Šï¼Œåˆå§‹åŒ–é€šå¸¸æ˜¯å•ç›®VINSæœ€è„†å¼±çš„æ­¥éª¤ã€‚éœ€è¦ä¸€ä¸ªé²æ£’çš„åˆå§‹åŒ–è¿‡ç¨‹ä»¥ç¡®ä¿ç³»ç»Ÿçš„é€‚ç”¨æ€§ã€‚</p>
<p>æˆ‘ä»¬é‡‡ç”¨æ¾è€¦åˆçš„ä¼ æ„Ÿå™¨èåˆæ–¹æ³•å¾—åˆ°åˆå§‹å€¼ã€‚æˆ‘ä»¬å‘ç°çº¯è§†è§‰SLAMï¼Œæˆ–ä»è¿åŠ¨ä¸­æ¢å¤ç»“æ„(SfM)ï¼Œå…·æœ‰è‰¯å¥½çš„åˆå§‹åŒ–æ€§è´¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œçº¯è§†è§‰ç³»ç»Ÿå¯ä»¥é€šè¿‡ä»ç›¸å¯¹è¿åŠ¨æ–¹æ³•ï¼ˆå¦‚å…«ç‚¹æ³•[32]æˆ–äº”ç‚¹æ³•[33]æˆ–ä¼°è®¡å•åº”æ€§çŸ©é˜µï¼‰ä¸­å¯¼å‡ºåˆå§‹å€¼æ¥å¼•å¯¼è‡ªå·±ã€‚é€šè¿‡å¯¹é½IMUé¢„ç§¯åˆ†ä¸çº¯è§†è§‰SfMç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç²—ç•¥åœ°æ¢å¤å°ºåº¦ã€é‡åŠ›ã€é€Ÿåº¦ï¼Œç”šè‡³åç½®ã€‚è¿™è¶³ä»¥å¼•å¯¼éçº¿æ€§å•ç›®VINSä¼°è®¡å™¨ï¼Œå¦‚å›¾4æ‰€ç¤ºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204212487.png#pic_center"><br>ä¸åœ¨åˆå§‹é˜¶æ®µåŒæ—¶ä¼°è®¡é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡åç½®çš„[17]ç›¸æ¯”ï¼Œæˆ‘ä»¬åœ¨åˆå§‹é˜¶æ®µé€‰æ‹©å¿½ç•¥åŠ é€Ÿåº¦è®¡åç½®é¡¹ã€‚åŠ é€Ÿåº¦è®¡åç½®ä¸é‡åŠ›è€¦åˆï¼Œä¸”ç”±äºé‡åŠ›å‘é‡ç›¸å¯¹äºå¹³å°åŠ¨åŠ›å­¦çš„å¤§é‡çº§ï¼Œä»¥åŠåˆå§‹é˜¶æ®µç›¸å¯¹è¾ƒçŸ­ï¼Œè¿™äº›åç½®é¡¹å¾ˆéš¾è¢«è§‚æµ‹åˆ°ã€‚æˆ‘ä»¬ä»¥å‰çš„å·¥ä½œå¯¹åŠ é€Ÿåº¦è®¡åç½®æ ‡å®šè¿›è¡Œäº†è¯¦ç»†çš„åˆ†æ[34]ã€‚</p>
<h1 id="A-æ»‘åŠ¨çª—å£-Sliding-Window-çº¯è§†è§‰SfM"><a href="#A-æ»‘åŠ¨çª—å£-Sliding-Window-çº¯è§†è§‰SfM" class="headerlink" title="A. æ»‘åŠ¨çª—å£(Sliding Window)çº¯è§†è§‰SfM"></a>A. æ»‘åŠ¨çª—å£(Sliding Window)çº¯è§†è§‰SfM</h1><p>åˆå§‹åŒ–è¿‡ç¨‹ä»çº¯è§†è§‰SfMä¼°è®¡ç›¸æœºå°ºåº¦ä½å§¿(up-to-scale)å’Œç‰¹å¾ä½ç½®å›¾å¼€å§‹ã€‚</p>
<p>æˆ‘ä»¬ä¿æŒäº†ä¸€ä¸ªå¸§çš„æ»‘åŠ¨çª—å£æ¥é™åˆ¶è®¡ç®—å¤æ‚åº¦ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥äº†æœ€æ–°å¸§ä¸ä¹‹å‰æ‰€æœ‰å¸§ä¹‹é—´çš„ç‰¹å¾å¯¹åº”ã€‚å¦‚æœæˆ‘ä»¬èƒ½åœ¨æ»‘åŠ¨çª—å£ä¸­çš„æœ€æ–°å¸§å’Œä»»ä½•å…¶ä»–å¸§ä¹‹é—´ï¼Œæ‰¾åˆ°ç¨³å®šçš„ç‰¹å¾è·Ÿè¸ª(è¶…è¿‡30ä¸ªè·Ÿè¸ªç‰¹å¾)å’Œè¶³å¤Ÿçš„è§†å·®(è¶…è¿‡20ä¸ªçš„æ—‹è½¬è¡¥å¿åƒç´ )ï¼Œæˆ‘ä»¬ä½¿ç”¨äº”ç‚¹æ³•[33]æ¢å¤è¿™ä¸¤ä¸ªå¸§ä¹‹é—´çš„ç›¸å¯¹æ—‹è½¬å’Œå°ºåº¦å¹³ç§»ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†æœ€æ–°çš„å¸§ä¿å­˜åœ¨çª—å£ä¸­ï¼Œå¹¶ç­‰å¾…æ–°çš„å¸§ã€‚å¦‚æœäº”ç‚¹ç®—æ³•æˆåŠŸçš„è¯ï¼Œæˆ‘ä»¬ä»»æ„è®¾ç½®å°ºåº¦ï¼Œå¹¶å¯¹è¿™ä¸¤ä¸ªå¸§ä¸­è§‚å¯Ÿåˆ°çš„æ‰€æœ‰ç‰¹å¾è¿›è¡Œä¸‰è§’åŒ–ã€‚åŸºäºè¿™äº›ä¸‰è§’ç‰¹å¾ï¼Œé‡‡ç”¨PnP[35]æ¥ä¼°è®¡çª—å£ä¸­æ‰€æœ‰å…¶ä»–å¸§çš„å§¿æ€ã€‚æœ€åï¼Œåº”ç”¨å…¨å±€å…‰æŸå¹³å·®æ³•(BA)[36]æœ€å°åŒ–æ‰€æœ‰ç‰¹å¾è§‚æµ‹çš„é‡æŠ•å½±è¯¯å·®ã€‚ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•ä¸–ç•Œåæ ‡ç³»çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªç›¸æœºåæ ‡ç³»$(Â·)^{c<em>0}$è®¾ç½®ä¸ºSfMçš„å‚è€ƒåæ ‡ç³»ã€‚æ‰€æœ‰å¸§çš„ä½å§¿$(\bar p^{c0}</em>{c<em>k}ï¼Œq^{c0}</em>{c_k})$å’Œç‰¹å¾ä½ç½®è¡¨ç¤ºç›¸å¯¹äº$(Â·)^{c_0}$ã€‚å‡è®¾æ‘„åƒæœºå’ŒIMUä¹‹é—´æœ‰ä¸€ä¸ªç²—ç•¥æµ‹é‡çš„å¤–éƒ¨å‚æ•°$(p^b_c,q^b_c)$ï¼Œæˆ‘ä»¬å¯ä»¥å°†å§¿æ€ä»ç›¸æœºåæ ‡ç³»è½¬æ¢åˆ°ç‰©ä½“(IMU)åæ ‡ç³»ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/201910192045598.png#pic_center"><br>å…¶ä¸­sæ˜¯åŒ¹é…è§†è§‰ç»“æ„ä¸è·ç¦»å°ºåº¦çš„å°ºåº¦å‚æ•°ï¼Œè§£å‡ºå°ºåº¦å‚æ•°æ˜¯å®ç°æˆåŠŸåˆå§‹åŒ–çš„å…³é”®ã€‚</p>
<h2 id="B-è§†è§‰æƒ¯æ€§æ ¡å‡†"><a href="#B-è§†è§‰æƒ¯æ€§æ ¡å‡†" class="headerlink" title="B. è§†è§‰æƒ¯æ€§æ ¡å‡†"></a>B. è§†è§‰æƒ¯æ€§æ ¡å‡†</h2><p>1ï¼‰é™€èºä»ªåç½®æ ‡å®šï¼šè€ƒè™‘çª—å£ä¸­è¿ç»­ä¸¤å¸§bkå’Œbk+1ï¼Œæˆ‘ä»¬ä»è§†è§‰sfMä¸­å¾—åˆ°æ—‹è½¬$q^{c0}<em>{b_k}$å’Œ$q^{c0}</em>{b<em>{k+1}}$â€‹â€‹ï¼Œä»IMUé¢„ç§¯åˆ†å¾—åˆ°çš„ç›¸å¯¹çº¦æŸ$Î³^{b_k}</em>{b<em>{k+1}}$â€‹ã€‚æˆ‘ä»¬å¯¹é™€èºä»ªåç½®æ±‚IMUé¢„ç§¯åˆ†é¡¹çš„çº¿æ€§åŒ–ï¼Œå¹¶æœ€å°åŒ–ä»¥ä¸‹ä»£ä»·å‡½æ•°ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204702396.png#pic_center"><br>å…¶ä¸­Bä»£è¡¨çª—å£çš„æ‰€æœ‰å¸§ã€‚åˆ©ç”¨ç¬¬å››éƒ¨åˆ†å¯¼å‡ºçš„åç½®é›…å¯æ¯”ï¼Œç»™å‡ºäº†$Î³^{b_k}</em>{b<em>{k+1}}$â€‹å¯¹é™€èºä»ªåç½®çš„ä¸€é˜¶è¿‘ä¼¼ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†é™€èºä»ªåç½®bwçš„åˆå§‹æ ¡å‡†ã€‚ç„¶åæˆ‘ä»¬ç”¨æ–°çš„é™€èºä»ªåç½®é‡æ–°ä¼ é€’æ‰€æœ‰çš„IMUé¢„ç§¯åˆ†é¡¹$\hat Î±^{b_k}</em>{b<em>{k+1}}ã€\hat Î²^{b_k}</em>{b<em>{k+1}}ã€\hat Î³^{b_k}</em>{b_{k+1}}$ ã€‚</p>
<p>2ï¼‰é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦åˆå§‹åŒ–ï¼šåœ¨é™€èºä»ªåç½®åˆå§‹åŒ–åï¼Œæˆ‘ä»¬ç»§ç»­åˆå§‹åŒ–å¯¼èˆªçš„å…¶ä»–åŸºæœ¬çŠ¶æ€ï¼Œå³é€Ÿåº¦ã€é‡åŠ›å‘é‡å’Œå°ºåº¦ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204809433.png#pic_center"><br>å…¶ä¸­ï¼Œ$v^{b<em>k}</em>{b_k}$â€‹â€‹æ˜¯ç¬¬kå¸§å›¾åƒæœ¬ä½“åæ ‡ç³»çš„é€Ÿåº¦ï¼Œ$g^{c_0}$æ˜¯$c_0$åæ ‡ç³»ä¸­çš„é‡åŠ›å‘é‡ï¼Œsæ˜¯å•ç›®SfMåˆ°å…¬åˆ¶å•ä½çš„å°ºåº¦ã€‚</p>
<p>è€ƒè™‘çª—å£ä¸­ä¸¤ä¸ªè¿ç»­å¸§$b<em>k$å’Œ$b</em>{k+1}$ï¼Œé‚£ä¹ˆ(5)å¯ä»¥å†™æˆï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205047939.png#pic_center"><br>æˆ‘ä»¬å¯ä»¥å°†(14)å’Œ(17)åˆå¹¶æˆä»¥ä¸‹çº¿æ€§æµ‹é‡æ¨¡å‹ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019204900731.png#pic_center"><br>å¯ä»¥çœ‹å‡ºï¼Œ$R^{c<em>0}</em>{b<em>k}ï¼ŒR^{c_0}</em>{b<em>{k+1}}ï¼Œ\hat p^{c_0}</em>{c<em>k}ï¼Œ\hat p^{c_0}</em>{c_{k+1}}$æ˜¯ä»å¸¦å°ºåº¦çš„å•ç›®è§†è§‰ä¸­å¾—åˆ°çš„ï¼Œ$âˆ†t_k$æ˜¯ä¸¤ä¸ªè¿ç»­å¸§ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚é€šè¿‡æ±‚è§£çº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205002105.png#pic_center"><br>æˆ‘ä»¬å¯ä»¥å¾—åˆ°çª—å£ä¸­æ¯ä¸€å¸§çš„æœ¬ä½“åæ ‡ç³»é€Ÿåº¦ï¼Œè§†è§‰å‚ç…§ç³»$(Â·)^{c_0}$çš„é‡åŠ›å‘é‡ï¼Œä»¥åŠå°ºåº¦å‚æ•°ã€‚</p>
<p>3ï¼‰é‡åŠ›ç»†åŒ–ï¼šé€šè¿‡çº¦æŸé‡å€¼ï¼Œå¯ä»¥å¯¹åŸçº¿æ€§åˆå§‹åŒ–æ­¥éª¤å¾—åˆ°çš„é‡åŠ›å‘é‡è¿›è¡Œç»†åŒ–ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé‡åŠ›å‘é‡çš„å¤§å°æ˜¯å·²çŸ¥çš„ã€‚è¿™å¯¼è‡´é‡åŠ›å‘é‡åªå‰©2ä¸ªè‡ªç”±åº¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨å…¶åˆ‡çº¿ç©ºé—´ä¸Šç”¨ä¸¤ä¸ªå˜é‡é‡æ–°å‚æ•°åŒ–é‡åŠ›ã€‚å‚æ•°åŒ–å°†é‡åŠ›å‘é‡è¡¨ç¤ºä¸º<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205157776.png#pic_center"><br>å…¶ä¸­gæ˜¯å·²çŸ¥çš„é‡åŠ›å¤§å°ï¼Œ$\bar {\hat g}$â€‹â€‹æ˜¯è¡¨ç¤ºé‡åŠ›æ–¹å‘çš„å•ä½å‘é‡ï¼Œb1å’Œb2æ˜¯è·¨è¶Šåˆ‡å¹³é¢çš„ä¸¤ä¸ªæ­£äº¤åŸºï¼Œå¦‚å›¾5æ‰€ç¤ºï¼Œw1å’Œw2åˆ†åˆ«æ˜¯åœ¨b1å’Œb2ä¸Šçš„å¯¹åº”ä½ç§»ã€‚é€šè¿‡ç®—æ³•1çš„å‰ä¹˜è¿ç®—ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ç»„b1ã€b2ã€‚ç„¶åç”¨</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101920522547.png#pic_center"><br>ä»£æ›¿(17)ä¸­çš„gï¼Œå¹¶ä¸å…¶å®ƒçŠ¶æ€å˜é‡ä¸€èµ·æ±‚è§£w1å’Œw2ã€‚æ­¤è¿‡ç¨‹è¿­ä»£åˆ°$\bar {\hat g}$æ”¶æ•›ä¸ºæ­¢ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205247493.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205318309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>4ï¼‰å®Œæˆåˆå§‹åŒ–ï¼šç»è¿‡å¯¹é‡åŠ›å‘é‡çš„ç»†åŒ–ï¼Œé€šè¿‡å°†é‡åŠ›æ—‹è½¬åˆ°zè½´ä¸Šï¼Œå¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸æ‘„åƒæœºåæ ‡ç³»c0ä¹‹é—´çš„æ—‹è½¬$q^w_{c_0}$â€‹ã€‚ç„¶åæˆ‘ä»¬å°†æ‰€æœ‰å˜é‡ä»å‚è€ƒåæ ‡ç³»$(Â·)^{c_0}$ æ—‹è½¬åˆ°ä¸–ç•Œåæ ‡ç³»$(Â·)^w$ã€‚æœ¬ä½“åæ ‡ç³»çš„é€Ÿåº¦ä¹Ÿå°†è¢«æ—‹è½¬åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚è§†è§‰SfMçš„å˜æ¢çŸ©é˜µå°†è¢«ç¼©æ”¾åˆ°åº¦é‡å•ä½ã€‚æ­¤æ—¶ï¼Œåˆå§‹åŒ–è¿‡ç¨‹å·²ç»å®Œæˆï¼Œæ‰€æœ‰è¿™äº›åº¦é‡å€¼éƒ½å°†è¢«è¾“å…¥åˆ°ä¸€ä¸ªç´§è€¦åˆçš„å•ç›®VIOä¸­ã€‚</p>
<h1 id="VI-ç´§è€¦åˆå•ç›®VIO"><a href="#VI-ç´§è€¦åˆå•ç›®VIO" class="headerlink" title="VI. ç´§è€¦åˆå•ç›®VIO"></a>VI. ç´§è€¦åˆå•ç›®VIO</h1><p>åœ¨ä¼°è®¡å™¨åˆå§‹åŒ–åï¼Œæˆ‘ä»¬é‡‡ç”¨åŸºäºæ»‘åŠ¨çª—å£çš„ç´§è€¦åˆå•ç›®VIOè¿›è¡Œé«˜ç²¾åº¦å’Œé²æ£’çš„çŠ¶æ€ä¼°è®¡ã€‚å›¾3æ˜¾ç¤ºäº†æ»‘åŠ¨çª—å£çš„å›¾ç¤ºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205519675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"></p>
<h2 id="A-å…¬å¼"><a href="#A-å…¬å¼" class="headerlink" title="A. å…¬å¼"></a>A. å…¬å¼</h2><p>æ»‘åŠ¨çª—å£ä¸­çš„å®Œæ•´çŠ¶æ€å‘é‡å®šä¹‰ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205554259.png#pic_center"><br>å…¶ä¸­$x_k$æ˜¯æ•è·ç¬¬kå›¾åƒæ—¶çš„IMUçŠ¶æ€ã€‚å®ƒåŒ…å«äº†IMUåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®ã€é€Ÿåº¦å’Œæ–¹å‘ï¼Œä»¥åŠåœ¨IMUæœ¬ä½“åæ ‡ç³»ä¸­çš„åŠ é€Ÿåº¦è®¡åç½®å’Œé™€èºä»ªåç½®ã€‚næ˜¯å…³é”®å¸§çš„æ€»æ•°ï¼Œmæ˜¯æ»‘åŠ¨çª—å£ä¸­çš„ç‰¹å¾æ€»æ•°ï¼Œ$Î»_l$æ˜¯ç¬¬ä¸€æ¬¡è§‚æµ‹åˆ°ç¬¬lä¸ªç‰¹å¾çš„é€†æ·±åº¦ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨è§†è§‰æƒ¯æ€§BAã€‚æˆ‘ä»¬æœ€å°åŒ–æ‰€æœ‰æµ‹é‡æ®‹å·®çš„å…ˆéªŒå’ŒMahalanobisèŒƒæ•°ä¹‹å’Œï¼Œå¾—åˆ°æœ€å¤§åéªŒä¼°è®¡ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205631782.png#pic_center"><br>$r<em>Bâ€‹(z^{b_k}</em>{b_{k+1}},X)$å’Œ$r_C(\hat z_l^{c_j},X)$åˆ†åˆ«æ˜¯IMUå’Œè§†è§‰æµ‹é‡çš„æ®‹å·®ã€‚æ®‹å·®çš„è¯¦ç»†å®šä¹‰å°†åœ¨ç¬¬å…­èŠ‚çš„Bå’ŒCä¸­æå‡ºã€‚Bæ˜¯æ‰€æœ‰IMUæµ‹é‡çš„é›†åˆï¼ŒCæ˜¯åœ¨å½“å‰æ»‘åŠ¨çª—å£ä¸­è‡³å°‘è§‚å¯Ÿåˆ°ä¸¤æ¬¡çš„ä¸€ç»„ç‰¹å¾ã€‚${r_p,H_p}$æ˜¯æ¥è‡ªè¾¹ç¼˜åŒ–çš„å…ˆéªŒä¿¡æ¯ã€‚Ceres Solver[38]è¢«ç”¨æ¥è§£å†³è¿™ä¸ªéçº¿æ€§é—®é¢˜ã€‚</p>
<h2 id="B-IMUæµ‹é‡æ®‹å·®"><a href="#B-IMUæµ‹é‡æ®‹å·®" class="headerlink" title="B. IMUæµ‹é‡æ®‹å·®"></a>B. IMUæµ‹é‡æ®‹å·®</h2><p>è€ƒè™‘æ»‘åŠ¨çª—å£ä¸­è¿ç»­ä¸¤ä¸ªå¸§$b<em>k$å’Œ$b</em>{k+1}$å†…çš„IMUæµ‹é‡ï¼Œæ ¹æ®(13)ä¸­å®šä¹‰çš„IMUæµ‹é‡æ¨¡å‹ï¼Œé¢„ç§¯åˆ†IMUæµ‹é‡çš„æ®‹å·®å¯ä»¥å®šä¹‰ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205738287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>å…¶ä¸­ï¼Œ$[Â·]<em>{xyz}$æ˜¯æå–å››å…ƒæ•°qçš„å‘é‡éƒ¨åˆ†ï¼Œä»¥è¿›è¡Œè¯¯å·®çŠ¶æ€è¡¨ç¤ºã€‚$Î´Î¸^{bk}</em>{b<em>{k+1}}$â€‹â€‹æ˜¯å››å…ƒæ•°çš„ä¸‰ç»´è¯¯å·®çŠ¶æ€è¡¨ç¤ºã€‚$[\hat Î±^{b_k}</em>{b{k+1}}ã€\hat Î²^{b<em>k}</em>{b{k+1}}      \hat Î³^{b<em>k}</em>{b{k+1}}]^T$æ˜¯åœ¨ä¸¤ä¸ªè¿ç»­å›¾åƒå¸§çš„é—´éš”æ—¶é—´å†…ä½¿ç”¨ä»…åŒ…å«å™ªå£°çš„åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªæµ‹é‡å€¼é¢„ç§¯åˆ†çš„IMUæµ‹é‡é¡¹ã€‚åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªåç½®ä¹ŸåŒ…æ‹¬åœ¨åœ¨çº¿æ ¡æ­£çš„å‰©ä½™é¡¹ä¸­ã€‚</p>
<h2 id="C-è§†è§‰æµ‹é‡æ®‹å·®"><a href="#C-è§†è§‰æµ‹é‡æ®‹å·®" class="headerlink" title="C. è§†è§‰æµ‹é‡æ®‹å·®"></a>C. è§†è§‰æµ‹é‡æ®‹å·®</h2><p>ä¸åœ¨å¹¿ä¹‰å›¾åƒå¹³é¢ä¸Šå®šä¹‰é‡æŠ•å½±è¯¯å·®çš„ä¼ ç»Ÿé’ˆå­”ç›¸æœºæ¨¡å‹ç›¸æ¯”ï¼Œæˆ‘ä»¬åœ¨å•ä½çƒé¢ä¸Šå®šä¹‰æ‘„åƒæœºçš„æµ‹é‡æ®‹å·®ã€‚å‡ ä¹æ‰€æœ‰ç±»å‹ç›¸æœºçš„å…‰å­¦ï¼ŒåŒ…æ‹¬å¹¿è§’ã€é±¼çœ¼æˆ–å…¨å‘ç›¸æœºï¼Œéƒ½å¯ä»¥æ¨¡æ‹Ÿä¸ºè¿æ¥å•ä½çƒä½“è¡¨é¢çš„å•ä½å°„çº¿ã€‚å‡è®¾ç¬¬lä¸ªç‰¹å¾åœ¨ç¬¬iå¹…å›¾åƒä¸­è¢«ç¬¬ä¸€æ¬¡è§‚å¯Ÿåˆ°ï¼Œç¬¬jå¹…å›¾åƒä¸­çš„ç‰¹å¾è§‚æµ‹çš„æ®‹å·®å®šä¹‰ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019205925902.png#pic_center"><br>å…¶ä¸­$[u^{c_i}_l,v^{c_i}_l]$æ˜¯ç¬¬ä¸€æ¬¡è§‚æµ‹åˆ°å‡ºç°åœ¨ç¬¬iå›¾åƒä¸­çš„ç¬¬lä¸ªç‰¹å¾ã€‚$[\hat u^{c_i}_l,\hat v^{c_i}_l]$æ˜¯åœ¨ç¬¬jå›¾åƒä¸­å¯¹ç›¸åŒç‰¹å¾çš„è§‚å¯Ÿã€‚$Ï€^{âˆ’1}_c$â€‹æ˜¯åˆ©ç”¨æ‘„åƒæœºå†…å‚å°†åƒç´ ä½ç½®è½¬æ¢æˆå•ä½å‘é‡çš„åæŠ•å½±å‡½æ•°ã€‚ç”±äºè§†è§‰æ®‹å·®çš„è‡ªç”±åº¦æ˜¯2ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ®‹å·®å‘é‡æŠ•å½±åˆ°åˆ‡å¹³é¢ä¸Šã€‚å¦‚å›¾6æ‰€ç¤ºï¼Œb1ã€b2æ˜¯åœ¨åˆ‡å¹³é¢$\hat {\bar P^{c_j}_l}$ä¸Šçš„ä¸¤ä¸ªä»»æ„é€‰æ‹©çš„æ­£äº¤åŸºã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰¾åˆ°ä¸€ç»„$b_1ã€b_2$ï¼Œå¦‚ç®—æ³•1æ‰€ç¤ºã€‚åœ¨(22)ä¸­ä½¿ç”¨çš„$P^{c_j}_l$â€‹â€‹æ˜¯æ­£åˆ‡ç©ºé—´ä¸­å›ºå®šé•¿åº¦çš„æ ‡å‡†åæ–¹å·®ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210021988.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="D-è¾¹ç¼˜åŒ–"><a href="#D-è¾¹ç¼˜åŒ–" class="headerlink" title="D. è¾¹ç¼˜åŒ–"></a>D. è¾¹ç¼˜åŒ–</h2><p>ä¸ºäº†é™åˆ¶åŸºäºä¼˜åŒ–çš„VIOçš„è®¡ç®—å¤æ‚åº¦ï¼Œæœ¬æ–‡å¼•å…¥äº†è¾¹ç¼˜åŒ–ã€‚æˆ‘ä»¬æœ‰é€‰æ‹©åœ°ä»æ»‘åŠ¨çª—å£ä¸­å°†IMUçŠ¶æ€xKå’Œç‰¹å¾Î»1è¾¹ç¼˜åŒ–ï¼ŒåŒæ—¶å°†å¯¹åº”äºè¾¹ç¼˜çŠ¶æ€çš„æµ‹é‡å€¼è½¬æ¢ä¸ºå…ˆéªŒã€‚</p>
<p>å¦‚å›¾7æ‰€ç¤ºï¼Œå½“å€’æ•°ç¬¬äºŒå¸§æ˜¯å…³é”®å¸§æ—¶ï¼Œå®ƒå°†åœç•™åœ¨çª—å£ä¸­ï¼Œè€Œæœ€æ—§çš„å¸§ä¸å…¶ç›¸åº”çš„æµ‹é‡å€¼è¢«è¾¹ç¼˜åŒ–ã€‚ä½†å¦‚æœå€’æ•°ç¬¬äºŒå¸§æ˜¯éå…³é”®å¸§ï¼Œæˆ‘ä»¬ä¸¢æ‰è§†è§‰æµ‹é‡å€¼ï¼Œä¿ç•™è¿æ¥åˆ°è¿™ä¸ªéå…³é”®å¸§çš„IMUæµ‹é‡å€¼ã€‚ä¸ºäº†ä¿æŒç³»ç»Ÿçš„ç¨€ç–æ€§ï¼Œæˆ‘ä»¬ä¸ä¼šè¾¹ç¼˜åŒ–éå…³é”®å¸§çš„æ‰€æœ‰æµ‹é‡å€¼ã€‚æˆ‘ä»¬çš„è¾¹ç¼˜åŒ–æ–¹æ¡ˆæ—¨åœ¨ä¿æŒçª—å£ä¸­ç©ºé—´åˆ†ç¦»çš„å…³é”®å¸§ã€‚è¿™ç¡®ä¿äº†ç‰¹å¾ä¸‰è§’åŒ–æœ‰è¶³å¤Ÿçš„è§†å·®ï¼Œå¹¶ä¸”æœ€å¤§åŒ–äº†åœ¨å¤§æ¿€åŠ±ä¸‹è·å¾—åŠ é€Ÿåº¦è®¡æµ‹é‡å€¼çš„æ¦‚ç‡ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210401727.png#pic_center"></p>
<h2 id="E-æ‘„åƒæœºé€Ÿç‡çŠ¶æ€ä¼°è®¡çš„çº¯è¿åŠ¨è§†è§‰æƒ¯æ€§BA"><a href="#E-æ‘„åƒæœºé€Ÿç‡çŠ¶æ€ä¼°è®¡çš„çº¯è¿åŠ¨è§†è§‰æƒ¯æ€§BA" class="headerlink" title="E. æ‘„åƒæœºé€Ÿç‡çŠ¶æ€ä¼°è®¡çš„çº¯è¿åŠ¨è§†è§‰æƒ¯æ€§BA"></a>E. æ‘„åƒæœºé€Ÿç‡çŠ¶æ€ä¼°è®¡çš„çº¯è¿åŠ¨è§†è§‰æƒ¯æ€§BA</h2><p>å¯¹äºè®¡ç®—èƒ½åŠ›è¾ƒä½çš„è®¾å¤‡å¦‚æ‰‹æœºï¼Œç”±äºå¯¹éçº¿æ€§ä¼˜åŒ–çš„è®¡ç®—è¦æ±‚å¾ˆé«˜ï¼Œç´§è€¦åˆå•ç›®VIOæ— æ³•å®ç°æ‘„åƒæœºé€Ÿç‡è¾“å‡ºã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§è½»é‡çº§çš„çº¯è¿åŠ¨è§†è§‰æƒ¯æ€§BAï¼Œä»¥æå‡çŠ¶æ€ä¼°è®¡é€Ÿç‡åˆ°ç›¸æœºé€Ÿç‡(30Hz)ã€‚</p>
<p>çº¯è¿åŠ¨å•ç›®è§†è§‰æƒ¯æ€§BAçš„ä»£ä»·å‡½æ•°ä¸(22)ä¸­å•ç›®VIOçš„ä»£ä»·å‡½æ•°ç›¸åŒã€‚ç„¶è€Œæˆ‘ä»¬åªå¯¹å›ºå®šæ•°é‡çš„æœ€æ–°IMUçŠ¶æ€çš„å§¿æ€å’Œé€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ–ï¼Œè€Œä¸æ˜¯å¯¹æ»‘åŠ¨çª—å£ä¸­çš„æ‰€æœ‰çŠ¶æ€è¿›è¡Œä¼˜åŒ–ã€‚æˆ‘ä»¬å°†ç‰¹å¾æ·±åº¦ã€å¤–éƒ¨å‚æ•°ã€åç½®å’Œæ—§çš„IMUçŠ¶æ€è¿™äº›ä¸å¸Œæœ›ä¼˜åŒ–çš„çŠ¶æ€ä½œä¸ºå¸¸é‡æ¥å¤„ç†ã€‚æˆ‘ä»¬ä½¿ç”¨æ‰€æœ‰çš„è§†è§‰å’Œæƒ¯æ€§æµ‹é‡æ¥è¿›è¡Œçº¯è¿åŠ¨çš„BAã€‚è¿™å¯¼è‡´äº†æ¯”å•å¸§PnPæ–¹æ³•æ›´å¹³æ»‘çš„çŠ¶æ€ä¼°è®¡ã€‚å›¾8æ˜¾ç¤ºäº†æå‡ºæ–¹æ³•çš„æ’å›¾ã€‚ä¸åœ¨æœ€å…ˆè¿›çš„åµŒå…¥å¼è®¡ç®—æœºä¸Šå¯èƒ½å¯¼è‡´è¶…è¿‡50msçš„å®Œå…¨ç´§è€¦åˆå•ç›®VIOä¸åŒï¼Œè¿™ç§çº¯è¿åŠ¨çš„è§†è§‰æƒ¯æ€§BAåªéœ€å¤§çº¦5msæ¥è®¡ç®—ã€‚è¿™ä½¿å¾—ä½å»¶è¿Ÿçš„ç›¸æœºé¢‘ç‡è¿›è¡Œä½å§¿ä¼°è®¡å¯¹æ— äººæœºå’ŒARåº”ç”¨ç‰¹åˆ«æœ‰åˆ©ã€‚<br>F. IMUå‰å‘ä¼ é€’ä»¥è¾¾åˆ°IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡</p>
<p>IMUæµ‹é‡çš„é€Ÿåº¦è¿œé«˜äºè§†è§‰æµ‹é‡ã€‚è™½ç„¶æˆ‘ä»¬çš„VIOé¢‘ç‡å—åˆ°å›¾åƒæ•è·é¢‘ç‡çš„é™åˆ¶ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡æœ€è¿‘çš„IMUæµ‹é‡æ¥ç›´æ¥ä¼ é€’æœ€æ–°çš„VIOä¼°è®¡ï¼Œä»¥è¾¾åˆ°IMUé€Ÿç‡çš„æ€§èƒ½ã€‚é«˜é¢‘çŠ¶æ€ä¼°è®¡å¯ä»¥ä½œä¸ºå›ç¯æ£€æµ‹çš„çŠ¶æ€åé¦ˆã€‚åˆ©ç”¨è¿™ç§IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡è¿›è¡Œçš„è‡ªä¸»é£è¡Œå®éªŒåœ¨ç¬¬ä¹èŠ‚çš„Dä¸­ç»™å‡ºã€‚</p>
<h2 id="F-IMUå‰å‘ä¼ é€’ä»¥è¾¾åˆ°IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡"><a href="#F-IMUå‰å‘ä¼ é€’ä»¥è¾¾åˆ°IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡" class="headerlink" title="F. IMUå‰å‘ä¼ é€’ä»¥è¾¾åˆ°IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡"></a>F. IMUå‰å‘ä¼ é€’ä»¥è¾¾åˆ°IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡</h2><p>IMUæµ‹é‡çš„é€Ÿåº¦è¿œé«˜äºè§†è§‰æµ‹é‡ã€‚è™½ç„¶æˆ‘ä»¬çš„VIOé¢‘ç‡å—åˆ°å›¾åƒæ•è·é¢‘ç‡çš„é™åˆ¶ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡æœ€è¿‘çš„IMUæµ‹é‡æ¥ç›´æ¥ä¼ é€’æœ€æ–°çš„VIOä¼°è®¡ï¼Œä»¥è¾¾åˆ°IMUé€Ÿç‡çš„æ€§èƒ½ã€‚é«˜é¢‘çŠ¶æ€ä¼°è®¡å¯ä»¥ä½œä¸ºå›ç¯æ£€æµ‹çš„çŠ¶æ€åé¦ˆã€‚åˆ©ç”¨è¿™ç§IMUé€Ÿç‡çŠ¶æ€ä¼°è®¡è¿›è¡Œçš„è‡ªä¸»é£è¡Œå®éªŒåœ¨ç¬¬ä¹èŠ‚çš„Dä¸­ç»™å‡ºã€‚</p>
<h2 id="G-æ•…éšœæ£€æµ‹ä¸æ¢å¤"><a href="#G-æ•…éšœæ£€æµ‹ä¸æ¢å¤" class="headerlink" title="G. æ•…éšœæ£€æµ‹ä¸æ¢å¤"></a>G. æ•…éšœæ£€æµ‹ä¸æ¢å¤</h2><p>è™½ç„¶æˆ‘ä»¬ç´§è€¦åˆçš„å•ç›®è§†è§‰å¯¹å„ç§å…·æœ‰æŒ‘æˆ˜æ€§çš„ç¯å¢ƒå’Œè¿åŠ¨æ˜¯é²æ£’çš„ã€‚ç”±äºå¼ºçƒˆçš„å…‰ç…§å˜åŒ–æˆ–å‰§çƒˆçš„è¿åŠ¨ï¼Œæ•…éšœä»ç„¶æ˜¯ä¸å¯é¿å…çš„ã€‚ä¸»åŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤ç­–ç•¥å¯ä»¥æé«˜ç³»ç»Ÿçš„å®ç”¨æ€§ã€‚æ•…éšœæ£€æµ‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå®ƒæ£€æµ‹ä¼°è®¡å™¨çš„å¼‚å¸¸è¾“å‡ºã€‚æˆ‘ä»¬ç›®å‰ä½¿ç”¨ä»¥ä¸‹æ ‡å‡†è¿›è¡Œæ•…éšœæ£€æµ‹ï¼š<br>1ã€åœ¨æœ€æ–°å¸§ä¸­è·Ÿè¸ªçš„ç‰¹å¾æ•°å°äºæŸä¸€é˜ˆå€¼ï¼›<br>2ã€æœ€è¿‘ä¸¤ä¸ªä¼°è®¡å™¨è¾“å‡ºä¹‹é—´çš„ä½ç½®æˆ–æ—‹è½¬æœ‰è¾ƒå¤§çš„ä¸è¿ç»­æ€§ï¼›<br>3ã€åç½®æˆ–å¤–éƒ¨å‚æ•°ä¼°è®¡æœ‰è¾ƒå¤§çš„å˜åŒ–ï¼›</p>
<p>ä¸€æ—¦æ£€æµ‹åˆ°æ•…éšœï¼Œç³»ç»Ÿå°†åˆ‡æ¢å›åˆå§‹åŒ–é˜¶æ®µã€‚ä¸€æ—¦å•ç›®VIOè¢«æˆåŠŸåˆå§‹åŒ–ï¼Œå°†æ–°å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½å§¿å›¾ã€‚</p>
<h1 id="VII-é‡å®šä½"><a href="#VII-é‡å®šä½" class="headerlink" title="VII. é‡å®šä½"></a>VII. é‡å®šä½</h1><p>æˆ‘ä»¬çš„æ»‘åŠ¨çª—å£å’Œè¾¹ç¼˜åŒ–æ–¹æ¡ˆé™åˆ¶äº†è®¡ç®—çš„å¤æ‚æ€§ï¼Œä½†ä¹Ÿç»™ç³»ç»Ÿå¸¦æ¥äº†ç´¯ç§¯æ¼‚ç§»ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæ¼‚ç§»å‘ç”Ÿåœ¨å…¨å±€ä¸‰ç»´ä½ç½®(x,y,z)å’Œå›´ç»•é‡åŠ›æ–¹å‘çš„æ—‹è½¬(yaw)ã€‚ä¸ºäº†æ¶ˆé™¤æ¼‚ç§»ï¼Œæå‡ºäº†ä¸€ç§ä¸å•ç›®VIOæ— ç¼é›†æˆçš„ç´§è€¦åˆé‡å®šä½æ¨¡å—ã€‚é‡å®šä½è¿‡ç¨‹ä»ä¸€ä¸ªå¾ªç¯æ£€æµ‹æ¨¡å—å¼€å§‹ï¼Œè¯¥æ¨¡å—è¯†åˆ«å·²ç»è®¿é—®è¿‡çš„åœ°æ–¹ã€‚ç„¶åå»ºç«‹å›ç¯æ£€æµ‹å€™é€‰å¸§å’Œå½“å‰å¸§ä¹‹é—´çš„ç‰¹å¾çº§è¿æ¥ã€‚è¿™äº›ç‰¹å¾çš„å¯¹åº”å…³ç³»ç´§å¯†åœ°é›†æˆåˆ°å•ç›®VIOæ¨¡å—ä¸­ï¼Œä»è€Œä»¥æœ€å°è®¡ç®—ä»£ä»·å¾—åˆ°æ— æ¼‚ç§»çŠ¶æ€ä¼°è®¡ã€‚å¤šä¸ªç‰¹å¾çš„å¤šä¸ªè§‚æµ‹ç›´æ¥ç”¨äºé‡å®šä½ï¼Œä»è€Œæé«˜äº†å®šä½çš„ç²¾åº¦å’ŒçŠ¶æ€ä¼°è®¡çš„å¹³æ»‘æ€§ã€‚é‡å®šä½è¿‡ç¨‹å¦‚å›¾9(a)æ‰€ç¤ºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210456719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="B-ç‰¹å¾æ¢å¤"><a href="#B-ç‰¹å¾æ¢å¤" class="headerlink" title="B. ç‰¹å¾æ¢å¤"></a>B. ç‰¹å¾æ¢å¤</h2><p>å½“æ£€æµ‹åˆ°å›è·¯æ—¶ï¼Œé€šè¿‡æ£€ç´¢ç‰¹å¾å¯¹åº”å…³ç³»å»ºç«‹å±€éƒ¨æ»‘åŠ¨çª—å£ä¸å›ç¯å€™é€‰å¸§ä¹‹é—´çš„è¿æ¥ã€‚é€šè¿‡BRIEFæè¿°å­åŒ¹é…æ‰¾åˆ°å¯¹åº”å…³ç³»ã€‚ç›´æ¥æè¿°å­åŒ¹é…å¯èƒ½ä¼šé€ æˆå¤§é‡å¼‚å¸¸å€¼ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤æ­¥è¿›è¡Œå‡ ä½•å¼‚å¸¸å€¼å‰”é™¤ï¼Œå¦‚å›¾10æ‰€ç¤ºã€‚<br>1ã€2D-2Dï¼šRANSAC[31]çš„åŸºæœ¬çŸ©é˜µæ£€éªŒã€‚æˆ‘ä»¬åˆ©ç”¨å½“å‰å›¾åƒä¸­æ£€ç´¢åˆ°çš„ç‰¹å¾çš„äºŒç»´è§‚æµ‹å’Œå›ç¯å€™é€‰å›¾åƒè¿›è¡ŒåŸºæœ¬çŸ©é˜µæ£€éªŒã€‚<br>2ã€3D-2Dï¼šRANSACçš„PNPæ£€éªŒã€‚åŸºäºç‰¹å¾åœ¨å±€éƒ¨æ»‘åŠ¨çª—å£ä¸­å·²çŸ¥çš„ä¸‰ç»´ä½ç½®ï¼Œä»¥åŠå›ç¯å€™é€‰å›¾åƒä¸­çš„äºŒç»´è§‚æµ‹ï¼Œè¿›è¡ŒPNPæ£€éªŒã€‚</p>
<p>å½“å†…ç‚¹è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œæˆ‘ä»¬å°†è¯¥å€™é€‰å¸§è§†ä¸ºæ­£ç¡®çš„å¾ªç¯æ£€æµ‹å¹¶æ‰§è¡Œé‡å®šä½ã€‚</p>
<h2 id="C-ç´§è€¦åˆé‡å®šä½"><a href="#C-ç´§è€¦åˆé‡å®šä½" class="headerlink" title="C. ç´§è€¦åˆé‡å®šä½"></a>C. ç´§è€¦åˆé‡å®šä½</h2><p>é‡å®šä½è¿‡ç¨‹æœ‰æ•ˆåœ°ä½¿å•ç›®VIO(VI)ç»´æŒçš„å½“å‰æ»‘åŠ¨çª—å£ä¸è¿‡å»çš„ä½å§¿å›¾å¯¹é½ã€‚åœ¨é‡å®šä½è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰å›ç¯å¸§çš„ä½å§¿ä½œä¸ºå¸¸é‡ã€‚åˆ©ç”¨æ‰€æœ‰IMUæµ‹é‡å€¼ã€å±€éƒ¨è§†è§‰æµ‹é‡å’Œä»å›ç¯ä¸­æå–ç‰¹å¾å¯¹åº”å€¼ï¼Œå…±åŒä¼˜åŒ–æ»‘åŠ¨çª—å£ã€‚æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ä¸ºå›ç¯å¸§vè§‚å¯Ÿåˆ°çš„æ£€ç´¢ç‰¹å¾ç¼–å†™è§†è§‰æµ‹é‡æ¨¡å‹ï¼Œä½¿å…¶ä¸VIOä¸­çš„è§†è§‰æµ‹é‡ç›¸åŒï¼Œå¦‚(25)æ‰€ç¤ºã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œä»ä½å§¿å›¾(VIII)æˆ–ç›´æ¥ä»ä¸Šä¸€ä¸ªé‡Œç¨‹è®¡çš„è¾“å‡ºï¼ˆå¦‚æœè¿™æ˜¯ç¬¬ä¸€æ¬¡é‡å®šä½ï¼‰è·å¾—çš„å›ç¯å¸§çš„å§¿æ€$(\hat q^w_v,\hat p^w_v)$<br>(q^â€‹vwâ€‹,p^â€‹vwâ€‹)è¢«è§†ä¸ºå¸¸æ•°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨(22)ä¸­ç¨å¾®ä¿®æ”¹éçº¿æ€§ä»£ä»·å‡½æ•°ï¼Œå¢åŠ å›ç¯é¡¹ï¼š</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210641949.png#pic_center"><br>å…¶ä¸­Læ˜¯å›ç¯å¸§ä¸­æ£€ç´¢åˆ°çš„ç‰¹å¾çš„è§‚æµ‹é›†ã€‚$(l,v)$æ˜¯æŒ‡åœ¨å›ç¯å¸§vä¸­è§‚å¯Ÿåˆ°çš„ç¬¬lä¸ªç‰¹å¾ã€‚è™½ç„¶ä»£ä»·å‡½æ•°ä¸(22)ç•¥æœ‰ä¸åŒï¼Œä½†å¾…è§£çŠ¶æ€çš„ç»´æ•°ä¿æŒä¸å˜ï¼Œå› ä¸ºå›ç¯å¸§çš„æ„æˆè¢«è§†ä¸ºå¸¸æ•°ã€‚å½“ç”¨å½“å‰æ»‘åŠ¨çª—å£å»ºç«‹å¤šä¸ªå›ç¯æ—¶ï¼Œæˆ‘ä»¬åŒæ—¶ä½¿ç”¨æ¥è‡ªæ‰€æœ‰å¸§çš„æ‰€æœ‰å›ç¯ç‰¹å¾å¯¹åº”è¿›è¡Œä¼˜åŒ–ã€‚è¿™å°±ä¸ºé‡å®šä½æä¾›äº†å¤šè§†è§’çš„çº¦æŸï¼Œä»è€Œæé«˜äº†å®šä½çš„ç²¾åº¦å’Œå¹³æ»‘æ€§ã€‚è¯·æ³¨æ„ï¼Œè¿‡å»çš„å§¿æ€å’Œå›ç¯å¸§çš„å…¨å±€ä¼˜åŒ–å‘ç”Ÿåœ¨é‡å®šä½ä¹‹åï¼Œå°†åœ¨ç¬¬å…«èŠ‚ä¸­è®¨è®ºã€‚</p>
<h1 id="VIII-å…¨å±€ä½å§¿å›¾ä¼˜åŒ–"><a href="#VIII-å…¨å±€ä½å§¿å›¾ä¼˜åŒ–" class="headerlink" title="VIII. å…¨å±€ä½å§¿å›¾ä¼˜åŒ–"></a>VIII. å…¨å±€ä½å§¿å›¾ä¼˜åŒ–</h1><p>é‡æ–°å®šä½åï¼Œå±€éƒ¨æ»‘åŠ¨çª—å£ç§»åŠ¨å¹¶ä¸è¿‡å»çš„ä½å§¿å¯¹é½ã€‚åˆ©ç”¨é‡å®šä½ç»“æœï¼Œå¼€å‘äº†é¢å¤–çš„ä½å§¿å›¾ä¼˜åŒ–æ­¥éª¤ï¼Œä»¥ç¡®ä¿è¿‡å»ä½å§¿é›†æ³¨å†Œåˆ°å…¨å±€ä¸€è‡´çš„é…ç½®ä¸­ã€‚</p>
<p>ç”±äºè§†è§‰æƒ¯æ€§çš„å»ºç«‹ä½¿ç¿»æ»šè§’å’Œä¿¯ä»°è§’å®Œå…¨å¯è§‚æµ‹ï¼Œç´¯ç§¯æ¼‚ç§»åªå‘ç”Ÿåœ¨å››ä¸ªè‡ªç”±åº¦(xï¼Œyï¼Œzå’Œyaw)ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿½è§†å¯¹æ— æ¼‚ç§»ç¿»æ»šå’Œä¿¯ä»°çŠ¶æ€çš„ä¼°è®¡ï¼Œåªè¿›è¡Œäº†å››è‡ªç”±åº¦ä½å§¿å›¾çš„ä¼˜åŒ–ã€‚</p>
<h2 id="A-åœ¨ä½å§¿å›¾ä¸­æ·»åŠ å…³é”®å¸§"><a href="#A-åœ¨ä½å§¿å›¾ä¸­æ·»åŠ å…³é”®å¸§" class="headerlink" title="A. åœ¨ä½å§¿å›¾ä¸­æ·»åŠ å…³é”®å¸§"></a>A. åœ¨ä½å§¿å›¾ä¸­æ·»åŠ å…³é”®å¸§</h2><p>å½“å…³é”®å¸§ä»æ»‘åŠ¨çª—å£è¢«è¾¹ç¼˜åŒ–æ—¶ï¼Œå®ƒå°†è¢«æ·»åŠ åˆ°ä½å§¿å›¾ä¸­ã€‚è¿™ä¸ªå…³é”®å¸§åœ¨ä½å§¿å›¾ä¸­ä½œä¸ºé¡¶ç‚¹ï¼Œå®ƒé€šè¿‡ä¸¤ç§ç±»å‹çš„è¾¹ä¸å…¶ä»–é¡¶ç‚¹è¿æ¥ï¼š</p>
<p>1ï¼‰é¡ºåºè¾¹(Sequential Edge)ï¼šå…³é”®å¸§å°†å»ºç«‹ä¸ä¹‹å‰å…³é”®å¸§çš„è‹¥å¹²é¡ºåºè¾¹ã€‚é¡ºåºè¾¹è¡¨ç¤ºå±€éƒ¨æ»‘åŠ¨çª—å£ä¸­ä¸¤ä¸ªå…³é”®å¸§ä¹‹é—´çš„ç›¸å¯¹è½¬æ¢ï¼Œå…¶å€¼ç›´æ¥ä»VIOä¸­è·å–ã€‚è€ƒè™‘åˆ°æ–°è¾¹ç¼˜åŒ–çš„å…³é”®å¸§iåŠå…¶å…ˆå‰çš„ä¸€ä¸ªå…³é”®å¸§jï¼Œé¡ºåºè¾¹åªåŒ…å«ç›¸å¯¹ä½ç½®å’Œåèˆªè§’ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210857102.png#pic_center">)<br>2ï¼‰å›ç¯è¾¹(Loop Closure Edge)ï¼šå¦‚æœæ–°è¾¹ç¼˜åŒ–çš„å…³é”®å¸§æœ‰ä¸€ä¸ªå›ç¯è¿æ¥ï¼Œå®ƒå°†ä¸å›ç¯å¸§é€šè¿‡ä¸€ä¸ªå›ç¯è¾¹åœ¨ä½å§¿å›¾å›¾ä¸­è¿æ¥ã€‚åŒæ ·ï¼Œé—­ç¯è¾¹ç¼˜åªåŒ…å«ä¸(27)ç›¸åŒå®šä¹‰çš„å››è‡ªç”±åº¦ç›¸å¯¹ä½å§¿å˜æ¢ã€‚å›ç¯è¾¹çš„å€¼ç”±é‡å®šä½ç»“æœå¾—å‡ºã€‚</p>
<h2 id="B-4è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–"><a href="#B-4è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–" class="headerlink" title="B. 4è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–"></a>B. 4è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–</h2><p>æˆ‘ä»¬å°†å¸§iå’Œjä¹‹é—´è¾¹çš„æ®‹å·®å®šä¹‰ä¸ºï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019210815393.png#pic_center"><br>å…¶ä¸­ï¼Œ$\hat \phi _iï¼Œ\hat    Î¸_i$æ˜¯ç›´æ¥ä»å•ç›®VIOä¸­å¾—åˆ°çš„ç¿»æ»šè§’å’Œä¿¯ä»°è§’çš„ä¼°è®¡ã€‚</p>
<p>é€šè¿‡æœ€å°åŒ–ä»¥ä¸‹ä»£ä»·å‡½æ•°ï¼Œå¯¹é¡ºåºè¾¹å’Œå›ç¯è¾¹çš„æ•´ä¸ªå›¾è¿›è¡Œä¼˜åŒ–ï¼š<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101921101530.png#pic_center"></p>
<p>å…¶ä¸­Sæ˜¯æ‰€æœ‰é¡ºåºè¾¹çš„é›†åˆï¼ŒLæ˜¯å›ç¯è¾¹çš„é›†åˆã€‚å°½ç®¡ç´§è€¦åˆçš„é‡å®šä½å·²ç»æœ‰åŠ©äºæ¶ˆé™¤é”™è¯¯çš„å›ç¯ï¼Œä½†æˆ‘ä»¬æ·»åŠ äº†å¦ä¸€ä¸ªHuberèŒƒæ•° $Ï(Â·)$ï¼Œä»¥è¿›ä¸€æ­¥å‡å°‘ä»»ä½•å¯èƒ½çš„é”™è¯¯å›ç¯çš„å½±å“ã€‚ç›¸åï¼Œæˆ‘ä»¬ä¸å¯¹é¡ºåºè¾¹ä½¿ç”¨ä»»ä½•é²æ£’èŒƒæ•°ï¼Œå› ä¸ºè¿™äº›è¾¹æ˜¯ä»VIOä¸­æå–å‡ºæ¥çš„ï¼ŒVIOå·²ç»åŒ…å«äº†è¶³å¤Ÿå¤šçš„å¤–ç‚¹æ’é™¤æœºåˆ¶ã€‚</p>
<p>ä½å§¿å›¾ä¼˜åŒ–å’Œé‡å®šä½(VII-C)å¼‚æ­¥è¿è¡Œåœ¨ä¸¤ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­ã€‚ä»¥ä¾¿åœ¨éœ€è¦é‡å®šä½æ—¶ï¼Œèƒ½ç«‹å³ä½¿ç”¨æœ€ä¼˜åŒ–çš„ä½å§¿å›¾ã€‚åŒæ ·ï¼Œå³ä½¿å½“å‰çš„ä½å§¿å›¾ä¼˜åŒ–å°šæœªå®Œæˆï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ä½å§¿å›¾é…ç½®è¿›è¡Œé‡æ–°å®šä½ã€‚è¿™ä¸€è¿‡ç¨‹å¦‚å›¾9(b)æ‰€ç¤ºã€‚</p>
<h2 id="C-ä½å§¿å›¾ç®¡ç†"><a href="#C-ä½å§¿å›¾ç®¡ç†" class="headerlink" title="C. ä½å§¿å›¾ç®¡ç†"></a>C. ä½å§¿å›¾ç®¡ç†</h2><p>éšç€è¡Œç¨‹è·ç¦»çš„å¢åŠ ï¼Œä½å§¿å›¾çš„å¤§å°å¯èƒ½ä¼šæ— é™å¢é•¿ï¼Œä»è€Œé™åˆ¶äº†é•¿æ—¶é—´ç³»ç»Ÿçš„å®æ—¶æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å®è¡Œäº†ä¸€ä¸ªä¸‹é‡‡æ ·è¿‡ç¨‹ï¼Œå°†ä½å§¿å›¾æ•°æ®åº“ä¿æŒåœ¨æœ‰é™çš„å¤§å°ã€‚æ‰€æœ‰å…·æœ‰å›ç¯çº¦æŸçš„å…³é”®å¸§éƒ½å°†è¢«ä¿ç•™ï¼Œè€Œå…¶ä»–ä¸ç›¸é‚»å¸§è¿‡è¿‘æˆ–æ–¹å‘éå¸¸ç›¸ä¼¼çš„å…³é”®å¸§å¯èƒ½ä¼šè¢«åˆ é™¤ã€‚å…³é”®å¸§è¢«ç§»é™¤çš„æ¦‚ç‡å’Œå…¶ç›¸é‚»å¸§çš„ç©ºé—´å¯†åº¦æˆæ­£æ¯”ã€‚</p>
<h1 id="IX-å®éªŒç»“æœ"><a href="#IX-å®éªŒç»“æœ" class="headerlink" title="IX. å®éªŒç»“æœ"></a>IX. å®éªŒç»“æœ</h1><p>æˆ‘ä»¬è¿›è¡Œäº†ä¸‰ä¸ªå®éªŒå’Œä¸¤ä¸ªåº”ç”¨ï¼Œä»¥è¯„ä¼°æ‰€æå‡ºçš„VINS-Monoç³»ç»Ÿã€‚åœ¨ç¬¬ä¸€ä¸ªå®éªŒä¸­ï¼Œæˆ‘ä»¬å°†æå‡ºçš„ç®—æ³•ä¸å¦ä¸€ç§æœ€å…ˆè¿›ç®—æ³•åœ¨å…¬å…±æ•°æ®é›†ä¸Šè¿›è¡Œæ¯”è¾ƒã€‚æˆ‘ä»¬é€šè¿‡æ•°å€¼åˆ†æä»¥éªŒè¯äº†ç³»ç»Ÿçš„ç²¾åº¦ã€‚ç„¶ååœ¨å®¤å†…ç¯å¢ƒä¸­æµ‹è¯•æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œä»¥è¯„ä¼°åœ¨é‡å¤åœºæ™¯ä¸­çš„æ€§èƒ½ã€‚é€šè¿‡å¤§é‡çš„å®éªŒéªŒè¯äº†ç³»ç»Ÿçš„é•¿æœŸå®ç”¨æ€§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å°†æ‰€æå‡ºçš„ç³»ç»Ÿåº”ç”¨äºä¸¤ä¸ªåº”ç”¨ã€‚å¯¹äºç©ºä¸­æœºå™¨äººçš„åº”ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨VINS-Monoä½œä¸ºä½ç½®åé¦ˆæ¥æ§åˆ¶æ— äººæœºè·Ÿè¸ªé¢„å®šçš„è½¨è¿¹ã€‚ç„¶åæˆ‘ä»¬å°†æˆ‘ä»¬çš„æ–¹æ³•ç§»æ¤åˆ°iOSç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå¹¶ä¸Google Tangoè¿›è¡Œæ¯”è¾ƒã€‚</p>
<h2 id="A-æ•°æ®é›†æ¯”è¾ƒ"><a href="#A-æ•°æ®é›†æ¯”è¾ƒ" class="headerlink" title="A. æ•°æ®é›†æ¯”è¾ƒ"></a>A. æ•°æ®é›†æ¯”è¾ƒ</h2><p>æˆ‘ä»¬ä½¿ç”¨EuRoC MAVè§†è§‰-æƒ¯æ€§æ•°æ®é›†[41]è¯„ä¼°æˆ‘ä»¬æå‡ºçš„VINS-Monoã€‚è¿™ä¸ªæ•°æ®é›†æ˜¯åœ¨ä¸€æ¶å¾®å‹é£è¡Œå™¨ä¸Šæ”¶é›†çš„ï¼Œå®ƒåŒ…å«ç«‹ä½“å›¾åƒ(Aptina MT9V034å…¨å±€å¿«é—¨ã€WVGAå•è‰²ã€20 FPS)ã€åŒæ­¥IMUæµ‹é‡(ADIS 16448ã€200 Hz)å’Œåœ°é¢çœŸå®çŠ¶æ€(Viconå’ŒLeica MS 50)ã€‚æˆ‘ä»¬åªä½¿ç”¨å·¦è¾¹ç›¸æœºçš„å›¾åƒã€‚åœ¨è¿™æ•°æ®é›†ä¸­ä¼šè§‚å¯Ÿåˆ°è¾ƒå¤§çš„IMUåç½®å’Œå…‰ç…§å˜åŒ–ã€‚</p>
<p>åœ¨è¿™äº›å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†VINS-Monoå’ŒOKVISè¿›è¡Œäº†æ¯”è¾ƒï¼Œè¿™æ˜¯ä¸€ç§æœ€å…ˆè¿›çš„å•ç›®å’Œç«‹ä½“ç›¸æœºVIOã€‚OKVISæ˜¯å¦ä¸€ç§åŸºäºä¼˜åŒ–çš„æ»‘åŠ¨çª—å£ç®—æ³•ã€‚æˆ‘ä»¬çš„ç®—æ³•ä¸OKVISåœ¨è®¸å¤šç»†èŠ‚ä¸Šæ˜¯ä¸åŒçš„ï¼Œå¦‚æŠ€æœ¯éƒ¨åˆ†æ‰€ç¤ºã€‚æˆ‘ä»¬çš„ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„åˆå§‹åŒ–å’Œå›ç¯åŠŸèƒ½ã€‚æˆ‘ä»¬ä½¿ç”¨MH_03_medianå’ŒMH_05_difficultä¸¤ç»„åºåˆ—æ¥è¯æ˜è¯¥æ–¹æ³•çš„æ€§èƒ½ã€‚ä¸ºäº†ç®€åŒ–è¡¨ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨VINSæ¥è¡¨ç¤ºæˆ‘ä»¬åªä½¿ç”¨å•ç›®VIOçš„æ–¹æ³•ï¼Œè€ŒVINS_loopè¡¨ç¤ºå«é‡å®šä½å’Œä½å§¿å›¾ä¼˜åŒ–çš„å®Œå…¨ç‰ˆæœ¬ã€‚æˆ‘ä»¬åˆ†åˆ«ç”¨OKVIS_Monoå’ŒOKVIS_stereoè¡¨ç¤ºOKVISä½¿ç”¨å•ç›®å’Œç«‹ä½“å›¾åƒçš„ç»“æœã€‚ä¸ºäº†è¿›è¡Œå…¬å¹³çš„æ¯”è¾ƒï¼Œæˆ‘ä»¬ä¸¢å¼ƒå‰100ä¸ªè¾“å‡ºï¼Œå¹¶ä½¿ç”¨æ¥ä¸‹æ¥çš„150ä¸ªè¾“å‡ºå¯¹é½åœ°é¢çœŸå€¼ï¼Œå¹¶æ¯”è¾ƒå…¶ä½™çš„ä¼°è®¡å™¨è¾“å‡ºã€‚</p>
<p>MH_03_medianåºåˆ—è½¨è¿¹å¦‚å›¾11æ‰€ç¤ºã€‚æˆ‘ä»¬åªæ¯”è¾ƒå¹³ç§»è¯¯å·®ï¼Œå› ä¸ºæ—‹è½¬è¿åŠ¨åœ¨è¿™ä¸ªåºåˆ—ä¸­æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚å›¾12æ˜¾ç¤ºäº†xã€yã€zè¯¯å·®ä¸æ—¶é—´çš„å…³ç³»ï¼Œä»¥åŠå¹³ç§»è¯¯å·®ä¸è·ç¦»çš„å…³ç³»ã€‚åœ¨è¯¯å·®å›¾ä¸­ï¼Œå…·æœ‰å›ç¯çš„VINS-Monoå…·æœ‰æœ€å°çš„å¹³ç§»è¯¯å·®ã€‚æˆ‘ä»¬åœ¨MH_05_difficultä¸Šè§‚å¯Ÿåˆ°ç±»ä¼¼çš„ç»“æœã€‚è¯¥æ–¹æ³•å…·æœ‰æœ€å°çš„å¹³ç§»è¯¯å·®ã€‚å¹³ç§»å’Œæ—‹è½¬è¯¯å·®å¦‚å›¾14æ‰€ç¤ºã€‚ç”±äºè¯¥åºåˆ—è¿åŠ¨å¹³ç¨³ï¼Œåè§’å˜åŒ–ä¸å¤§ï¼Œåªå‘ç”Ÿä½ç½®æ¼‚ç§»ã€‚æ˜¾ç„¶ï¼Œå›ç¯é—­åˆæœ‰æ•ˆåœ°çº¦æŸäº†ç´¯ç§¯æ¼‚ç§»ã€‚OKVISåœ¨ç¿»æ»šè§’å’Œä¿¯ä»°è§’ä¼°è®¡æ–¹é¢è¡¨ç°æ›´å¥½ã€‚ä¸€ä¸ªå¯èƒ½çš„åŸå› æ˜¯VINS-Monoé‡‡ç”¨äº†é¢„ç§¯åˆ†æŠ€æœ¯ï¼Œå³IMUä¼ é€’çš„ä¸€é˜¶è¿‘ä¼¼ï¼Œä»¥èŠ‚çœè®¡ç®—èµ„æºã€‚</p>
<p>VINS-Monoåœ¨æ‰€æœ‰Eurocæ•°æ®é›†ä¸­éƒ½è¡¨ç°è‰¯å¥½ï¼Œå³ä½¿åœ¨æœ€å…·æŒ‘æˆ˜æ€§çš„åºåˆ—V1_03_difficultä¸­ï¼Œå®ƒå…·æœ‰å‰§çƒˆæ€§çš„è¿åŠ¨ã€çº¹ç†è¾ƒå°‘çš„åŒºåŸŸå’Œæ˜¾è‘—çš„å…‰ç…§å˜åŒ–ã€‚ç”±äºé‡‡ç”¨äº†ä¸“ç”¨çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œè¯¥æ–¹æ³•å¯ä»¥åœ¨V1_03_difficultå¿«é€Ÿåˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºçº¯VIOï¼ŒVINS-Monoå’ŒOKVISå…·æœ‰ç›¸ä¼¼çš„ç²¾åº¦ï¼Œå¾ˆéš¾åŒºåˆ†å“ªä¸ªæ¯”è¾ƒå¥½ã€‚ç„¶è€Œï¼ŒVINS-Monoåœ¨ç³»ç»Ÿçº§åˆ«ä¸Šä¼˜äºOKVISã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œå…·æœ‰é²æ£’çš„åˆå§‹åŒ–å’Œå›ç¯é—­åˆåŠŸèƒ½æ¥è¾…åŠ©å•ç›®è§†è§‰ã€‚</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211301627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211334529.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="B-å®¤å†…å®éªŒ"><a href="#B-å®¤å†…å®éªŒ" class="headerlink" title="B. å®¤å†…å®éªŒ"></a>B. å®¤å†…å®éªŒ</h2><p>åœ¨å®¤å†…å®éªŒä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å®éªŒå®¤ç¯å¢ƒä½œä¸ºå®éªŒåŒºåŸŸã€‚æˆ‘ä»¬ä½¿ç”¨çš„ä¼ æ„Ÿå™¨å¥—ä»¶å¦‚å›¾15æ‰€ç¤ºã€‚å®ƒæ­è½½åœ¨DJI A3æ§åˆ¶å™¨ä¸Šï¼ŒåŒ…å«ä¸€ä¸ªå•ç›®ç…§ç›¸æœºï¼ˆ20Hzï¼‰å’Œä¸€ä¸ªIMUï¼ˆ100 Hzï¼‰ã€‚æˆ‘ä»¬æ‰‹æ¡ä¼ æ„Ÿå™¨å¥—ä»¶ï¼Œåœ¨å®éªŒå®¤ä»¥æ­£å¸¸çš„é€Ÿåº¦è¡Œèµ°ã€‚å¦‚å›¾16æ‰€ç¤ºï¼Œæˆ‘ä»¬é‡åˆ°è¡Œäººï¼Œå…‰çº¿è¾ƒå¼±çš„ä½ç½®ï¼Œçº¹ç†è¾ƒå°‘çš„åŒºåŸŸï¼Œç»ç’ƒå’Œåå°„ã€‚å¤šåª’ä½“é™„ä»¶ä¸­å¯ä»¥æ‰¾åˆ°è§†é¢‘ã€‚ </p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211501205.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>æˆ‘ä»¬å°†æˆ‘ä»¬çš„ç»“æœä¸OKVISè¿›è¡Œäº†æ¯”è¾ƒï¼Œå¦‚å›¾17æ‰€ç¤ºã€‚å›¾17(a)æ˜¯OKVISçš„VIOè¾“å‡ºã€‚å›¾17(b)æ˜¯æ‰€æå‡ºçš„æ— å›ç¯æ–¹æ³•çš„VIOç»“æœã€‚å›¾17Â©æ˜¯æ‰€æå‡ºçš„å…·æœ‰é‡å®šä½å’Œå›ç¯é—­åˆçš„æ–¹æ³•çš„ç»“æœã€‚å½“æˆ‘ä»¬åœ¨å®¤å†…è½¬åœˆæ—¶ï¼Œä¼šå‡ºç°æ˜æ˜¾çš„æ¼‚ç§»ã€‚OKVISå’Œåªæœ‰VIOç‰ˆæœ¬çš„VINS-Monoåœ¨xã€yã€zå’Œåèˆªè§’ä¸Šç§¯ç´¯äº†å¤§é‡æ¼‚ç§»ã€‚æˆ‘ä»¬çš„é‡å®šä½å’Œå›ç¯é—­åˆæ¨¡å—æœ‰æ•ˆåœ°æ¶ˆé™¤äº†æ‰€æœ‰è¿™äº›æ¼‚ç§»ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211551914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="C-å¤§èŒƒå›´ç¯å¢ƒ"><a href="#C-å¤§èŒƒå›´ç¯å¢ƒ" class="headerlink" title="C. å¤§èŒƒå›´ç¯å¢ƒ"></a>C. å¤§èŒƒå›´ç¯å¢ƒ</h2><p>1ï¼‰èµ°å‡ºå®éªŒå®¤ï¼šæˆ‘ä»¬åœ¨å®¤å†…å’Œå®¤å¤–æ··åˆç¯å¢ƒä¸­æµ‹è¯•VINS-Monoã€‚ä¼ æ„Ÿå™¨å¥—ä»¶ä¸å›¾15æ‰€ç¤ºçš„ç›¸åŒã€‚æˆ‘ä»¬ä»å®éªŒå®¤çš„ä¸€ä¸ªåº§ä½ä¸Šå¼€å§‹ï¼Œåœ¨å®¤å†…ç©ºé—´é‡Œèµ°æ¥èµ°å»ã€‚ç„¶åæˆ‘ä»¬ä¸‹æ¥¼ï¼Œåœ¨å¤§æ¥¼å¤–çš„æ“åœºä¸Šèµ°æ¥èµ°å»ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å›åˆ°æ¥¼é‡Œå¹¶ä¸Šæ¥¼ã€‚æœ€åï¼Œæˆ‘ä»¬å›åˆ°äº†å®éªŒå®¤çš„åŒä¸€ä¸ªåº§ä½ã€‚æ•´ä¸ªè½¨è¿¹è¶…è¿‡700ç±³ï¼ŒæŒç»­çº¦10åˆ†é’Ÿã€‚åœ¨å¤šåª’ä½“é™„ä»¶ä¸­å¯ä»¥æ‰¾åˆ°å®éªŒçš„è§†é¢‘ã€‚</p>
<p>è½¨è¿¹å¦‚å›¾19æ‰€ç¤ºã€‚å›¾19(a)æ˜¯OKVISçš„è½¨è¿¹ã€‚å½“æˆ‘ä»¬ä¸Šæ¥¼æ—¶ï¼ŒOKVISæ˜¾ç¤ºå‡ºä¸ç¨³å®šçš„ç‰¹å¾è·Ÿè¸ªï¼Œå¯¼è‡´ä¼°è®¡é”™è¯¯ã€‚æˆ‘ä»¬çœ‹ä¸åˆ°çº¢è‰²è¡—åŒºæ¥¼æ¢¯çš„å½¢çŠ¶ã€‚VINS-Monoçš„çº¯VIOç»“æœå¦‚å›¾19(b)æ‰€ç¤ºã€‚æœ‰é—­ç¯çš„è½¨è¿¹å¦‚å›¾19Â©æ‰€ç¤ºã€‚è¯¥æ–¹æ³•çš„æ¥¼æ¢¯å½¢çŠ¶æ¸…æ™°ã€‚ä¸ºéªŒè¯å…¶å‡†ç¡®æ€§ï¼Œå°†é—­ç¯è½¨è¿¹ä¸è°·æ­Œåœ°å›¾å¯¹é½ï¼Œå¦‚å›¾18æ‰€ç¤ºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101921164349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>OKVISçš„ xã€yå’Œzè½´çš„æœ€ç»ˆæ¼‚ç§»ä¸º[13.80,-5.26,7.23]ç±³ã€‚VINS-Monoæ— ç¯é—­è·¯çš„æœ€ç»ˆæ¼‚ç§»ä¸º[-5.47,2.76,-0.29]mï¼Œå æ•´ä¸ªè½¨è¿¹é•¿åº¦çš„0.88%ï¼Œå°äºOKVISçš„2.36%ã€‚ç»å›ç¯ä¿®æ­£ï¼Œæœ€ç»ˆæ¼‚ç§»ä¸Šç•Œä¸º[-0.032,0.09,-0.07]mï¼Œä¸æ•´ä¸ªè½¨è¿¹é•¿åº¦ç›¸æ¯”è¿™æ˜¯å¾®ä¸è¶³é“çš„ã€‚è™½ç„¶æˆ‘ä»¬æ²¡æœ‰åœ°é¢çœŸå€¼ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥ç›´è§‚åœ°æ£€æŸ¥ä¼˜åŒ–åçš„è½¨è¿¹æ˜¯å¦å¹³æ»‘å¹¶èƒ½ç²¾ç¡®åœ°ä¸å«æ˜Ÿåœ°å›¾å¯¹é½ã€‚</p>
<p>2ï¼‰ç¯æ¸¸æ ¡å›­ï¼šè¿™å¼ ç¯ç»•æ•´ä¸ªç§‘å¤§æ ¡å›­çš„éå¸¸å¤§è§„æ¨¡çš„æ•°æ®é›†æ˜¯ç”¨ä¸€ä¸ªæ‰‹æŒçš„VI-Sensor 4è®°å½•ä¸‹æ¥çš„ã€‚è¯¥æ•°æ®é›†è¦†ç›–çš„åœ°é¢é•¿åº¦çº¦ä¸º710ç±³ï¼Œå®½åº¦ä¸º240ç±³ï¼Œé«˜åº¦å˜åŒ–ä¸º60ç±³ã€‚æ€»è·¯å¾„é•¿åº¦ä¸º5.62kmã€‚æ•°æ®åŒ…å«25Hzå›¾åƒå’Œ200Hz IMUï¼ŒæŒç»­1å°æ—¶34åˆ†é’Ÿã€‚å¯¹VINS-Monoçš„ç¨³å®šæ€§å’Œè€ä¹…æ€§è¿›è¡Œæµ‹è¯•æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ„ä¹‰çš„å®éªŒã€‚</p>
<p>åœ¨è¿™ä¸ªå¤§è§„æ¨¡çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å°†å…³é”®å¸§æ•°æ®åº“çš„å¤§å°è®¾ç½®ä¸º2000ï¼Œä»¥æä¾›è¶³å¤Ÿçš„å›ç¯ä¿¡æ¯å¹¶è¾¾åˆ°å®æ—¶æ€§ã€‚æˆ‘ä»¬è¿è¡Œæ­¤æ•°æ®é›†æ—¶ï¼Œé‡‡ç”¨è‹±ç‰¹å°”i7-4790 CPUè¿è¡Œåœ¨3.60GHzã€‚æ—¶é—´ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºåœ¨è¡¨Iä¸­ã€‚å¦‚å›¾20ï¼Œä¼°è®¡çš„è½¨è¿¹ä¸è°·æ­Œåœ°å›¾ä¸€è‡´ã€‚ä¸è°·æ­Œåœ°å›¾ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„ç»“æœåœ¨è¿™ä¸ªéå¸¸é•¿æ—¶é—´çš„æµ‹è¯•ä¸­å‡ ä¹æ²¡æœ‰æ¼‚ç§»ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101921174092.png#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211751315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>D. åº”ç”¨1ï¼šèˆªç©ºæœºå™¨äººçš„åé¦ˆæ§åˆ¶</p>
<p>å¦‚å›¾21(a)æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†VINS-Monoåº”ç”¨äºèˆªç©ºæœºå™¨äººçš„è‡ªä¸»åé¦ˆæ§åˆ¶ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå…·æœ‰752Ã—480åˆ†è¾¨ç‡çš„å‰å‘å…¨å±€æ›å…‰ç›¸æœº(MatrixVisionMvBlueFOXMLC200w)ï¼Œå¹¶é…å¤‡äº†190åº¦é±¼çœ¼é•œå¤´ã€‚DJIA3é£è¡Œæ§åˆ¶å™¨ç”¨äºIMUæµ‹é‡å’Œå§¿æ€ç¨³å®šæ§åˆ¶ã€‚æœºè½½è®¡ç®—èµ„æºæ˜¯Intel i7-5500 U CPUè¿è¡Œåœ¨3.00GHzã€‚ä¼ ç»Ÿçš„é’ˆå­”æ‘„åƒæœºæ¨¡å‹ä¸é€‚ç”¨äºå¤§è§†åœºæ‘„åƒæœºã€‚æˆ‘ä»¬ä½¿ç”¨MEI[42]æ¨¡å‹ï¼Œç”±[43]ä»‹ç»çš„å·¥å…·åŒ…è¿›è¡Œæ ¡å‡†ã€‚</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211839510.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>åœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬æµ‹è¯•ä½¿ç”¨VINS_Monoçš„çŠ¶æ€ä¼°è®¡æ¥è¿›è¡Œè‡ªä¸»è½¨è¿¹è·Ÿè¸ªçš„æ€§èƒ½ã€‚å®éªŒä¸­å›ç¯æ£€æµ‹è¢«ç¦æ­¢ã€‚å››æ—‹ç¿¼è¢«å‘½ä»¤è·Ÿè¸ªä¸€ä¸ªå…«å­—å½¢å›¾æ¡ˆï¼Œæ¯ä¸ªåœ†åœˆåŠå¾„ä¸º1.0ç±³ï¼Œå¦‚å›¾21(b)æ‰€ç¤ºã€‚åœ¨è½¨è¿¹å‘¨å›´è®¾ç½®äº†å››ä¸ªéšœç¢ç‰©ï¼Œä»¥éªŒè¯VINS-Monoæ— é—­ç¯çš„å‡†ç¡®æ€§ã€‚åœ¨å®éªŒè¿‡ç¨‹ä¸­ï¼Œå››æ—‹ç¿¼è¿ç»­å››æ¬¡è·Ÿè¸ªè¿™ä¸€è½¨è¿¹ã€‚100 Hzæœºè½½çŠ¶æ€ä¼°è®¡(VI-F)æ”¯æŒå¯¹å››æ—‹ç¿¼çš„å®æ—¶åé¦ˆæ§åˆ¶ã€‚</p>
<p>åœ°é¢çœŸå€¼æ˜¯ç”¨OptiTrack 5è·å¾—çš„ã€‚æ€»è½¨è¿¹é•¿åº¦ä¸º61.97 mã€‚æœ€ç»ˆæ¼‚ç§»ä¸º[0.08ï¼Œ0.09ï¼Œ0.13]mï¼Œä¸º0.29%çš„ä½ç½®æ¼‚ç§»ã€‚å¹³ç§»å’Œæ—‹è½¬çš„ç»†èŠ‚ä»¥åŠå®ƒä»¬ç›¸åº”çš„è¯¯å·®å¦‚å›¾23æ‰€ç¤ºã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019211919318.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"></p>
<h2 id="E-åº”ç”¨2ï¼šç§»åŠ¨è®¾å¤‡"><a href="#E-åº”ç”¨2ï¼šç§»åŠ¨è®¾å¤‡" class="headerlink" title="E. åº”ç”¨2ï¼šç§»åŠ¨è®¾å¤‡"></a>E. åº”ç”¨2ï¼šç§»åŠ¨è®¾å¤‡</h2><p>æˆ‘ä»¬å°†VINS-Monoç§»æ¤åˆ°ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå¹¶æä¾›ä¸€ä¸ªç®€å•çš„ARåº”ç”¨ç¨‹åºæ¥å±•ç¤ºå…¶å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚æˆ‘ä»¬å°†æˆ‘ä»¬çš„ç§»åŠ¨å®ç°å‘½åä¸ºVINS-Mobile6ï¼Œå¹¶å°†å…¶ä¸Google Tango Device 7è¿›è¡Œäº†æ¯”è¾ƒï¼Œåè€…æ˜¯ç§»åŠ¨å¹³å°åœ¨å•†ä¸šä¸Šæœ€å¥½çš„å¢å¼ºç°å®è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>VINS-Monoè¿è¡Œåœ¨iPhone7 Plusä¸Šã€‚æˆ‘ä»¬ä½¿ç”¨iPhoneé‡‡é›†çš„30 Hzã€åˆ†è¾¨ç‡ä¸º640Ã—480çš„å›¾åƒï¼Œä»¥åŠå†…ç½®InvenSense MP67B 6è½´é™€èºä»ªå’ŒåŠ é€Ÿåº¦è®¡è·å¾—çš„100 Hz çš„IMUæ•°æ®ã€‚å¦‚å›¾24æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†iPhoneä¸ä¸€ä¸ªå¯ç”¨TangoåŠŸèƒ½çš„è”æƒ³Phab 2 Proä¸€èµ·å®‰è£…ã€‚Tangoè®¾å¤‡ä½¿ç”¨å…¨å±€å¿«é—¨ã€é±¼çœ¼ç›¸æœºå’ŒåŒæ­¥IMUè¿›è¡ŒçŠ¶æ€ä¼°è®¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ä»ä¼°è®¡çš„è§†è§‰ç‰¹å¾ä¸­æå–å‡ºæ¥çš„å¹³é¢ä¸Šæ’å…¥ä¸€ä¸ªè™šæ‹Ÿç«‹æ–¹ä½“ï¼Œå¦‚å›¾25(a)æ‰€ç¤ºã€‚ç„¶åï¼Œæˆ‘ä»¬æ‹¿ç€è¿™ä¸¤ä¸ªè£…ç½®ï¼Œä»¥æ­£å¸¸çš„é€Ÿåº¦åœ¨æˆ¿é—´å†…å¤–è¡Œèµ°ã€‚å½“æ£€æµ‹åˆ°å›ç¯æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å››è‡ªç”±åº¦ä½å§¿å›¾ä¼˜åŒ–(VIII-B)ï¼Œä»¥æ¶ˆé™¤xï¼Œyï¼Œzå’Œyawæ¼‚ç§»ã€‚<br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019212019875.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/20191019212037844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" data-src="https://img-blog.csdnimg.cn/2019101921210026.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjkwNTE0MQ==,size_16,color_FFFFFF,t_70#pic_center"><br>æœ‰è¶£çš„æ˜¯ï¼Œå½“æˆ‘ä»¬æ‰“å¼€ä¸€æ‰‡é—¨æ—¶ï¼ŒTangoçš„åèˆªè§’ä¼°è®¡ä¼šè·³è½¬åˆ°ä¸€ä¸ªå¾ˆå¤§çš„è§’åº¦ï¼Œå¦‚å›¾25(b)æ‰€ç¤ºã€‚å…¶åŸå› å¯èƒ½æ˜¯ç”±äºä¸ç¨³å®šçš„ç‰¹å¾è·Ÿè¸ªæˆ–ä¸»åŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤è€Œå¯¼è‡´çš„ä¼°è®¡å™¨å´©æºƒã€‚ç„¶è€Œï¼ŒVINS-Monoåœ¨è¿™ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„æƒ…å†µä¸­ä»ç„¶è¡¨ç°å¾ˆå¥½ã€‚è¡Œèµ°äº†å¤§çº¦264ç±³åæˆ‘ä»¬å›åˆ°èµ·ç‚¹ã€‚æœ€åçš„ç»“æœå¯ä»¥åœ¨å›¾25( c)ä¸­çœ‹åˆ°ï¼ŒTangoçš„è½¨è¿¹åœ¨æœ€åä¸€åœˆä¼šæ¼‚ç§»ï¼Œè€Œæˆ‘ä»¬çš„VINSä¼šå›åˆ°èµ·ç‚¹ã€‚å››è‡ªç”±åº¦ä½å§¿å›¾çš„ä¼˜åŒ–æ¶ˆé™¤äº†æ€»è½¨è¿¹çš„æ¼‚ç§»ã€‚è¿™ä¸å¼€å§‹ç›¸æ¯”ï¼Œç«‹æ–¹ä½“è¢«æ ‡è®°åˆ°å›¾åƒä¸Šçš„åŒä¸€ä½ç½®ä¹Ÿå°è¯äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>è¯šç„¶ï¼Œå°¤å…¶æ˜¯å¯¹å±€éƒ¨çŠ¶æ€çš„ä¼°è®¡ï¼ŒTangoæ¯”æˆ‘ä»¬çš„å®ç°æ›´å‡†ç¡®ã€‚ä½†æ˜¯å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯ä»¥åœ¨é€šç”¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œï¼Œå¹¶ä¸”å…·æœ‰åª²ç¾ç‰¹æ®Šå·¥ç¨‹è®¾å¤‡çš„æ½œåŠ›ã€‚å®éªŒè¿˜è¯æ˜äº†è¯¥æ–¹æ³•çš„é²æ£’æ€§ã€‚è§†é¢‘å¯ä»¥åœ¨å¤šåª’ä½“é™„ä»¶ä¸­æ‰¾åˆ°ã€‚</p>
<h1 id="X-ç»“è®ºå’Œæœªæ¥å·¥ä½œ"><a href="#X-ç»“è®ºå’Œæœªæ¥å·¥ä½œ" class="headerlink" title="X. ç»“è®ºå’Œæœªæ¥å·¥ä½œ"></a>X. ç»“è®ºå’Œæœªæ¥å·¥ä½œ</h1><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§é²æ£’ã€é€šç”¨çš„å•ç›®è§†è§‰æƒ¯æ€§ä¼°è®¡å™¨ã€‚æˆ‘ä»¬çš„æ–¹æ³•åœ¨IMUé¢„ç§¯åˆ†ï¼Œä¼°è®¡å™¨åˆå§‹åŒ–å’Œæ•…éšœæ¢å¤ï¼Œåœ¨çº¿å¤–éƒ¨æ ¡å‡†ï¼Œç´§è€¦åˆè§†è§‰æƒ¯æ€§é‡Œç¨‹è®¡ï¼Œé‡å®šä½å’Œæœ‰æ•ˆçš„å…¨å±€ä¼˜åŒ–ä¸Šï¼Œå…·æœ‰æœ€å…ˆè¿›çš„å’Œæ–°é¢–çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬é€šè¿‡ä¸æœ€å…ˆè¿›çš„å¼€æºå®ç°å’Œé«˜åº¦ä¼˜åŒ–çš„è¡Œä¸šè§£å†³æ–¹æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œæ˜¾ç¤ºå‡ºæ›´å¥½çš„æ€§èƒ½ã€‚æˆ‘ä»¬å¼€æºäº†PCå’ŒiOSçš„å®ç°ï¼Œä»¥é€ ç¦ç¤¾ä¼šã€‚</p>
<p>è™½ç„¶åŸºäºç‰¹å¾çš„VINSä¼°è®¡å™¨å·²ç»è¾¾åˆ°äº†å®é™…ä½¿ç”¨çš„æˆç†Ÿç¨‹åº¦ï¼Œæˆ‘ä»¬ä»ç„¶çœ‹åˆ°äº†æœªæ¥ç ”ç©¶çš„è®¸å¤šæ–¹å‘ã€‚å•ç›®VINSå¯èƒ½ä¼šæ ¹æ®è¿åŠ¨å’Œç¯å¢ƒè€Œè¾¾åˆ°è¾ƒéš¾è§‚æµ‹ç”šè‡³é€€åŒ–çš„çŠ¶æ€ã€‚æˆ‘ä»¬æœ€æ„Ÿå…´è¶£çš„æ˜¯åœ¨çº¿æ–¹æ³•æ¥è¯„ä¼°å•ç›®VINSçš„å¯è§‚æµ‹æ€§ï¼Œä»¥åŠåœ¨çº¿ç”Ÿæˆè¿åŠ¨è®¡åˆ’æ¥æ¢å¤å¯è§‚æµ‹æ€§ã€‚å¦ä¸€ä¸ªç ”ç©¶æ–¹å‘æ˜¯åœ¨å¤§é‡æ¶ˆè´¹è®¾å¤‡ä¸Šå¤§è§„æ¨¡éƒ¨ç½²å•ç›®VINSï¼Œä¾‹å¦‚ç§»åŠ¨ç”µè¯ã€‚è¿™ä¸€åº”ç”¨è¦æ±‚åœ¨çº¿æ ¡å‡†å‡ ä¹æ‰€æœ‰ä¼ æ„Ÿå™¨çš„å†…å‚å’Œå¤–å‚ï¼Œä»¥åŠåœ¨çº¿é‰´å®šæ ¡å‡†è´¨é‡ã€‚æœ€åï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯åˆ¶ä½œç”±å•ç›®VINSç»™å‡ºçš„ç¨ å¯†åœ°å›¾ã€‚æˆ‘ä»¬åœ¨[44]ä¸­é¦–æ¬¡ç»™å‡ºäº†ç”¨äºæ— äººæœºå¯¼èˆªçš„å•ç›®è§†è§‰-æƒ¯æ€§ç¨ å¯†åœ°å›¾çš„ç»“æœã€‚ç„¶è€Œï¼Œä»éœ€è¿›è¡Œå¹¿æ³›çš„ç ”ç©¶ä»¥è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„ç²¾åº¦å’Œé²æ£’æ€§ã€‚</p>
]]></content>
      <categories>
        <category>VINS</category>
      </categories>
      <tags>
        <tag>VINS-Mono</tag>
        <tag>VSLAM</tag>
      </tags>
  </entry>
  <entry>
    <title>8.äºŒå‰æ ‘çš„ä¸‹ä¸€èŠ‚ç‚¹</title>
    <url>/2019/10/19/8.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%8B%E4%B8%80%E8%8A%82%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®ï¼š<br>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯·æ‰¾å‡ºä¸­åºéå†åºåˆ—çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br>æ ‘ä¸­çš„ç»“ç‚¹ä¸ä»…åŒ…å«å·¦å³å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ŒåŒæ—¶åŒ…å«æŒ‡å‘çˆ¶ç»“ç‚¹çš„æŒ‡é’ˆã€‚<br>æ€è·¯ï¼š</p><ul>
<li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å³å­æ ‘ï¼Œé‚£ä¹ˆå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å®ƒçš„å³å­æ ‘çš„æœ€å·¦å­èŠ‚ç‚¹</li>
<li>æ²¡æœ‰å³å­æ ‘ï¼Œåˆ†ä¸¤ç§æƒ…å†µ<blockquote>
<p>1.å®ƒæ˜¯å®ƒçˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹<br>2.å®ƒæ˜¯å®ƒçˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œå¯ä»¥æ²¿ç€æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆä¸€ç›´å‘ä¸Šéå†ï¼Œç›´åˆ°æ‰¾åˆ°==ä¸€ä¸ªæ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹çš„èŠ‚ç‚¹==ï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯è¦æ‰¾çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<br><strong>C++</strong></p>
</blockquote>
</li>
</ul><a id="more"></a>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"> * <span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line"> *     <span class="keyword">int</span> val;</span><br><span class="line"> *     TreeNode *left;</span><br><span class="line"> *     TreeNode *right;</span><br><span class="line"> *     TreeNode *father;</span><br><span class="line"> *     TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>), father(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line"> * &#125;;</span><br><span class="line"> */</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">inorderSuccessor</span><span class="params">(TreeNode* p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">            </span><br><span class="line">        TreeNode* p_next=<span class="literal">NULL</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(p-&gt;right)</span><br><span class="line">        &#123;</span><br><span class="line">            TreeNode* p_right=p-&gt;right;</span><br><span class="line">            <span class="keyword">while</span>(p_right-&gt;left)</span><br><span class="line">            &#123;</span><br><span class="line">               p_right=p_right-&gt;left;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            p_next=p_right;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(p-&gt;father)</span><br><span class="line">        &#123;</span><br><span class="line">            TreeNode* p_current=p;</span><br><span class="line">            TreeNode* p_father=p-&gt;father;</span><br><span class="line">            <span class="keyword">while</span>(p_father &amp;&amp; p_current==p_father-&gt;right)</span><br><span class="line">            &#123;</span><br><span class="line">                p_current=p_father;</span><br><span class="line">                p_father=p_father-&gt;father;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            p_next=p_father;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> p_next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"><span class="comment">#         self.father = None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inorderSuccessor</span><span class="params">(self, p)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type p: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: TreeNode</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> p==<span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        p_next=<span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span>(p.right):</span><br><span class="line">            p_right=p.right</span><br><span class="line">            <span class="keyword">while</span> p_right.left:</span><br><span class="line">                p_right=p_right.left</span><br><span class="line">            p_next=p_right</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">elif</span>(p.father):</span><br><span class="line">            p_current=p</span><br><span class="line">            p_father=p.father</span><br><span class="line">            <span class="keyword">while</span>(p_father <span class="keyword">and</span> p_current==p_father.right):</span><br><span class="line">                p_current=p_father</span><br><span class="line">                p_father=p_father.father</span><br><span class="line">                </span><br><span class="line">            p_next=p_father</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">return</span> p_next</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>7.é‡å»ºäºŒå‰æ ‘</title>
    <url>/2019/10/19/7.%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚è¾“å…¥å‰åºéå†åºåˆ—{1,2,4,7,3,5,6,8}å’Œä¸­åºéå†åºåˆ—{4,7,2,1,5,3,8,6}ï¼Œåˆ™é‡å»ºäºŒå‰æ ‘å¹¶è¿”å›ã€‚</p><p>åœ¨äºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†ä¸­ç¡®å®šæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œåˆ†åˆ«æ‰¾åˆ°å‰åºéå†å’Œä¸­åºéå†å·¦å³å­æ ‘å¯¹åº”çš„å­åºåˆ—ï¼Œå†ä»¥åŒæ ·çš„æ–¹æ³•ï¼Œæ„å»ºå·¦å³å­æ ‘ï¼Œç”¨é€’å½’æ–¹æ³•å®Œæˆã€‚<br><strong>C++</strong></p><a id="more"></a>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for binary tree</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">reConstructBinaryTree</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pre,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vin)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pre.empty()||vin.empty())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="comment">//å‰åºéå†çš„ç¬¬ä¸€ä¸ªæ•°å€¼å°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        TreeNode* root=<span class="keyword">new</span> TreeNode(pre[<span class="number">0</span>]);</span><br><span class="line">        <span class="comment">//åœ¨ä¸­åºéå†åºåˆ—ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">int</span> root_index,i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vin.size();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(vin[i]==pre[<span class="number">0</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                root_index=i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pre_left,pre_right,vin_left,vin_right;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;root_index;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            pre_left.push_back(pre[i+<span class="number">1</span>]);</span><br><span class="line">            vin_left.push_back(vin[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=root_index+<span class="number">1</span>;i&lt;vin.size();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            pre_right.push_back(pre[i]);</span><br><span class="line">            vin_right.push_back(vin[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       <span class="comment">/* é€’å½’è°ƒç”¨ï¼Œå±‚å±‚è°ƒç”¨ï¼Œç›´åˆ°è°ƒç”¨åˆ°å¶å­èŠ‚ç‚¹ï¼Œè¿”å›NULL*/</span></span><br><span class="line">        <span class="comment">//æ„å»ºå·¦å­æ ‘</span></span><br><span class="line">        root-&gt;left=reConstructBinaryTree(pre_left,vin_left);</span><br><span class="line">        <span class="comment">//æ„å»ºå³å­æ ‘</span></span><br><span class="line">        root-&gt;right=reConstructBinaryTree(pre_right,vin_right);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># è¿”å›æ„é€ çš„TreeNodeæ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reConstructBinaryTree</span><span class="params">(self, pre, tin)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">if</span>(len(pre)==<span class="number">0</span> <span class="keyword">or</span> len(tin)==<span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        root=TreeNode(pre[<span class="number">0</span>])</span><br><span class="line"><span class="comment">#         for i in range(len(tin)):</span></span><br><span class="line"><span class="comment">#             if tin[i]==pre[0]:</span></span><br><span class="line"><span class="comment">#                 root_index=i </span></span><br><span class="line"><span class="comment">#                 break </span></span><br><span class="line">                </span><br><span class="line">        root_index=tin.index(pre[<span class="number">0</span>])</span><br><span class="line">        root.left=self.reConstructBinaryTree(pre[<span class="number">1</span>:<span class="number">1</span>+root_index],tin[:root_index])</span><br><span class="line">        root.right=self.reConstructBinaryTree(pre[root_index+<span class="number">1</span>:],tin[root_index+<span class="number">1</span>:])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>9.ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
    <url>/2019/10/19/6.%E4%BB%8E%E5%A4%B4%E5%88%B0%E5%B0%BE%E6%89%93%E5%8D%B0%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®æè¿°<br>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼ŒæŒ‰é“¾è¡¨ä»å°¾åˆ°å¤´çš„é¡ºåºè¿”å›ä¸€ä¸ªArrayListã€‚</p><p>ä»…ä»…éœ€è¦æ‰“å°æ•°å€¼,è€Œä¸æ˜¯åè½¬é“¾è¡¨,è¿™ä¸ªè¿˜æ˜¯æœ‰åŒºåˆ«.å¦‚æœå•çº¯çš„åè½¬æ‰“å°é“¾è¡¨çš„å€¼çš„è¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨stackæ“ä½œ.<br><strong>C++</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; printListFromTailToHead(ListNode* head) &#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;ListNode*&gt;nodes;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ArrayList;</span><br><span class="line">        ListNode* node=head;</span><br><span class="line">        <span class="keyword">while</span>(node !=<span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            nodes.push(node);</span><br><span class="line">            node=node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!nodes.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            node=nodes.top();<span class="comment">//è¿”å›æ ˆé¡¶å…ƒç´ , ä½†ä¸åˆ é™¤è¯¥å…ƒç´ </span></span><br><span class="line">            ArrayList.push_back(node-&gt;val);</span><br><span class="line">            nodes.pop();<span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ , ä½†ä¸è¿”å›å…¶å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ArrayList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><strong>Python</strong></p><a id="more"></a>

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># è¿”å›ä»å°¾éƒ¨åˆ°å¤´éƒ¨çš„åˆ—è¡¨å€¼åºåˆ—ï¼Œä¾‹å¦‚[1,2,3]</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printListFromTailToHead</span><span class="params">(self, listNode)</span>:</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        ArrayList=[]</span><br><span class="line">        head=listNode</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> head:</span><br><span class="line">            ArrayList.insert(<span class="number">0</span>,head.val)</span><br><span class="line">            head=head.next</span><br><span class="line">        <span class="keyword">return</span> ArrayList</span><br><span class="line">        </span><br><span class="line"><span class="comment">#        while head:</span></span><br><span class="line"><span class="comment">#            ArrayList.append(head.val)</span></span><br><span class="line"><span class="comment">#            head=head.next</span></span><br><span class="line"><span class="comment">#        return ArrayList[::-1]</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>5.æ›¿æ¢ç©ºæ ¼</title>
    <url>/2019/10/19/5.%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®æè¿°<br>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸ºWe Are Happy.åˆ™ç»è¿‡æ›¿æ¢ä¹‹åçš„å­—ç¬¦ä¸²ä¸ºWe%20Are%20Happyã€‚</p><ul>
<li>ä»å‰å¾€åæ›¿æ¢ï¼Œæ—¶é—´å¤æ‚åº¦$O(n^2)$</li>
<li>ä»åå¾€å‰æ›¿æ¢ï¼Œæ—¶é—´å¤æ‚åº¦$O(n)$</li>
</ul><p><strong>C++</strong><br><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æŒ‡å‘å­—ç¬¦æ•°ç»„çš„å­—ç¬¦æŒ‡é’ˆstrï¼Œå­—ç¬¦æ•°ç»„é•¿åº¦length</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">replaceSpace</span><span class="params">(<span class="keyword">char</span> *str,<span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">int</span> originalLength=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> numberOfBlank=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡ç©ºæ ¼ä¸ªæ•°ã€æ›¿æ¢å‰å­—ç¬¦ä¸ªæ•°ã€æ›¿æ¢åå­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;str[i]!=<span class="string">'\0'</span>;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            originalLength++;</span><br><span class="line">            <span class="keyword">if</span>(str[i]==<span class="string">' '</span>)</span><br><span class="line">                numberOfBlank++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ›¿æ¢ç©ºæ ¼</span></span><br><span class="line">        <span class="keyword">int</span> newLength = originalLength +<span class="number">2</span>* numberOfBlank;</span><br><span class="line">        <span class="keyword">if</span>(newLength+<span class="number">1</span>&gt;length)</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span> *p1 = str+originalLength;	<span class="comment">// å­—ç¬¦æŒ‡é’ˆæŒ‡å‘åŸå§‹å­—ç¬¦ä¸²çš„æœ«å°¾</span></span><br><span class="line">        <span class="keyword">char</span> *p2 = str+newLength;		<span class="comment">// å­—ç¬¦æŒ‡é’ˆæŒ‡å‘æ›¿æ¢åå­—ç¬¦ä¸²çš„æœ«å°¾</span></span><br><span class="line">        <span class="keyword">while</span>(p1!=p2)&#123;</span><br><span class="line">            <span class="keyword">if</span>(*p1 == <span class="string">' '</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                *p2-- = <span class="string">'0'</span>;</span><br><span class="line">                *p2-- = <span class="string">'2'</span>;</span><br><span class="line">                *p2-- = <span class="string">'%'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                *p2-- = *p1;</span><br><span class="line">            &#125;</span><br><span class="line">            p1--;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><a id="more"></a>


<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">replaceSpace</span><span class="params">(<span class="keyword">char</span> *str,<span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(str == <span class="literal">NULL</span> || length &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*original_lengthä¸ºå­—ç¬¦ä¸²strçš„å®é™…é•¿åº¦*/</span></span><br><span class="line">        <span class="keyword">int</span> original_length = <span class="number">0</span>;			<span class="comment">//åŸå§‹é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span> number_blank = <span class="number">0</span>;				<span class="comment">//ç©ºæ ¼æ•°</span></span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(str[i] != <span class="string">'\0'</span>)&#123;				<span class="comment">//éå†å­—ç¬¦ä¸²</span></span><br><span class="line">            original_length++;				<span class="comment">//é•¿åº¦+1</span></span><br><span class="line">            <span class="keyword">if</span>(str[i] == <span class="string">' '</span>)</span><br><span class="line">                number_blank++;				<span class="comment">//é‡åˆ°ç©ºæ ¼+1</span></span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*new_lengthä¸ºæŠŠç©ºæ ¼æ›¿æ¢æˆ'%20'ä¹‹åçš„é•¿åº¦*/</span></span><br><span class="line">        <span class="keyword">int</span> new_length = original_length + <span class="number">2</span> * number_blank;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> p1 = original_length;	<span class="comment">//åŸå§‹å­—ç¬¦ä¸²æœ«å°¾ç´¢å¼•å€¼</span></span><br><span class="line">        <span class="keyword">int</span> p2 = new_length;		<span class="comment">//è®¡ç®—é•¿åº¦åçš„å­—ç¬¦ä¸²æœ«å°¾ç´¢å¼•å€¼</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*index_originalæŒ‡é’ˆå¼€å§‹å‘å‰ç§»åŠ¨ï¼Œå¦‚æœé‡åˆ°ç©ºæ ¼ï¼Œæ›¿æ¢æˆ'%20'ï¼Œå¦åˆ™è¿›è¡Œå¤åˆ¶æ“ä½œ*/</span></span><br><span class="line">        <span class="keyword">while</span>(p1 &gt;= <span class="number">0</span> &amp;&amp; p2 &gt; p1)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str[p1] == <span class="string">' '</span>)&#123;</span><br><span class="line">                str[p2--] = <span class="string">'0'</span>;</span><br><span class="line">                str[p2--] = <span class="string">'2'</span>;</span><br><span class="line">                str[p2--] = <span class="string">'%'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                str[p2--] = str[p1];</span><br><span class="line">            &#125;</span><br><span class="line">            p1--;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Python</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># s æºå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">replaceSpace</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">return</span> s.replace(<span class="string">' '</span>,<span class="string">'%20'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># s æºå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">replaceSpace</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="comment">#stringï¼ˆåŒºåˆ«äºlistï¼‰æ˜¯ä¸€ç§ä¸å¯å˜çš„æ•°æ®ç±»å‹</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> s==<span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        origianl_length=len(s)</span><br><span class="line">        number_blank=<span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> i==<span class="string">' '</span>:</span><br><span class="line">                number_blank+=<span class="number">1</span></span><br><span class="line">        p1=origianl_length<span class="number">-1</span></span><br><span class="line">        p2=origianl_length+<span class="number">2</span>*number_blank<span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        new_s=[<span class="string">' '</span>]*(p2+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">while</span>(p1!=<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> s[p1]==<span class="string">' '</span>:</span><br><span class="line">                new_s[p2]=<span class="string">'0'</span></span><br><span class="line">                p2-=<span class="number">1</span></span><br><span class="line">                new_s[p2]=<span class="string">'2'</span></span><br><span class="line">                p2-=<span class="number">1</span></span><br><span class="line">                new_s[p2]=<span class="string">'%'</span></span><br><span class="line">                p2-=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                new_s[p2]=s[p1]</span><br><span class="line">                p2-=<span class="number">1</span></span><br><span class="line">            p1-=<span class="number">1</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>.join(new_s)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>4.äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</title>
    <url>/2019/10/19/4.%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¢˜ç›®æè¿°<br>åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚<br><strong>Python</strong><br>éå†äºŒç»´æ•°ç»„<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># array äºŒç»´åˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Find</span><span class="params">(self, target, array)</span>:</span></span><br><span class="line">        <span class="comment"># write code here</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(array)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(array[<span class="number">0</span>])):</span><br><span class="line">                <span class="keyword">if</span> target==array[i][j]:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></p><a id="more"></a>
<p>è§„å¾‹ï¼šé¦–å…ˆé€‰å–æ•°ç»„å³ä¸Šè§’çš„æ•°å­—</p>
<ul>
<li>å¦‚æœè¯¥æ•°å­—ç­‰äºè¦æŸ¥æ‰¾çš„æ•°å­—ï¼Œåˆ™æŸ¥æ‰¾ç»“æŸ</li>
<li>è¯¥æ•°å­—å¤§äºè¦æŸ¥æ‰¾çš„æ•°å­—ï¼Œåˆ™å‰”é™¤è¿™ä¸ªæ•°å­—æ‰€åœ¨çš„åˆ—</li>
<li>è¯¥æ•°å­—å°äºè¦æŸ¥æ‰¾çš„æ•°å­—ï¼Œåˆ™å‰”é™¤è¿™ä¸ªæ•°å­—æ‰€åœ¨çš„è¡Œ<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># array äºŒç»´åˆ—è¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Find</span><span class="params">(self, target, array)</span>:</span></span><br><span class="line">        row=<span class="number">0</span></span><br><span class="line">        column=len(array[<span class="number">0</span>])<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(row&lt;len(array) <span class="keyword">and</span> column&gt;=<span class="number">0</span>):</span><br><span class="line">            <span class="keyword">if</span>(array[row][column]==target):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">elif</span>(array[row][column]&gt;target):</span><br><span class="line">                column-=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                row+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<strong>C++</strong></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> target, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">array</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">array</span>.size();i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="built_in">array</span>[<span class="number">0</span>].size();j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(target==<span class="built_in">array</span>[i][j])</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> target, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; <span class="built_in">array</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> row=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> column=<span class="built_in">array</span>[<span class="number">0</span>].size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span>(row&lt;<span class="built_in">array</span>.size()&amp;&amp; column&gt;=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(target==<span class="built_in">array</span>[row][column])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(target&lt;<span class="built_in">array</span>[row][column])</span><br><span class="line">                column--;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                row++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
  </entry>
  <entry>
    <title>VINS-Monoè®ºæ–‡å­¦ä¹ ä¸ä»£ç è§£è¯»</title>
    <url>/2019/10/18/VINS-Mono%E8%AE%BA%E6%96%87%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><ol>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/86564879" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”å¯åŠ¨æ–‡ä»¶launchä¸å‚æ•°é…ç½®æ–‡ä»¶yamlä»‹ç»</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/86030962" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”å„ç§æ•°æ®ç»“æ„ sensor_msgs</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/85797156" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”è§†è§‰è·Ÿè¸ª feature_trackers</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/86290941" target="_blank" rel="noopener">VINS-Monoç†è®ºå­¦ä¹ â€”â€”IMUé¢„ç§¯åˆ† Pre-integration ï¼ˆJacobian åæ–¹å·®ï¼‰</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/86293038" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”çŠ¶æ€ä¼°è®¡å™¨æµç¨‹ estimator å†™åœ¨åˆå§‹åŒ–å’Œéçº¿æ€§ä¼˜åŒ–å‰</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/88942414" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ– initialStructure sfm</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/89106128" target="_blank" rel="noopener">VINS-Monoç†è®ºå­¦ä¹ â€”â€”è§†è§‰æƒ¯æ€§è”åˆåˆå§‹åŒ–ä¸å¤–å‚æ ‡å®š</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/93593844" target="_blank" rel="noopener">VINS-Monoç†è®ºå­¦ä¹ â€”â€”åç«¯éçº¿æ€§ä¼˜åŒ–</a></li>
<li><a href="https://blog.csdn.net/qq_41839222/article/details/87878550" target="_blank" rel="noopener">VINS-Monoä»£ç è§£è¯»â€”â€”å›ç¯æ£€æµ‹ä¸é‡å®šä½ pose graph loop closing</a></li>
</ol>]]></content>
      <categories>
        <category>VIO</category>
      </categories>
  </entry>
</search>
